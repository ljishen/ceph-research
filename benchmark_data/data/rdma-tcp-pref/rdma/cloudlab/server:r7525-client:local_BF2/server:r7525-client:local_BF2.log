

[1;7;39;49m[2021-05-14T15:29:18,601635642-07:00][RUNNING][ROUND 1/1/40] object_size=4KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:29:18,606427594-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:29:18,621650974-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40026\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1687831\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 94a68172-9c38-42f9-a2bf-46768bd772ab\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 94a68172-9c38-42f9-a2bf-46768bd772ab\nlast_changed 2021-05-14T15:29:23.505155-0700\ncreated 2021-05-14T15:29:23.505155-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40026/0,v1:10.10.1.2:40027/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1687831 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 0cec1e46-5a09-41ee-b4ef-b4f64ef03646\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 aeb4a90e-05c8-4f68-8a82-842af85ff036\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 04ca2b14-1f41-433b-89c1-d40f8742aa7d\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42026\n  w/ user/pass: admin / 09e13fa4-53d4-4188-a26d-3f358d876270\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 15:29:47 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40026
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1687831
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 94a68172-9c38-42f9-a2bf-46768bd772ab
setting min_mon_release = octopus
epoch 0
fsid 94a68172-9c38-42f9-a2bf-46768bd772ab
last_changed 2021-05-14T15:29:23.505155-0700
created 2021-05-14T15:29:23.505155-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40026/0,v1:10.10.1.2:40027/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1687831 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 0cec1e46-5a09-41ee-b4ef-b4f64ef03646
0
start osd.0
add osd1 aeb4a90e-05c8-4f68-8a82-842af85ff036
1
start osd.1
add osd2 04ca2b14-1f41-433b-89c1-d40f8742aa7d
2
start osd.2


restful urls: https://10.10.1.2:42026
  w/ user/pass: admin / 09e13fa4-53d4-4188-a26d-3f358d876270


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:29:20.177-0700 7f31c06251c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:29:20.177-0700 7f31c06251c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:29:20.197-0700 7effd49101c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:29:20.197-0700 7effd49101c0 -1 WARNING: all dangerous and experimental features are enabled.
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40026,v1:10.10.1.2:40027] --print /tmp/ceph_monmap.1687831 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1687831 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1687831 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42026 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5580f6cae000 @  0x7f5c786ba680 0x7f5c786db824 0x7f5c78e76187 0x7f5c78e7e355 0x7f5c78e76708 0x7f5c78e76877 0x7f5c78e77c24 0x7f5c78e8fec1 0x7f5c78e025f3 0x7f5c78e63e97 0x7f5c78e6bb1a 0x7f5c7856ed84 0x7f5c7868a609 0x7f5c7825e103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.pskurTlhEl 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 0cec1e46-5a09-41ee-b4ef-b4f64ef03646 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDR+Z5goFQhDxAA8Lae5DrscVSYQt7M2gtDow== --osd-uuid 0cec1e46-5a09-41ee-b4ef-b4f64ef03646 
2021-05-14T15:29:38.126-0700 7f4cda3fdf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:29:38.150-0700 7f4cda3fdf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:29:38.150-0700 7f4cda3fdf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55ed867fc000 @  0x7f4cdadc6680 0x7f4cdade7824 0x55ed7aea9447 0x55ed7aeb14b5 0x55ed7aea99c8 0x55ed7aea9b37 0x55ed7aeaaee4 0x55ed7ac7bca1 0x55ed7ae53423 0x55ed7ac6c2a7 0x55ed7ac7153a 0x7f4cda919d84 0x7f4cdaa9e609 0x7f4cda607103
2021-05-14T15:29:38.606-0700 7f4cda3fdf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new aeb4a90e-05c8-4f68-8a82-842af85ff036 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56341732a000 @  0x7fb4dcf84680 0x7fb4dcfa5824 0x56340c5b7447 0x56340c5bf4b5 0x56340c5b79c8 0x56340c5b7b37 0x56340c5b8ee4 0x56340c389ca1 0x56340c561423 0x56340c37a2a7 0x56340c37f53a 0x7fb4dcad7d84 0x7fb4dcc5c609 0x7fb4dc7c5103
2021-05-14T15:29:39.614-0700 7fb4dc5bbf00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDT+Z5g+2BjCBAAore6uyJHHF8CmOTG79YNpg== --osd-uuid aeb4a90e-05c8-4f68-8a82-842af85ff036 
2021-05-14T15:29:40.030-0700 7f9d5ca5af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:29:40.046-0700 7fb4dc5bbf00 -1 osd.0 0 log_to_monitors {default=true}
2021-05-14T15:29:40.054-0700 7f9d5ca5af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:29:40.054-0700 7f9d5ca5af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55875a854000 @  0x7f9d5d423680 0x7f9d5d444824 0x55874e95d447 0x55874e9654b5 0x55874e95d9c8 0x55874e95db37 0x55874e95eee4 0x55874e72fca1 0x55874e907423 0x55874e7202a7 0x55874e72553a 0x7f9d5cf76d84 0x7f9d5d0fb609 0x7f9d5cc64103
2021-05-14T15:29:40.510-0700 7f9d5ca5af00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 04ca2b14-1f41-433b-89c1-d40f8742aa7d -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5567da712000 @  0x7f235f627680 0x7f235f648824 0x5567cfd1c447 0x5567cfd244b5 0x5567cfd1c9c8 0x5567cfd1cb37 0x5567cfd1dee4 0x5567cfaeeca1 0x5567cfcc6423 0x5567cfadf2a7 0x5567cfae453a 0x7f235f17ad84 0x7f235f2ff609 0x7f235ee68103
2021-05-14T15:29:41.358-0700 7f235ec5ef00 -1 Falling back to public interface
2021-05-14T15:29:41.750-0700 7f235ec5ef00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDU+Z5gbzenNhAAcU9kg8AaDBBh1nwBBgLk9Q== --osd-uuid 04ca2b14-1f41-433b-89c1-d40f8742aa7d 
2021-05-14T15:29:41.786-0700 7faac513cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:29:41.810-0700 7faac513cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:29:41.810-0700 7faac513cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x560d62b22000 @  0x7faac5b05680 0x7faac5b26824 0x560d58512447 0x560d5851a4b5 0x560d585129c8 0x560d58512b37 0x560d58513ee4 0x560d582e4ca1 0x560d584bc423 0x560d582d52a7 0x560d582da53a 0x7faac5658d84 0x7faac57dd609 0x7faac5346103
2021-05-14T15:29:42.266-0700 7faac513cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55ce075dc000 @  0x7fe148dd8680 0x7fe148df9824 0x55cdfc083447 0x55cdfc08b4b5 0x55cdfc0839c8 0x55cdfc083b37 0x55cdfc084ee4 0x55cdfbe55ca1 0x55cdfc02d423 0x55cdfbe462a7 0x55cdfbe4b53a 0x7fe14892bd84 0x7fe148ab0609 0x7fe148619103
2021-05-14T15:29:43.094-0700 7fe14840ff00 -1 Falling back to public interface
2021-05-14T15:29:43.462-0700 7fe14840ff00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:29:47,141300307-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:29:47,158681565-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:29:47,238173502-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:29:47,244351901-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:29:49.060+0000 ffff7fddd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:29:49.893+0000 ffff7fddd1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T15:29:51,348419290-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:29:51,355478414-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:29:53.173+0000 ffffac0da1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:29:53.997+0000 ffffac0da1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T15:29:55,419585241-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:29:55,425914445-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:29:57.126+0000 ffff75f311e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:29:57.946+0000 ffff75f311e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T15:29:59,367744750-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:29:59,373948728-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:01.039+0000 ffff7d2391e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:01.903+0000 ffff7ca381e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:05.003+0000 ffff93ce21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:05.823+0000 ffff93ce21e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T15:30:07,165128618-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:07,171528934-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:09.156+0000 ffff7eb211e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:10.016+0000 ffff7eb211e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T15:30:11,749681014-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:11,757062152-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:13.449+0000 ffff8e6061e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:14.297+0000 ffff8e6061e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T15:30:16,328109678-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:16,334263202-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:18.029+0000 ffffa3c091e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:18.882+0000 ffffa3c091e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T15:30:20,956983000-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:20,963402955-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:22.766+0000 ffff9aac01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:23.586+0000 ffff9985e1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:30:25,653444389-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:25,660725401-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:27.339+0000 ffff75ece1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:28.191+0000 ffff75ece1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:30:30,627340461-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:30,633887533-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:32.328+0000 ffffae8d31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:33.204+0000 ffffae8d31e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T15:30:35,075585122-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:35,081765846-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:36.901+0000 ffff7dead1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:37.717+0000 ffff7dead1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T15:30:39,056295592-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:30:39,062697424-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:30:40.773+0000 ffff9c64e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:30:41.613+0000 ffff9c64e1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93  143      up          osd.2  
                       TOTAL  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T15:30:42,827433731-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:06,919643120-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:16,392363495-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:25,550767638-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:34,562178404-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:43,576942463-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:43,588331925-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:52,888826446-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:31:52,900028992-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:01,943250930-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:01,954631901-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:11,102786965-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:11,114168566-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:20,811864732-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:20,823114356-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:20,831379686-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:32:20,836207329-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:32:20,848028175-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3781856
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T15:32:20,857456999-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T15:32:20,896438568-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:32:20,902872220-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4096', '-O', '4096', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:32:22.415+0000 ffff91fdd010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:32:23.223+0000 ffff91fdd010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:32:23.223+0000 ffff91fdd010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:32:23.242161+0000 Maintaining 256 concurrent writes of 4096 bytes to objects of size 4096 for up to 20 seconds or 0 objects
2021-05-14T22:32:23.242203+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T22:32:23.244929+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:32:23.244929+0000     0       0         0         0         0         0           -           0
2021-05-14T22:32:24.245147+0000     1     255     15905     15650   61.1256   61.1328  0.00107135   0.0149393
2021-05-14T22:32:25.245304+0000     2     255     26808     26553   51.8542   42.5898  0.00295493    0.019039
2021-05-14T22:32:26.245473+0000     3     255     38598     38343   49.9184   46.0547  0.00113245   0.0194587
2021-05-14T22:32:27.245627+0000     4     255     49130     48875   47.7224   41.1406  0.00478705   0.0208185
2021-05-14T22:32:28.245789+0000     5     256     59852     59596   46.5523   41.8789 0.000874949   0.0210241
2021-05-14T22:32:29.245968+0000     6     255     70624     70369    45.806    42.082  0.00174756   0.0214597
2021-05-14T22:32:30.246149+0000     7     256     79566     79310   44.2507   34.9258    0.015164   0.0224939
2021-05-14T22:32:31.246298+0000     8     256     90365     90109   43.9916   42.1836 0.000948072   0.0225346
2021-05-14T22:32:32.246460+0000     9     255    100666    100411   43.5742   40.2422  0.00242512    0.022776
2021-05-14T22:32:33.246616+0000    10     255    111716    111461   43.5325   43.1641  0.00169748   0.0227415
2021-05-14T22:32:34.246770+0000    11     255    123257    123002   43.6728    45.082  0.00184545   0.0226814
2021-05-14T22:32:35.246922+0000    12     255    132003    131748     42.88   34.1641   0.0133991   0.0232351
2021-05-14T22:32:36.247074+0000    13     256    143645    143389   43.0789   45.4727  0.00138046   0.0230606
2021-05-14T22:32:37.247238+0000    14     255    153009    152754   42.6144    36.582    0.195787   0.0233007
2021-05-14T22:32:38.247390+0000    15     256    163533    163277   42.5134   41.1055  0.00318905   0.0233631
2021-05-14T22:32:39.247535+0000    16     256    174025    173769   42.4174   40.9844  0.00147285   0.0234607
2021-05-14T22:32:40.247681+0000    17     255    185155    184900   42.4796   43.4805  0.00492555   0.0234587
2021-05-14T22:32:41.247833+0000    18     256    195507    195251   42.3656   40.4336   0.0021269   0.0234953
2021-05-14T22:32:42.247983+0000    19     256    207059    206803   42.5105    45.125    0.117295   0.0234492
2021-05-14T22:32:43.248133+0000 min lat: 0.000739836 max lat: 0.386809 avg lat: 0.023556
2021-05-14T22:32:43.248133+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:32:43.248133+0000    20     250    217016    216766   42.3305    38.918    0.080674    0.023556
2021-05-14T22:32:44.248379+0000 Total time run:         20.0789
Total writes made:      217016
Write size:             4096
Object size:            4096
Bandwidth (MB/sec):     42.2194
Stddev Bandwidth:       5.49602
Max bandwidth (MB/sec): 61.1328
Min bandwidth (MB/sec): 34.1641
Average IOPS:           10808
Stddev IOPS:            1406.98
Max IOPS:               15650
Min IOPS:               8746
Average Latency(s):     0.0236252
Stddev Latency(s):      0.0548939
Max latency(s):         0.386809
Min latency(s):         0.000739836

[1;32mlocalhost.localdomain	[2021-05-14T15:32:44,893197435-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3781856


[1;33mlocalhost.localdomain	[2021-05-14T15:32:44,898617200-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:08,955510790-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 217.02k objects, 848 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:08,967291280-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:18,610199753-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 217.02k objects, 848 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:18,621874550-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:28,177350621-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 217.02k objects, 848 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:28,188757247-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:37,685476852-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 217.02k objects, 848 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:37,697242564-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:47,132895800-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 217.02k objects, 848 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:47,144594046-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:47,153120105-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:33:47,158150719-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:33:47,169827976-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3785500
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T15:33:47,181275034-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T15:33:47,219697639-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:33:47,226174439-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '17ec4353-d39c-4852-a977-bfcdeed31e2d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 17ec4353-d39c-4852-a977-bfcdeed31e2d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.f2DyMu:/tmp/ceph-asok.f2DyMu -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:33:48.817+0000 ffffaff48010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:33:49.622+0000 ffffaff48010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:33:49.626+0000 ffffaff48010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:33:49.648751+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:33:49.648751+0000     0      10        10         0         0         0           -           0
2021-05-14T22:33:50.648930+0000     1     255     32864     32609   127.289   127.379   0.0194195    0.007759
2021-05-14T22:33:51.649121+0000     2     255     65042     64787    126.48   125.695   0.0205884  0.00785088
2021-05-14T22:33:52.649368+0000     3     255     96673     96418   125.496   123.559  0.00632413  0.00793887
2021-05-14T22:33:53.649532+0000     4     255    128795    128540   125.486   125.477  0.00670709  0.00794467
2021-05-14T22:33:54.649720+0000     5     255    159496    159241    124.37   119.926  0.00150023  0.00801461
2021-05-14T22:33:55.649886+0000     6     255    190159    189904   123.601   119.777   0.0102668  0.00807344
2021-05-14T22:33:56.650106+0000 Total time run:       6.83635
Total reads made:     217016
Read size:            4096
Object size:          4096
Bandwidth (MB/sec):   124.002
Average IOPS:         31744
Stddev IOPS:          811.958
Max IOPS:             32609
Min IOPS:             30663
Average Latency(s):   0.00804585
Max latency(s):       0.0465407
Min latency(s):       0.000277788

[1;32mlocalhost.localdomain	[2021-05-14T15:33:57,313085398-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3785500


[1;7;39;49m[2021-05-14T15:33:57,317364773-07:00][RUNNING][ROUND 2/1/40] object_size=4KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:33:57,323600482-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:33:57,339148115-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40547\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1690833\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 93431a43-716e-4e0f-9c82-9a763466fac5\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 93431a43-716e-4e0f-9c82-9a763466fac5\nlast_changed 2021-05-14T15:34:25.390351-0700\ncreated 2021-05-14T15:34:25.390351-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40547/0,v1:10.10.1.2:40548/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1690833 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 bacd23ec-85b4-4844-a191-1cf1f6aa5c26\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 96849bb0-9627-4fd6-978b-f918641a2ccc\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 906a57b3-9545-4901-a382-a5d42f9087b8\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42547\n'
10.10.1.2: b'  w/ user/pass: admin / da06a138-8a6b-4a34-8cce-c4e7532d5791\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 15:34:49 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40547
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1690833
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 93431a43-716e-4e0f-9c82-9a763466fac5
setting min_mon_release = octopus
epoch 0
fsid 93431a43-716e-4e0f-9c82-9a763466fac5
last_changed 2021-05-14T15:34:25.390351-0700
created 2021-05-14T15:34:25.390351-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40547/0,v1:10.10.1.2:40548/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1690833 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 bacd23ec-85b4-4844-a191-1cf1f6aa5c26
0
start osd.0
add osd1 96849bb0-9627-4fd6-978b-f918641a2ccc
1
start osd.1
add osd2 906a57b3-9545-4901-a382-a5d42f9087b8
2
start osd.2


restful urls: https://10.10.1.2:42547
  w/ user/pass: admin / da06a138-8a6b-4a34-8cce-c4e7532d5791


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:33:59.512-0700 7f8a2d8641c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:33:59.512-0700 7f8a2d8641c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:33:59.528-0700 7fa33e2081c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:33:59.528-0700 7fa33e2081c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40547,v1:10.10.1.2:40548] --print /tmp/ceph_monmap.1690833 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1690833 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1690833 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42547 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a8f8d92000 @  0x7f1f02ee8680 0x7f1f02f09824 0x7f1f036a4187 0x7f1f036ac355 0x7f1f036a4708 0x7f1f036a4877 0x7f1f036a5c24 0x7f1f036bdec1 0x7f1f036305f3 0x7f1f03691e97 0x7f1f03699b1a 0x7f1f02d9cd84 0x7f1f02eb8609 0x7f1f02a8c103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.G2JpgraTbC 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new bacd23ec-85b4-4844-a191-1cf1f6aa5c26 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQD/+p5g3ey3HxAA3e1bx4MRz/8ThdpuES9yhg== --osd-uuid bacd23ec-85b4-4844-a191-1cf1f6aa5c26 
2021-05-14T15:34:40.340-0700 7f89d2982f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:34:40.360-0700 7f89d2982f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:34:40.360-0700 7f89d2982f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56434e8f4000 @  0x7f89d334b680 0x7f89d336c824 0x5643432bb447 0x5643432c34b5 0x5643432bb9c8 0x5643432bbb37 0x5643432bcee4 0x56434308dca1 0x564343265423 0x56434307e2a7 0x56434308353a 0x7f89d2e9ed84 0x7f89d3023609 0x7f89d2b8c103
2021-05-14T15:34:40.760-0700 7f89d2982f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 96849bb0-9627-4fd6-978b-f918641a2ccc -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5602bc5a0000 @  0x7fa3460a6680 0x7fa3460c7824 0x5602b1831447 0x5602b18394b5 0x5602b18319c8 0x5602b1831b37 0x5602b1832ee4 0x5602b1603ca1 0x5602b17db423 0x5602b15f42a7 0x5602b15f953a 0x7fa345bf9d84 0x7fa345d7e609 0x7fa3458e7103
2021-05-14T15:34:41.532-0700 7fa3456ddf00 -1 Falling back to public interface
2021-05-14T15:34:41.876-0700 7fa3456ddf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAB+55g8Z1+CBAAzVD0yDfI3qCkE8Vh5PhJxw== --osd-uuid 96849bb0-9627-4fd6-978b-f918641a2ccc 
2021-05-14T15:34:42.024-0700 7f999e726f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:34:42.044-0700 7f999e726f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:34:42.044-0700 7f999e726f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55f84f080000 @  0x7f999f0ef680 0x7f999f110824 0x55f843746447 0x55f84374e4b5 0x55f8437469c8 0x55f843746b37 0x55f843747ee4 0x55f843518ca1 0x55f8436f0423 0x55f8435092a7 0x55f84350e53a 0x7f999ec42d84 0x7f999edc7609 0x7f999e930103
2021-05-14T15:34:42.472-0700 7f999e726f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 906a57b3-9545-4901-a382-a5d42f9087b8 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x564322614000 @  0x7f0a9b1ad680 0x7f0a9b1ce824 0x56431812b447 0x5643181334b5 0x56431812b9c8 0x56431812bb37 0x56431812cee4 0x564317efdca1 0x5643180d5423 0x564317eee2a7 0x564317ef353a 0x7f0a9ad00d84 0x7f0a9ae85609 0x7f0a9a9ee103
2021-05-14T15:34:43.244-0700 7f0a9a7e4f00 -1 Falling back to public interface
2021-05-14T15:34:43.600-0700 7f0a9a7e4f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAC+55g6ntGMxAAEyVQWdnUQ5p4vf1S4giA7A== --osd-uuid 906a57b3-9545-4901-a382-a5d42f9087b8 
2021-05-14T15:34:43.680-0700 7f3491e99f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:34:43.700-0700 7f3491e99f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:34:43.700-0700 7f3491e99f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55b0dbc92000 @  0x7f3492862680 0x7f3492883824 0x55b0cfe64447 0x55b0cfe6c4b5 0x55b0cfe649c8 0x55b0cfe64b37 0x55b0cfe65ee4 0x55b0cfc36ca1 0x55b0cfe0e423 0x55b0cfc272a7 0x55b0cfc2c53a 0x7f34923b5d84 0x7f349253a609 0x7f34920a3103
2021-05-14T15:34:44.096-0700 7f3491e99f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55e77dac8000 @  0x7f5da8fd9680 0x7f5da8ffa824 0x55e7724e8447 0x55e7724f04b5 0x55e7724e89c8 0x55e7724e8b37 0x55e7724e9ee4 0x55e7722baca1 0x55e772492423 0x55e7722ab2a7 0x55e7722b053a 0x7f5da8b2cd84 0x7f5da8cb1609 0x7f5da881a103
2021-05-14T15:34:45.308-0700 7f5da8610f00 -1 Falling back to public interface
2021-05-14T15:34:45.644-0700 7f5da8610f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:34:49,139181438-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:34:49,160251138-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:34:49,246476506-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:34:49,253517237-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:34:50.944+0000 ffffa79951e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:34:51.772+0000 ffffa79951e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T15:34:53,226627886-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:34:53,233077996-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:34:54.917+0000 ffff845231e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:34:55.737+0000 ffff832c11e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T15:34:57,081900408-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:34:57,088310222-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:34:58.789+0000 ffff977151e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:34:59.665+0000 ffff977151e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T15:35:01,087160338-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:01,093397862-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:02.946+0000 ffff8fdc81e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:03.766+0000 ffff8eb661e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:06.887+0000 ffff8c7121e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:07.755+0000 ffff8b4b01e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T15:35:09,178051898-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:09,184273069-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:10.899+0000 ffff98baf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:11.748+0000 ffff98baf1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T15:35:13,363245901-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:13,369491257-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:15.056+0000 ffff8770a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:15.920+0000 ffff8770a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T15:35:18,250860233-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:18,257049119-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:20.241+0000 ffffa20af1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:21.085+0000 ffffa20af1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T15:35:23,368187904-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:23,374712022-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:25.038+0000 ffff848841e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:25.854+0000 ffff848841e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:35:27,607764376-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:27,614039947-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:29.275+0000 ffff945431e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:30.127+0000 ffff945431e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:35:32,132165476-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:32,138665651-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:34.015+0000 ffffaaa7a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:34.839+0000 ffffaaa7a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T15:35:36,419357431-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:36,426204149-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:38.152+0000 ffffa5d5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:39.008+0000 ffffa5d5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T15:35:40,387713784-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:35:40,394055276-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:35:42.049+0000 ffff975291e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:35:42.865+0000 ffff975291e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T15:35:44,211273384-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:08,213268422-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:17,318161966-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:26,566269645-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:35,595337027-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:45,006753158-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   239 KiB used, 300 GiB / 300 GiB avail
    pgs:     1.042% pgs not active
             190 active+clean
             2   peering
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:45,020723918-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:54,658681660-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:36:54,672560859-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:03,820875726-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:03,834821731-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:12,959398114-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:12,973519064-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:22,154817194-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:22,168889881-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:22,179588147-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:37:22,186085471-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:37:22,200517859-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3795999
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T15:37:22,212539531-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_write.log.2
[1;30mlocalhost.localdomain	[2021-05-14T15:37:22,252668034-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:37:22,258942225-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4096', '-O', '4096', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:37:23.862+0000 ffff94d70010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:37:24.686+0000 ffff94d70010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:37:24.686+0000 ffff94d70010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:37:24.707670+0000 Maintaining 256 concurrent writes of 4096 bytes to objects of size 4096 for up to 20 seconds or 0 objects
2021-05-14T22:37:24.707721+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T22:37:24.709995+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:37:24.709995+0000     0       0         0         0         0         0           -           0
2021-05-14T22:37:25.710186+0000     1     255     16241     15986   62.4413   62.4453   0.0022121   0.0150227
2021-05-14T22:37:26.710356+0000     2     256     28615     28359   55.3822    48.332   0.0013192   0.0172738
2021-05-14T22:37:27.710535+0000     3     256     40811     40555   52.7987   47.6406  0.00562059   0.0183575
2021-05-14T22:37:28.710689+0000     4     256     49461     49205   48.0449   33.7891  0.00387926   0.0205931
2021-05-14T22:37:29.710841+0000     5     255     59326     59071   46.1426   38.5391  0.00123116   0.0214996
2021-05-14T22:37:30.710987+0000     6     256     70372     70116   45.6419   43.1445  0.00134588   0.0217296
2021-05-14T22:37:31.711285+0000     7     256     81933     81677   45.5711   45.1602   0.0394647   0.0217426
2021-05-14T22:37:32.711432+0000     8     255     93587     93332   45.5648   45.5273  0.00206852   0.0216969
2021-05-14T22:37:33.711584+0000     9     256    105009    104753   45.4583   44.6133  0.00112681   0.0217651
2021-05-14T22:37:34.711739+0000    10     256    116760    116504    45.502   45.9023  0.00186626   0.0218082
2021-05-14T22:37:35.711889+0000    11     256    127211    126955   45.0762   40.8242  0.00932642   0.0220332
2021-05-14T22:37:36.712042+0000    12     255    138469    138214   44.9843   43.9805   0.0491869   0.0220657
2021-05-14T22:37:37.712196+0000    13     256    149552    149296   44.8534   43.2891    0.172876    0.022182
2021-05-14T22:37:38.712351+0000    14     256    159386    159130    44.393   38.4141  0.00141527   0.0223627
2021-05-14T22:37:39.712502+0000    15     255    170800    170545   44.4057   44.5898  0.00171988   0.0223802
2021-05-14T22:37:40.712652+0000    16     256    181311    181055   44.1959   41.0547  0.00287746   0.0224954
2021-05-14T22:37:41.712845+0000    17     255    192952    192697   44.2707   45.4766  0.00324298   0.0224657
2021-05-14T22:37:42.713014+0000    18     255    203313    203058   44.0593   40.4727   0.0253083   0.0226522
2021-05-14T22:37:43.713183+0000    19     256    213922    213666    43.921   41.4375  0.00345348   0.0226973
2021-05-14T22:37:44.713343+0000 min lat: 0.000721458 max lat: 0.336982 avg lat: 0.0226561
2021-05-14T22:37:44.713343+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:37:44.713343+0000    20     219    225761    225542   44.0441   46.3906   0.0730382   0.0226561
2021-05-14T22:37:45.713597+0000 Total time run:         20.1308
Total writes made:      225761
Write size:             4096
Object size:            4096
Bandwidth (MB/sec):     43.8074
Stddev Bandwidth:       5.58385
Max bandwidth (MB/sec): 62.4453
Min bandwidth (MB/sec): 33.7891
Average IOPS:           11214
Stddev IOPS:            1429.47
Max IOPS:               15986
Min IOPS:               8650
Average Latency(s):     0.0227252
Stddev Latency(s):      0.0518933
Max latency(s):         0.336982
Min latency(s):         0.000721458

[1;32mlocalhost.localdomain	[2021-05-14T15:37:46,356647700-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3795999


[1;33mlocalhost.localdomain	[2021-05-14T15:37:46,363615609-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:10,465223915-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 225.76k objects, 882 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:10,479111470-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:19,873546712-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 225.76k objects, 882 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:19,887541821-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:29,190835776-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 225.76k objects, 882 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:29,204785367-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:38,307943770-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 225.76k objects, 882 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:38,322116314-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:47,459015450-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 225.76k objects, 882 MiB
    usage:   1.7 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:47,472738262-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:47,483536805-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:38:47,489851833-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:38:47,504369526-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3799539
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T15:38:47,516503627-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T15:38:47,554819628-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:38:47,561324213-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '29c3a49c-701c-472d-975e-f0327e0fd06e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 29c3a49c-701c-472d-975e-f0327e0fd06e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.GxEWJk:/tmp/ceph-asok.GxEWJk -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:38:49.337+0000 ffffb61a8010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:38:50.173+0000 ffffb61a8010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:38:50.173+0000 ffffb61a8010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:38:50.194274+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:38:50.194274+0000     0       0         0         0         0         0           -           0
2021-05-14T22:38:51.194454+0000     1     255     29769     29514   115.255   115.289   0.0026091  0.00857687
2021-05-14T22:38:52.194620+0000     2     256     60374     60118   117.391   119.547  0.00666883  0.00848551
2021-05-14T22:38:53.194802+0000     3     256     86528     86272   112.309   102.164 0.000749303  0.00873015
2021-05-14T22:38:54.194972+0000     4     256    112600    112344   109.689   101.844   0.0148859  0.00899008
2021-05-14T22:38:55.195133+0000     5     256    143763    143507   112.093    121.73 0.000358981  0.00889628
2021-05-14T22:38:56.195293+0000     6     255    174161    173906   113.199   118.746   0.0128225  0.00881445
2021-05-14T22:38:57.195462+0000     7     256    199493    199237   111.161   98.9492    0.010533  0.00880903
2021-05-14T22:38:58.195690+0000 Total time run:       7.90058
Total reads made:     225761
Read size:            4096
Object size:          4096
Bandwidth (MB/sec):   111.622
Average IOPS:         28575
Stddev IOPS:          2502.81
Max IOPS:             31163
Min IOPS:             25331
Average Latency(s):   0.00894193
Max latency(s):       0.174656
Min latency(s):       0.000278582

[1;32mlocalhost.localdomain	[2021-05-14T15:38:58,854468355-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3799539


[1;7;39;49m[2021-05-14T15:38:58,858907928-07:00][RUNNING][ROUND 3/1/40] object_size=4KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:38:58,865353103-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:38:58,881386295-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40066\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1693865\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 2bdab77a-77c1-45e0-98bd-08948438283f\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 2bdab77a-77c1-45e0-98bd-08948438283f\nlast_changed 2021-05-14T15:39:27.561137-0700\ncreated 2021-05-14T15:39:27.561137-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40066/0,v1:10.10.1.2:40067/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1693865 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 747ddcf9-1166-47be-92a9-f03e90475182\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 e1a754ee-5fd4-470f-b51f-a6a4dd75d60a\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 a6a87015-d709-40ca-a2f0-bdfecf3cc264\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42066\n  w/ user/pass: admin / 21f8eb39-db45-43ea-9f2a-704e5917e61f\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 15:39:51 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40066
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1693865
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 2bdab77a-77c1-45e0-98bd-08948438283f
setting min_mon_release = octopus
epoch 0
fsid 2bdab77a-77c1-45e0-98bd-08948438283f
last_changed 2021-05-14T15:39:27.561137-0700
created 2021-05-14T15:39:27.561137-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40066/0,v1:10.10.1.2:40067/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1693865 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 747ddcf9-1166-47be-92a9-f03e90475182
0
start osd.0
add osd1 e1a754ee-5fd4-470f-b51f-a6a4dd75d60a
1
start osd.1
add osd2 a6a87015-d709-40ca-a2f0-bdfecf3cc264
2
start osd.2


restful urls: https://10.10.1.2:42066
  w/ user/pass: admin / 21f8eb39-db45-43ea-9f2a-704e5917e61f


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:39:01.527-0700 7f7bee7e31c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:39:01.527-0700 7f7bee7e31c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:39:01.547-0700 7fa33c70b1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:39:01.547-0700 7fa33c70b1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40066,v1:10.10.1.2:40067] --print /tmp/ceph_monmap.1693865 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1693865 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1693865 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42066 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x560660280000 @  0x7f8046524680 0x7f8046545824 0x7f8046ce0187 0x7f8046ce8355 0x7f8046ce0708 0x7f8046ce0877 0x7f8046ce1c24 0x7f8046cf9ec1 0x7f8046c6c5f3 0x7f8046ccde97 0x7f8046cd5b1a 0x7f80463d8d84 0x7f80464f4609 0x7f80460c8103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.MVE3TES5ur 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 747ddcf9-1166-47be-92a9-f03e90475182 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAt/J5ggeWsMBAAi3ZmyuQOs0QbYlVTl38weQ== --osd-uuid 747ddcf9-1166-47be-92a9-f03e90475182 
2021-05-14T15:39:42.627-0700 7f3488412f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:39:42.647-0700 7f3488412f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:39:42.647-0700 7f3488412f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5612cbaf8000 @  0x7f3488ddb680 0x7f3488dfc824 0x5612c0838447 0x5612c08404b5 0x5612c08389c8 0x5612c0838b37 0x5612c0839ee4 0x5612c060aca1 0x5612c07e2423 0x5612c05fb2a7 0x5612c060053a 0x7f348892ed84 0x7f3488ab3609 0x7f348861c103
2021-05-14T15:39:43.087-0700 7f3488412f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new e1a754ee-5fd4-470f-b51f-a6a4dd75d60a -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55e2592b6000 @  0x7f0f8ffe1680 0x7f0f90002824 0x55e24e82b447 0x55e24e8334b5 0x55e24e82b9c8 0x55e24e82bb37 0x55e24e82cee4 0x55e24e5fdca1 0x55e24e7d5423 0x55e24e5ee2a7 0x55e24e5f353a 0x7f0f8fb34d84 0x7f0f8fcb9609 0x7f0f8f822103
2021-05-14T15:39:43.847-0700 7f0f8f618f00 -1 Falling back to public interface
2021-05-14T15:39:44.203-0700 7f0f8f618f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAv/J5gD59KGhAA4IXf6KhVYw9ixDTewK7CFQ== --osd-uuid e1a754ee-5fd4-470f-b51f-a6a4dd75d60a 
2021-05-14T15:39:44.251-0700 7f2583e64f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:39:44.271-0700 7f2583e64f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:39:44.271-0700 7f2583e64f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x555b11486000 @  0x7f258482d680 0x7f258484e824 0x555b05ff0447 0x555b05ff84b5 0x555b05ff09c8 0x555b05ff0b37 0x555b05ff1ee4 0x555b05dc2ca1 0x555b05f9a423 0x555b05db32a7 0x555b05db853a 0x7f2584380d84 0x7f2584505609 0x7f258406e103
2021-05-14T15:39:44.667-0700 7f2583e64f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new a6a87015-d709-40ca-a2f0-bdfecf3cc264 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55f92b350000 @  0x7fc3284c2680 0x7fc3284e3824 0x55f91fb56447 0x55f91fb5e4b5 0x55f91fb569c8 0x55f91fb56b37 0x55f91fb57ee4 0x55f91f928ca1 0x55f91fb00423 0x55f91f9192a7 0x55f91f91e53a 0x7fc328015d84 0x7fc32819a609 0x7fc327d03103
2021-05-14T15:39:45.427-0700 7fc327af9f00 -1 Falling back to public interface
2021-05-14T15:39:45.775-0700 7fc327af9f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAx/J5g1uJWAxAAzpjWqruXnSnKyVbDoIC1SQ== --osd-uuid a6a87015-d709-40ca-a2f0-bdfecf3cc264 
2021-05-14T15:39:45.851-0700 7f51a7854f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:39:45.871-0700 7f51a7854f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:39:45.871-0700 7f51a7854f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55fe2a1fc000 @  0x7f51a821d680 0x7f51a823e824 0x55fe1f89f447 0x55fe1f8a74b5 0x55fe1f89f9c8 0x55fe1f89fb37 0x55fe1f8a0ee4 0x55fe1f671ca1 0x55fe1f849423 0x55fe1f6622a7 0x55fe1f66753a 0x7f51a7d70d84 0x7f51a7ef5609 0x7f51a7a5e103
2021-05-14T15:39:46.255-0700 7f51a7854f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55e99281c000 @  0x7fe585a9a680 0x7fe585abb824 0x55e987355447 0x55e98735d4b5 0x55e9873559c8 0x55e987355b37 0x55e987356ee4 0x55e987127ca1 0x55e9872ff423 0x55e9871182a7 0x55e98711d53a 0x7fe5855edd84 0x7fe585772609 0x7fe5852db103
2021-05-14T15:39:46.967-0700 7fe5850d1f00 -1 Falling back to public interface
2021-05-14T15:39:47.307-0700 7fe5850d1f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:39:51,247254219-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:39:51,265705734-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:39:51,348318881-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:39:51,355207652-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:39:53.012+0000 ffffb35961e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:39:53.856+0000 ffffb35961e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T15:39:55,288192534-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:39:55,294542713-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:39:57.024+0000 ffff7c95b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:39:57.844+0000 ffff7c95b1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T15:39:59,295089336-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:39:59,301294651-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:01.121+0000 ffff97d2d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:01.965+0000 ffff97d2d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T15:40:03,505484000-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:03,511619912-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:05.194+0000 ffff984251e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:06.006+0000 ffff984251e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:09.150+0000 ffff766211e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:10.002+0000 ffff766211e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T15:40:11,427017570-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:11,433538523-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:13.263+0000 ffffaf4461e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:14.103+0000 ffffaf4461e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T15:40:15,841010453-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:15,847154242-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:17.716+0000 ffff8584f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:18.564+0000 ffff7ffff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T15:40:20,552107833-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:20,558516222-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:22.245+0000 ffff8f3b61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:23.065+0000 ffff8f3b61e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T15:40:25,490707668-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:25,497179218-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:27.517+0000 ffff8e4a71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:28.386+0000 ffff8e4a71e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:40:30,650133490-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:30,656413742-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:32.354+0000 ffff930701e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:33.242+0000 ffff91e0e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:40:35,479213408-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:35,485700935-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:37.187+0000 ffff85c5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:38.015+0000 ffff85c5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T15:40:39,979152681-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:39,985481707-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:41.888+0000 ffff7dbee1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:42.732+0000 ffff7c98c1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T15:40:44,341005131-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:40:44,348009482-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:40:46.009+0000 ffffaf9421e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:40:46.829+0000 ffffae6e01e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  200 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T15:40:48,145700555-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:12,255790617-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:21,663144037-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:30,928024808-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:40,165459141-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:49,296357629-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:49,310504384-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:58,512715145-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:41:58,527238599-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:07,661333093-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:07,675118542-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:16,940031047-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:16,954147122-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:26,098648272-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:26,112733922-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:26,123707320-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:42:26,130530455-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:42:26,145832932-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3810053
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T15:42:26,158444191-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_write.log.3
[1;30mlocalhost.localdomain	[2021-05-14T15:42:26,197698527-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:42:26,204252636-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4096', '-O', '4096', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:42:27.690+0000 ffffb9b7b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:42:28.506+0000 ffffb9b7b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:42:28.506+0000 ffffb9b7b010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:42:28.527409+0000 Maintaining 256 concurrent writes of 4096 bytes to objects of size 4096 for up to 20 seconds or 0 objects
2021-05-14T22:42:28.527461+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T22:42:28.530291+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:42:28.530291+0000     0       0         0         0         0         0           -           0
2021-05-14T22:42:29.530481+0000     1     256     14731     14475   56.5293    56.543   0.0626136   0.0168569
2021-05-14T22:42:30.530666+0000     2     255     27733     27478   53.6565    50.793  0.00176015   0.0182186
2021-05-14T22:42:31.530818+0000     3     255     39760     39505   51.4289   46.9805  0.00219975   0.0188573
2021-05-14T22:42:32.530965+0000     4     255     49858     49603   48.4317   39.4453  0.00197743   0.0201494
2021-05-14T22:42:33.531110+0000     5     255     58873     58618   45.7873   35.2148   0.0114217   0.0214728
2021-05-14T22:42:34.531260+0000     6     255     69564     69309   45.1154   41.7617  0.00163843   0.0220111
2021-05-14T22:42:35.531413+0000     7     256     79544     79288   44.2381   38.9805  0.00237702   0.0224783
2021-05-14T22:42:36.531563+0000     8     256     91114     90858   44.3569   45.1953    0.116002    0.022378
2021-05-14T22:42:37.531708+0000     9     256    100779    100523   43.6227   37.7539  0.00179464   0.0226603
2021-05-14T22:42:38.531863+0000    10     255    109291    109036   42.5853   33.2539  0.00886063   0.0233746
2021-05-14T22:42:39.532023+0000    11     256    117669    117413   41.6882   32.7227  0.00167408   0.0237228
2021-05-14T22:42:40.532180+0000    12     256    127616    127360   41.4516   38.8555  0.00133781   0.0239231
2021-05-14T22:42:41.532334+0000    13     255    135762    135507   40.7107   31.8242   0.0237912   0.0244276
2021-05-14T22:42:42.532486+0000    14     255    145236    144981   40.4458   37.0078  0.00163642   0.0245027
2021-05-14T22:42:43.532631+0000    15     255    154159    153904   40.0728   34.8555  0.00258385   0.0247828
2021-05-14T22:42:44.532799+0000    16     256    164358    164102   40.0576   39.8359 0.000836963   0.0247395
2021-05-14T22:42:45.532954+0000    17     255    171699    171444    39.388   28.6797    0.281883   0.0251875
2021-05-14T22:42:46.533115+0000    18     255    182635    182380   39.5727   42.7188  0.00152079    0.025128
2021-05-14T22:42:47.533315+0000    19     256    192136    191880   39.4426   37.1094  0.00171704   0.0251428
2021-05-14T22:42:48.533478+0000 min lat: 0.000742837 max lat: 0.437893 avg lat: 0.0253033
2021-05-14T22:42:48.533478+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:42:48.533478+0000    20     251    201669    201418   39.3331   37.2578   0.0022955   0.0253033
2021-05-14T22:42:49.533797+0000 Total time run:         20.1218
Total writes made:      201669
Write size:             4096
Object size:            4096
Bandwidth (MB/sec):     39.15
Stddev Bandwidth:       6.66108
Max bandwidth (MB/sec): 56.543
Min bandwidth (MB/sec): 28.6797
Average IOPS:           10022
Stddev IOPS:            1705.24
Max IOPS:               14475
Min IOPS:               7342
Average Latency(s):     0.0254524
Stddev Latency(s):      0.058779
Max latency(s):         0.437893
Min latency(s):         0.000742837

[1;32mlocalhost.localdomain	[2021-05-14T15:42:50,168657261-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3810053


[1;33mlocalhost.localdomain	[2021-05-14T15:42:50,175759714-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:14,386004264-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 201.67k objects, 788 MiB
    usage:   1.5 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:14,400316662-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:23,807416612-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 201.67k objects, 788 MiB
    usage:   1.5 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:23,821979418-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:32,988791048-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 201.67k objects, 788 MiB
    usage:   1.5 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:33,003429993-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:42,738304307-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 201.67k objects, 788 MiB
    usage:   1.5 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:42,752687203-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:52,300554840-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 201.67k objects, 788 MiB
    usage:   1.5 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:52,315034922-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:52,325995794-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:43:52,332636437-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:43:52,347385156-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3813549
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T15:43:52,359537185-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T15:43:52,397048180-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:43:52,403263861-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '8932cf23-d20e-471a-bf27-2bad45449342', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 8932cf23-d20e-471a-bf27-2bad45449342 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.mwOPZI:/tmp/ceph-asok.mwOPZI -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:43:53.909+0000 ffff915ef010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:43:54.741+0000 ffff915ef010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:43:54.741+0000 ffff915ef010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:43:54.763842+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:43:54.763842+0000     0       0         0         0         0         0           -           0
2021-05-14T22:43:55.764007+0000     1     255     31760     31505   123.031   123.066  0.00264962  0.00803909
2021-05-14T22:43:56.764175+0000     2     255     62691     62436   121.917   120.824  0.00650033  0.00816743
2021-05-14T22:43:57.764344+0000     3     255     94047     93792     122.1   122.484  0.00214664  0.00815561
2021-05-14T22:43:58.764526+0000     4     255    125999    125744   122.772   124.812  0.00512591  0.00812636
2021-05-14T22:43:59.764710+0000     5     255    157098    156843   122.509    121.48   0.0156099  0.00813942
2021-05-14T22:44:00.764876+0000     6     255    188169    187914   122.316   121.371   0.0171195  0.00815432
2021-05-14T22:44:01.765245+0000 Total time run:       6.439
Total reads made:     201669
Read size:            4096
Object size:          4096
Bandwidth (MB/sec):   122.343
Average IOPS:         31319
Stddev IOPS:          373.39
Max IOPS:             31952
Min IOPS:             30931
Average Latency(s):   0.00815488
Max latency(s):       0.0421238
Min latency(s):       0.00029027

[1;32mlocalhost.localdomain	[2021-05-14T15:44:02,445586862-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3813549


[1;7;39;49m[2021-05-14T15:44:02,450124837-07:00][RUNNING][ROUND 4/1/40] object_size=4KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:44:02,456790970-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:44:02,472538424-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40775\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1696879\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 67a2d7d3-c02b-43c9-9316-b3167c1a734f\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 67a2d7d3-c02b-43c9-9316-b3167c1a734f\nlast_changed 2021-05-14T15:44:26.905071-0700\ncreated 2021-05-14T15:44:26.905071-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40775/0,v1:10.10.1.2:40776/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1696879 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 625a175e-1cf3-4b7b-b2d6-9eb0465dc23f\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 a6d24249-5520-4d09-82cb-2f8afd0290d5\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 a9a87a6c-bacb-4ecf-8042-0a2fa296fea4\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42775\n'
10.10.1.2: b'  w/ user/pass: admin / a6e7052a-33db-45ad-bdc3-59f3b2911588\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\nCEPH_DEV=1\n'
[1] 15:44:50 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40775
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1696879
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 67a2d7d3-c02b-43c9-9316-b3167c1a734f
setting min_mon_release = octopus
epoch 0
fsid 67a2d7d3-c02b-43c9-9316-b3167c1a734f
last_changed 2021-05-14T15:44:26.905071-0700
created 2021-05-14T15:44:26.905071-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40775/0,v1:10.10.1.2:40776/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1696879 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 625a175e-1cf3-4b7b-b2d6-9eb0465dc23f
0
start osd.0
add osd1 a6d24249-5520-4d09-82cb-2f8afd0290d5
1
start osd.1
add osd2 a9a87a6c-bacb-4ecf-8042-0a2fa296fea4
2
start osd.2


restful urls: https://10.10.1.2:42775
  w/ user/pass: admin / a6e7052a-33db-45ad-bdc3-59f3b2911588


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:44:04.785-0700 7fc3727a91c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:44:04.785-0700 7fc3727a91c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:44:04.805-0700 7f166ddaa1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:44:04.805-0700 7f166ddaa1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40775,v1:10.10.1.2:40776] --print /tmp/ceph_monmap.1696879 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1696879 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1696879 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42775 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55ad9cf5a000 @  0x7fe1bdab8680 0x7fe1bdad9824 0x7fe1be274187 0x7fe1be27c355 0x7fe1be274708 0x7fe1be274877 0x7fe1be275c24 0x7fe1be28dec1 0x7fe1be2005f3 0x7fe1be261e97 0x7fe1be269b1a 0x7fe1bd96cd84 0x7fe1bda88609 0x7fe1bd65c103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.ZtgKYGh2zI 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 625a175e-1cf3-4b7b-b2d6-9eb0465dc23f -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBY/Z5gO6BRLhAAiEQs4/kHy9ZH801hoXTPgw== --osd-uuid 625a175e-1cf3-4b7b-b2d6-9eb0465dc23f 
2021-05-14T15:44:41.626-0700 7f4c81580f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:44:41.646-0700 7f4c81580f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:44:41.646-0700 7f4c81580f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x563a48aea000 @  0x7f4c81f49680 0x7f4c81f6a824 0x563a3e77e447 0x563a3e7864b5 0x563a3e77e9c8 0x563a3e77eb37 0x563a3e77fee4 0x563a3e550ca1 0x563a3e728423 0x563a3e5412a7 0x563a3e54653a 0x7f4c81a9cd84 0x7f4c81c21609 0x7f4c8178a103
2021-05-14T15:44:42.110-0700 7f4c81580f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new a6d24249-5520-4d09-82cb-2f8afd0290d5 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55eda7952000 @  0x7fa27b5d3680 0x7fa27b5f4824 0x55ed9d6ec447 0x55ed9d6f44b5 0x55ed9d6ec9c8 0x55ed9d6ecb37 0x55ed9d6edee4 0x55ed9d4beca1 0x55ed9d696423 0x55ed9d4af2a7 0x55ed9d4b453a 0x7fa27b126d84 0x7fa27b2ab609 0x7fa27ae14103
2021-05-14T15:44:42.966-0700 7fa27ac0af00 -1 Falling back to public interface
2021-05-14T15:44:43.366-0700 7fa27ac0af00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBa/Z5gFlNWHhAAHLyxDYMXBhHwaCfNbLjtjg== --osd-uuid a6d24249-5520-4d09-82cb-2f8afd0290d5 
2021-05-14T15:44:43.406-0700 7f1290f3ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:44:43.426-0700 7f1290f3ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:44:43.426-0700 7f1290f3ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5614e117c000 @  0x7f1291908680 0x7f1291929824 0x5614d5f99447 0x5614d5fa14b5 0x5614d5f999c8 0x5614d5f99b37 0x5614d5f9aee4 0x5614d5d6bca1 0x5614d5f43423 0x5614d5d5c2a7 0x5614d5d6153a 0x7f129145bd84 0x7f12915e0609 0x7f1291149103
2021-05-14T15:44:43.922-0700 7f1290f3ff00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new a9a87a6c-bacb-4ecf-8042-0a2fa296fea4 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5631ef4ec000 @  0x7fdd6aa72680 0x7fdd6aa93824 0x5631e43b2447 0x5631e43ba4b5 0x5631e43b29c8 0x5631e43b2b37 0x5631e43b3ee4 0x5631e4184ca1 0x5631e435c423 0x5631e41752a7 0x5631e417a53a 0x7fdd6a5c5d84 0x7fdd6a74a609 0x7fdd6a2b3103
2021-05-14T15:44:44.734-0700 7fdd6a0a9f00 -1 Falling back to public interface
2021-05-14T15:44:45.110-0700 7fdd6a0a9f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBc/Z5ga0XQEhAAI4QNJ2ryUi0Z5ZvXeLybYg== --osd-uuid a9a87a6c-bacb-4ecf-8042-0a2fa296fea4 
2021-05-14T15:44:45.162-0700 7ff98a719f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:44:45.182-0700 7ff98a719f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:44:45.186-0700 7ff98a719f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55fa17d64000 @  0x7ff98b0e2680 0x7ff98b103824 0x55fa0cef2447 0x55fa0cefa4b5 0x55fa0cef29c8 0x55fa0cef2b37 0x55fa0cef3ee4 0x55fa0ccc4ca1 0x55fa0ce9c423 0x55fa0ccb52a7 0x55fa0ccba53a 0x7ff98ac35d84 0x7ff98adba609 0x7ff98a923103
2021-05-14T15:44:45.634-0700 7ff98a719f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55ac80204000 @  0x7f3676db3680 0x7f3676dd4824 0x55ac743ff447 0x55ac744074b5 0x55ac743ff9c8 0x55ac743ffb37 0x55ac74400ee4 0x55ac741d1ca1 0x55ac743a9423 0x55ac741c22a7 0x55ac741c753a 0x7f3676906d84 0x7f3676a8b609 0x7f36765f4103
2021-05-14T15:44:46.550-0700 7f36763eaf00 -1 Falling back to public interface
2021-05-14T15:44:46.914-0700 7f36763eaf00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:44:50,666991258-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:44:50,686230933-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:44:50,768315514-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:44:50,774669323-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:44:52.487+0000 ffffb2a021e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:44:53.331+0000 ffffb17a01e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T15:44:54,868426850-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:44:54,874778619-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:44:56.563+0000 ffff90bd61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:44:57.416+0000 ffff90bd61e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T15:44:58,843887859-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:44:58,850132360-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:00.712+0000 ffff9a85d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:01.536+0000 ffff9a85d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T15:45:02,897334240-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:02,903627710-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:04.561+0000 ffff7782f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:05.405+0000 ffff765cd1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:08.533+0000 ffff9d22c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:09.342+0000 ffff9d22c1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T15:45:10,857900679-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:10,864245862-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:12.550+0000 ffffa3b671e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:13.418+0000 ffffa3b671e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T15:45:15,893316125-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:15,899658097-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:17.607+0000 ffff85aa81e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:18.439+0000 ffff85aa81e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T15:45:20,685382926-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:20,691521224-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:22.380+0000 ffff97c861e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:23.220+0000 ffff97c861e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T15:45:24,943389755-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:24,949554803-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:26.632+0000 ffff872c91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:27.465+0000 ffff872c91e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:45:29,313485180-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:29,319491546-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:31.217+0000 ffffa68231e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:32.041+0000 ffffa68231e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:45:33,673292345-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:33,679616180-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:35.478+0000 ffff8b38d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:36.338+0000 ffff8b38d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T15:45:38,122047375-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:38,128209017-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:39.791+0000 ffffa57b01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:40.611+0000 ffff9ffff1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 23 lfor 0/0/23 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T15:45:41,971654582-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:45:41,977987913-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:45:43.655+0000 ffffaec171e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:45:44.504+0000 ffffaec171e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.06   89      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.95   90      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   62 KiB   0 B   0 B   0 B  100 GiB     0  0.99   80      up          osd.2  
                       TOTAL  300 GiB  188 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.95/1.06  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T15:45:45,812776701-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:09,932485595-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:19,108564933-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:28,240366452-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:37,564213582-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:46,854790078-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   248 KiB used, 300 GiB / 300 GiB avail
    pgs:     0.521% pgs not active
             191 active+clean
             1   activating
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:46,869475426-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:56,019853860-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:46:56,034135263-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:05,328706881-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:05,343055076-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:14,690996634-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:14,705508477-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:23,849566261-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:23,863829032-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:23,875177315-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:47:23,881922841-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:47:23,896805593-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3823903
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T15:47:23,909483598-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T15:47:23,949387772-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:47:23,955835033-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4096', '-O', '4096', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:47:25.749+0000 ffff8347f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:47:26.565+0000 ffff8347f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:47:26.565+0000 ffff8347f010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:47:26.581614+0000 Maintaining 256 concurrent writes of 4096 bytes to objects of size 4096 for up to 20 seconds or 0 objects
2021-05-14T22:47:26.581672+0000 Object prefix: benchmark_data_localhost.localdomain_7
2021-05-14T22:47:26.583907+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:47:26.583907+0000     0       0         0         0         0         0           -           0
2021-05-14T22:47:27.584066+0000     1     255     16182     15927   62.2114   62.2148   0.0369849   0.0154722
2021-05-14T22:47:28.584220+0000     2     255     30095     29840   58.2752   54.3477  0.00800328   0.0167783
2021-05-14T22:47:29.584478+0000     3     255     43137     42882   55.8272   50.9453   0.0013631    0.017563
2021-05-14T22:47:30.584646+0000     4     255     54860     54605   53.3167    45.793  0.00247538   0.0182873
2021-05-14T22:47:31.584802+0000     5     255     65900     65645    51.277    43.125  0.00196466   0.0190683
2021-05-14T22:47:32.584973+0000     6     255     77129     76874   50.0401   43.8633   0.0025574   0.0196868
2021-05-14T22:47:33.585126+0000     7     256     88732     88476   49.3649   45.3203  0.00781547   0.0200474
2021-05-14T22:47:34.585283+0000     8     255    101145    100890   49.2549   48.4922  0.00228445   0.0202027
2021-05-14T22:47:35.585430+0000     9     256    114112    113856   49.4089   50.6484   0.0409764   0.0201583
2021-05-14T22:47:36.585582+0000    10     255    126788    126533   49.4192   49.5195   0.0518218   0.0201391
2021-05-14T22:47:37.585743+0000    11     255    139373    139118   49.3949   49.1602    0.117843    0.020149
2021-05-14T22:47:38.585896+0000    12     255    150709    150454   48.9682   44.2812    0.107321   0.0203498
2021-05-14T22:47:39.586363+0000    13     255    162201    161946   48.6529   44.8906  0.00108587   0.0204876
2021-05-14T22:47:40.586531+0000    14     255    173162    172907   48.2355   42.8164  0.00284388   0.0206275
2021-05-14T22:47:41.586684+0000    15     255    184779    184524   48.0446   45.3789  0.00126314    0.020745
2021-05-14T22:47:42.586835+0000    16     256    193794    193538   47.2421   35.2109  0.00121914   0.0209063
2021-05-14T22:47:43.586985+0000    17     255    205587    205332   47.1728   46.0703      0.0139   0.0211373
2021-05-14T22:47:44.587144+0000    18     256    216392    216136   46.8963   42.2031  0.00149566   0.0212717
2021-05-14T22:47:45.587403+0000    19     256    228121    227865   46.8389   45.8164    0.041982   0.0212999
2021-05-14T22:47:46.587562+0000 min lat: 0.000744473 max lat: 0.434227 avg lat: 0.0212462
2021-05-14T22:47:46.587562+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:47:46.587562+0000    20     209    240013    239804   46.8284   46.6367   0.0108755   0.0212462
2021-05-14T22:47:47.587809+0000 Total time run:         20.1497
Total writes made:      240013
Write size:             4096
Object size:            4096
Bandwidth (MB/sec):     46.5293
Stddev Bandwidth:       5.39277
Max bandwidth (MB/sec): 62.2148
Min bandwidth (MB/sec): 35.2109
Average IOPS:           11911
Stddev IOPS:            1380.55
Max IOPS:               15927
Min IOPS:               9014
Average Latency(s):     0.0213814
Stddev Latency(s):      0.0429826
Max latency(s):         0.434227
Min latency(s):         0.000744473

[1;32mlocalhost.localdomain	[2021-05-14T15:47:48,230049805-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3823903


[1;33mlocalhost.localdomain	[2021-05-14T15:47:48,237498595-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:12,672740622-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 240.01k objects, 938 MiB
    usage:   1.8 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:12,687262509-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:22,183582477-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 240.01k objects, 938 MiB
    usage:   1.8 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:22,198229320-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:31,334629825-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 240.01k objects, 938 MiB
    usage:   1.8 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:31,349258500-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:40,488258946-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 240.01k objects, 938 MiB
    usage:   1.8 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:40,503049604-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:50,396408309-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 240.01k objects, 938 MiB
    usage:   1.8 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:50,411291084-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:50,422896613-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:48:50,429627398-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:48:50,444965154-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3827547
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T15:48:50,457975416-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T15:48:50,496220715-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:48:50,502544661-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b4332902-0f20-4bb1-8e33-462d3007c4e0', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b4332902-0f20-4bb1-8e33-462d3007c4e0 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.oAaH9F:/tmp/ceph-asok.oAaH9F -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:48:52.019+0000 ffffabc5c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:48:52.828+0000 ffffabc5c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:48:52.828+0000 ffffabc5c010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:48:52.852882+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:48:52.852882+0000     0       0         0         0         0         0           -           0
2021-05-14T22:48:53.853079+0000     1     255     30375     30120   117.617   117.656  0.00357537  0.00841007
2021-05-14T22:48:54.853266+0000     2     255     61992     61737   120.549   123.504   0.0200884  0.00823993
2021-05-14T22:48:55.853429+0000     3     256     88981     88725   115.501   105.422 0.000365177  0.00846859
2021-05-14T22:48:56.853613+0000     4     255    119860    119605   116.776   120.625  0.00826205  0.00853916
2021-05-14T22:48:57.853780+0000     5     256    148904    148648   116.107   113.449 0.000625906  0.00854154
2021-05-14T22:48:58.853947+0000     6     255    179845    179590   116.897   120.867  0.00415347  0.00853599
2021-05-14T22:48:59.854135+0000     7     256    206469    206213   115.051   103.996  0.00251272  0.00865652
2021-05-14T22:49:00.854308+0000     8     255    235917    235662   115.047   115.035   0.0156928  0.00867378
2021-05-14T22:49:01.854560+0000 Total time run:       8.13532
Total reads made:     240013
Read size:            4096
Object size:          4096
Bandwidth (MB/sec):   115.244
Average IOPS:         29502
Stddev IOPS:          1837.48
Max IOPS:             31617
Min IOPS:             26623
Average Latency(s):   0.0086628
Max latency(s):       0.137584
Min latency(s):       0.000272836

[1;32mlocalhost.localdomain	[2021-05-14T15:49:02,530594394-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3827547


[1;7;39;49m[2021-05-14T15:49:02,535301246-07:00][RUNNING][ROUND 5/1/40] object_size=4KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:49:02,542170129-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:49:02,558190847-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40771\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1700881\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 44286ab8-6349-4ae6-aa86-199b1956acce\nsetting min_mon_release = octopus\nepoch 0\nfsid 44286ab8-6349-4ae6-aa86-199b1956acce\nlast_changed 2021-05-14T15:49:23.113609-0700\ncreated 2021-05-14T15:49:23.113609-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40771/0,v1:10.10.1.2:40772/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1700881 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 1185d39b-23e9-47a2-9724-cce12a312c78\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 f0aa0e60-c9b8-4e3d-80af-f4ef37aaafe7\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 b0e63c6f-55c5-4d04-9d41-c40085848a17\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42771\n'
10.10.1.2: b'  w/ user/pass: admin / 80359ba1-62fb-4221-80a6-c0c8214fc03e\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 15:49:45 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40771
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1700881
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 44286ab8-6349-4ae6-aa86-199b1956acce
setting min_mon_release = octopus
epoch 0
fsid 44286ab8-6349-4ae6-aa86-199b1956acce
last_changed 2021-05-14T15:49:23.113609-0700
created 2021-05-14T15:49:23.113609-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40771/0,v1:10.10.1.2:40772/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1700881 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 1185d39b-23e9-47a2-9724-cce12a312c78
0
start osd.0
add osd1 f0aa0e60-c9b8-4e3d-80af-f4ef37aaafe7
1
start osd.1
add osd2 b0e63c6f-55c5-4d04-9d41-c40085848a17
2
start osd.2


restful urls: https://10.10.1.2:42771
  w/ user/pass: admin / 80359ba1-62fb-4221-80a6-c0c8214fc03e


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:49:05.188-0700 7f6272de91c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:49:05.188-0700 7f6272de91c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:49:05.208-0700 7fddd8ff51c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:49:05.208-0700 7fddd8ff51c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd ceph-mon still alive after 1 seconds
WARNING:  ceph-osd ceph-mon still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40771,v1:10.10.1.2:40772] --print /tmp/ceph_monmap.1700881 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1700881 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1700881 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42771 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x563759486000 @  0x7f88072c3680 0x7f88072e4824 0x7f8807a7f187 0x7f8807a87355 0x7f8807a7f708 0x7f8807a7f877 0x7f8807a80c24 0x7f8807a98ec1 0x7f8807a0b5f3 0x7f8807a6ce97 0x7f8807a74b1a 0x7f8807177d84 0x7f8807293609 0x7f8806e67103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.stMbCMlHVo 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 1185d39b-23e9-47a2-9724-cce12a312c78 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCA/p5g1pe0CBAAbmkK0FUBkI6YPvVdEc7ahg== --osd-uuid 1185d39b-23e9-47a2-9724-cce12a312c78 
2021-05-14T15:49:37.108-0700 7f7efd1fbf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:49:37.128-0700 7f7efd1fbf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:49:37.128-0700 7f7efd1fbf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x564465ec4000 @  0x7f7efdbc4680 0x7f7efdbe5824 0x56445a03a447 0x56445a0424b5 0x56445a03a9c8 0x56445a03ab37 0x56445a03bee4 0x564459e0cca1 0x564459fe4423 0x564459dfd2a7 0x564459e0253a 0x7f7efd717d84 0x7f7efd89c609 0x7f7efd405103
2021-05-14T15:49:37.588-0700 7f7efd1fbf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new f0aa0e60-c9b8-4e3d-80af-f4ef37aaafe7 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55c86e3a8000 @  0x7ff1712bd680 0x7ff1712de824 0x55c863ca3447 0x55c863cab4b5 0x55c863ca39c8 0x55c863ca3b37 0x55c863ca4ee4 0x55c863a75ca1 0x55c863c4d423 0x55c863a662a7 0x55c863a6b53a 0x7ff170e10d84 0x7ff170f95609 0x7ff170afe103
2021-05-14T15:49:38.428-0700 7ff1708f4f00 -1 Falling back to public interface
2021-05-14T15:49:38.816-0700 7ff1708f4f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCB/p5gfqKuOhAAscvRYY7TAmwIDp6QCiO+NA== --osd-uuid f0aa0e60-c9b8-4e3d-80af-f4ef37aaafe7 
2021-05-14T15:49:38.884-0700 7f832752ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:49:38.904-0700 7f832752ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:49:38.904-0700 7f832752ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5556cc882000 @  0x7f8327ef8680 0x7f8327f19824 0x5556c1315447 0x5556c131d4b5 0x5556c13159c8 0x5556c1315b37 0x5556c1316ee4 0x5556c10e7ca1 0x5556c12bf423 0x5556c10d82a7 0x5556c10dd53a 0x7f8327a4bd84 0x7f8327bd0609 0x7f8327739103
2021-05-14T15:49:39.364-0700 7f832752ff00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new b0e63c6f-55c5-4d04-9d41-c40085848a17 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55bd880a0000 @  0x7f8859e54680 0x7f8859e75824 0x55bd7cace447 0x55bd7cad64b5 0x55bd7cace9c8 0x55bd7caceb37 0x55bd7cacfee4 0x55bd7c8a0ca1 0x55bd7ca78423 0x55bd7c8912a7 0x55bd7c89653a 0x7f88599a7d84 0x7f8859b2c609 0x7f8859695103
2021-05-14T15:49:40.152-0700 7f885948bf00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCD/p5gPkGWKhAAO5hjnOAbrhKHxBTgJzIDsQ== --osd-uuid b0e63c6f-55c5-4d04-9d41-c40085848a17 
2021-05-14T15:49:40.588-0700 7f885948bf00 -1 osd.1 0 log_to_monitors {default=true}
2021-05-14T15:49:40.592-0700 7f7bbe3b4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:49:40.616-0700 7f7bbe3b4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:49:40.616-0700 7f7bbe3b4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55ec84d5c000 @  0x7f7bbed7d680 0x7f7bbed9e824 0x55ec79b3e447 0x55ec79b464b5 0x55ec79b3e9c8 0x55ec79b3eb37 0x55ec79b3fee4 0x55ec79910ca1 0x55ec79ae8423 0x55ec799012a7 0x55ec7990653a 0x7f7bbe8d0d84 0x7f7bbea55609 0x7f7bbe5be103
2021-05-14T15:49:41.080-0700 7f7bbe3b4f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55c897bb2000 @  0x7f492afd8680 0x7f492aff9824 0x55c88c642447 0x55c88c64a4b5 0x55c88c6429c8 0x55c88c642b37 0x55c88c643ee4 0x55c88c414ca1 0x55c88c5ec423 0x55c88c4052a7 0x55c88c40a53a 0x7f492ab2bd84 0x7f492acb0609 0x7f492a819103
2021-05-14T15:49:41.928-0700 7f492a60ff00 -1 Falling back to public interface
2021-05-14T15:49:42.308-0700 7f492a60ff00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:49:45,983480486-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:49:46,002519312-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:49:46,083196950-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:49:46,089570479-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:49:47.821+0000 ffffa948a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:49:48.661+0000 ffffa948a1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T15:49:50,104404291-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:49:50,111248180-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:49:51.918+0000 ffff9a4d01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:49:52.806+0000 ffff9926e1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T15:49:54,208097055-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:49:54,214430153-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:49:55.934+0000 ffffb17781e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:49:56.750+0000 ffffb17781e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T15:49:58,210473266-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:49:58,216709012-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:49:59.855+0000 ffff8e45d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:00.755+0000 ffff8e45d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:04.012+0000 ffff8e4861e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:04.820+0000 ffff8e4861e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T15:50:06,150643002-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:06,157144624-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:08.048+0000 ffff94fdd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:08.908+0000 ffff94fdd1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T15:50:11,686002724-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:11,692433744-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:13.337+0000 ffff827bb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:14.173+0000 ffff815591e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T15:50:15,991901998-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:15,998159963-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:18.026+0000 ffff958be1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:18.874+0000 ffff8ffff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T15:50:21,349691158-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:21,355957090-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:23.019+0000 ffff952ab1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:23.847+0000 ffff8ffff1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:50:26,042016993-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:26,048261727-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:27.940+0000 ffffb2cea1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:28.756+0000 ffffb2cea1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:50:31,354786189-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:31,361337860-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:33.021+0000 ffff934c41e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:33.877+0000 ffff922621e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T15:50:36,089861917-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:36,096099915-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:37.769+0000 ffff84ae51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:38.593+0000 ffff84ae51e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T15:50:39,863915883-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:50:39,870425082-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:50:41.726+0000 ffff7d40d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:50:42.562+0000 ffff7d40d1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   67 KiB   0 B   0 B   0 B  100 GiB     0  1.04  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.98  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.98  143      up          osd.2  
                       TOTAL  300 GiB  194 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.98/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T15:50:43,844659936-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:08,126535841-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:17,312937265-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:26,450891555-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:35,864510135-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:44,973933912-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:44,988942519-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:54,131732351-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:51:54,146518920-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:03,419499122-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:03,434407812-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:12,637768432-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:12,652889889-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:21,886150898-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:21,900929981-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:21,912239485-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:52:21,919143387-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:52:21,934560499-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3837890
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T15:52:21,947680601-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_write.log.5
[1;30mlocalhost.localdomain	[2021-05-14T15:52:21,987096401-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:52:21,993929235-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4096', '-O', '4096', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- rados bench 20 write --pool bench_rados -b 4096 -O 4096 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:52:23.647+0000 ffffb6999010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:52:24.479+0000 ffffb6999010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:52:24.479+0000 ffffb6999010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:52:24.498684+0000 Maintaining 256 concurrent writes of 4096 bytes to objects of size 4096 for up to 20 seconds or 0 objects
2021-05-14T22:52:24.498729+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T22:52:24.500952+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:52:24.500952+0000     0       0         0         0         0         0           -           0
2021-05-14T22:52:25.501129+0000     1     255     14144     13889   54.2502   54.2539   0.0742628   0.0180084
2021-05-14T22:52:26.501306+0000     2     255     29190     28935   56.5067   58.7734  0.00193743   0.0173703
2021-05-14T22:52:27.501483+0000     3     255     43738     43483   56.6105   56.8281  0.00235321   0.0173171
2021-05-14T22:52:28.501630+0000     4     255     58041     57786   56.4236   55.8711  0.00229342   0.0174313
2021-05-14T22:52:29.501778+0000     5     255     72357     72102   56.3216   55.9219  0.00131044   0.0174653
2021-05-14T22:52:30.501936+0000     6     255     86256     86001   55.9821    54.293  0.00286538    0.017618
2021-05-14T22:52:31.502118+0000     7     256    100004     99748   55.6545   53.6992   0.0042988   0.0178288
2021-05-14T22:52:32.502290+0000     8     255    111897    111642   54.5043   46.4609   0.0218569   0.0182943
2021-05-14T22:52:33.502486+0000     9     255    124990    124735   54.1299   51.1445  0.00216317   0.0182828
2021-05-14T22:52:34.502645+0000    10     256    136897    136641   53.3669   46.5078  0.00123223   0.0185599
2021-05-14T22:52:35.502834+0000    11     255    148334    148079   52.5764   44.6797  0.00398118   0.0189877
2021-05-14T22:52:36.502991+0000    12     256    161097    160841   52.3487   49.8516  0.00600633   0.0190163
2021-05-14T22:52:37.503160+0000    13     256    173153    172897   51.9438   47.0938  0.00262587   0.0191696
2021-05-14T22:52:38.503315+0000    14     255    185021    184766   51.5447   46.3633  0.00178281   0.0192998
2021-05-14T22:52:39.503471+0000    15     255    196805    196550   51.1767   46.0312   0.0111713   0.0194542
2021-05-14T22:52:40.503627+0000    16     255    208313    208058   50.7873   44.9531    0.014258   0.0195966
2021-05-14T22:52:41.503829+0000    17     255    220528    220273    50.606   47.7148  0.00154856    0.019653
2021-05-14T22:52:42.504004+0000    18     255    232009    231754   50.2856   44.8477  0.00838446   0.0198221
2021-05-14T22:52:43.504493+0000    19     255    245270    245015    50.364   51.8008  0.00213438   0.0197559
2021-05-14T22:52:44.504670+0000 min lat: 0.000719087 max lat: 0.297086 avg lat: 0.0198418
2021-05-14T22:52:44.504670+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:52:44.504670+0000    20     215    257402    257187   50.2228   47.5469   0.0280582   0.0198418
2021-05-14T22:52:45.504904+0000 Total time run:         20.0933
Total writes made:      257402
Write size:             4096
Object size:            4096
Bandwidth (MB/sec):     50.0404
Stddev Bandwidth:       4.59147
Max bandwidth (MB/sec): 58.7734
Min bandwidth (MB/sec): 44.6797
Average IOPS:           12810
Stddev IOPS:            1175.42
Max IOPS:               15046
Min IOPS:               11438
Average Latency(s):     0.019921
Stddev Latency(s):      0.0447694
Max latency(s):         0.297086
Min latency(s):         0.000719087

[1;32mlocalhost.localdomain	[2021-05-14T15:52:46,171515331-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3837890


[1;33mlocalhost.localdomain	[2021-05-14T15:52:46,179039933-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:10,258863969-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 257.40k objects, 1005 MiB
    usage:   2.0 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:10,273642018-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:19,655079399-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 257.40k objects, 1005 MiB
    usage:   2.0 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:19,670798844-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:29,121408293-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 257.40k objects, 1005 MiB
    usage:   2.0 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:29,136214788-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:38,314921025-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 257.40k objects, 1005 MiB
    usage:   2.0 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:38,329935921-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:47,470377278-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 257.40k objects, 1005 MiB
    usage:   2.0 GiB used, 298 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:47,485320972-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:47,496439180-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:53:47,503411990-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:53:47,519520196-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3841464
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4KB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T15:53:47,532788315-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4KB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T15:53:47,570948016-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:53:47,577330476-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 66b6ae1c-037a-4a30-a4c8-cf6ae25cf41b --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.NbJpVo:/tmp/ceph-asok.NbJpVo -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:53:49.210+0000 ffff9d3c9010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:53:50.038+0000 ffff9d3c9010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:53:50.038+0000 ffff9d3c9010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:53:50.062218+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:53:50.062218+0000     0       0         0         0         0         0           -           0
2021-05-14T22:53:51.062370+0000     1     256     31283     31027   121.165   121.199  0.00609429  0.00818009
2021-05-14T22:53:52.062563+0000     2     255     63723     63468   123.931   126.723  0.00546952  0.00802973
2021-05-14T22:53:53.062734+0000     3     255     96573     96318   125.387    128.32   0.0246224  0.00793184
2021-05-14T22:53:54.062899+0000     4     255    128089    127834   124.813   123.109  0.00951133  0.00798841
2021-05-14T22:53:55.063175+0000     5     255    159827    159572   124.639   123.977  0.00243548  0.00800081
2021-05-14T22:53:56.063352+0000     6     256    191783    191527   124.666   124.824  0.00367676  0.00800193
2021-05-14T22:53:57.063519+0000     7     255    223820    223565   124.732   125.148  0.00497381  0.00799988
2021-05-14T22:53:58.063680+0000     8     256    256531    256275   125.109   127.773 0.000305017   0.0079704
2021-05-14T22:53:59.063891+0000 Total time run:       8.04069
Total reads made:     257402
Read size:            4096
Object size:          4096
Bandwidth (MB/sec):   125.049
Average IOPS:         32012
Stddev IOPS:          616.989
Max IOPS:             32850
Min IOPS:             31027
Average Latency(s):   0.00797887
Max latency(s):       0.0390139
Min latency(s):       0.000272356

[1;32mlocalhost.localdomain	[2021-05-14T15:53:59,721237551-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3841464


[1;7;39;49m[2021-05-14T15:53:59,731542231-07:00][RUNNING][ROUND 1/2/40] object_size=16KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:53:59,740760367-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:53:59,758722559-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40597\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1704285\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 9981abb9-7572-49e6-974b-189415aff93a\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 9981abb9-7572-49e6-974b-189415aff93a\nlast_changed 2021-05-14T15:54:27.748664-0700\ncreated 2021-05-14T15:54:27.748664-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40597/0,v1:10.10.1.2:40598/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1704285 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 c02b0537-0fac-4e54-91d4-8b9e5042d32b\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 7bf05267-b731-4796-a6a8-adb2560ecbb5\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 464aca47-9d43-4048-b9d1-8c38584de427\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42597\n'
10.10.1.2: b'  w/ user/pass: admin / 417cbdba-6e9d-4cd4-965f-06f795f95ffb\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 15:54:52 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40597
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1704285
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 9981abb9-7572-49e6-974b-189415aff93a
setting min_mon_release = octopus
epoch 0
fsid 9981abb9-7572-49e6-974b-189415aff93a
last_changed 2021-05-14T15:54:27.748664-0700
created 2021-05-14T15:54:27.748664-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40597/0,v1:10.10.1.2:40598/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1704285 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 c02b0537-0fac-4e54-91d4-8b9e5042d32b
0
start osd.0
add osd1 7bf05267-b731-4796-a6a8-adb2560ecbb5
1
start osd.1
add osd2 464aca47-9d43-4048-b9d1-8c38584de427
2
start osd.2


restful urls: https://10.10.1.2:42597
  w/ user/pass: admin / 417cbdba-6e9d-4cd4-965f-06f795f95ffb


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:54:02.091-0700 7f4491c2f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:54:02.091-0700 7f4491c2f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:54:02.111-0700 7eff2cd301c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:54:02.111-0700 7eff2cd301c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40597,v1:10.10.1.2:40598] --print /tmp/ceph_monmap.1704285 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1704285 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1704285 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42597 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x559dc882c000 @  0x7f9e32d67680 0x7f9e32d88824 0x7f9e33523187 0x7f9e3352b355 0x7f9e33523708 0x7f9e33523877 0x7f9e33524c24 0x7f9e3353cec1 0x7f9e334af5f3 0x7f9e33510e97 0x7f9e33518b1a 0x7f9e32c1bd84 0x7f9e32d37609 0x7f9e3290b103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.qReMVR0KoR 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new c02b0537-0fac-4e54-91d4-8b9e5042d32b -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCy/55g/467EBAAbFZRgJv8wF8iiWuD/8TIEA== --osd-uuid c02b0537-0fac-4e54-91d4-8b9e5042d32b 
2021-05-14T15:54:43.155-0700 7fc91158cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:54:43.175-0700 7fc91158cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:54:43.175-0700 7fc91158cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x564d367ae000 @  0x7fc911f55680 0x7fc911f76824 0x564d2a951447 0x564d2a9594b5 0x564d2a9519c8 0x564d2a951b37 0x564d2a952ee4 0x564d2a723ca1 0x564d2a8fb423 0x564d2a7142a7 0x564d2a71953a 0x7fc911aa8d84 0x7fc911c2d609 0x7fc911796103
2021-05-14T15:54:43.651-0700 7fc91158cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7bf05267-b731-4796-a6a8-adb2560ecbb5 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x559c80356000 @  0x7faabd2c9680 0x7faabd2ea824 0x559c74522447 0x559c7452a4b5 0x559c745229c8 0x559c74522b37 0x559c74523ee4 0x559c742f4ca1 0x559c744cc423 0x559c742e52a7 0x559c742ea53a 0x7faabce1cd84 0x7faabcfa1609 0x7faabcb0a103
2021-05-14T15:54:44.543-0700 7faabc900f00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQC0/55gwfjYBBAA23WY6/uvyb7sSD5m40AMOw== --osd-uuid 7bf05267-b731-4796-a6a8-adb2560ecbb5 
2021-05-14T15:54:44.963-0700 7fd4948f7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:54:44.967-0700 7faabc900f00 -1 osd.0 0 log_to_monitors {default=true}
2021-05-14T15:54:44.983-0700 7fd4948f7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:54:44.983-0700 7fd4948f7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x555f86168000 @  0x7fd4952c0680 0x7fd4952e1824 0x555f7a42d447 0x555f7a4354b5 0x555f7a42d9c8 0x555f7a42db37 0x555f7a42eee4 0x555f7a1ffca1 0x555f7a3d7423 0x555f7a1f02a7 0x555f7a1f553a 0x7fd494e13d84 0x7fd494f98609 0x7fd494b01103
2021-05-14T15:54:45.415-0700 7fd4948f7f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 464aca47-9d43-4048-b9d1-8c38584de427 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56277fd1a000 @  0x7f7ee05af680 0x7f7ee05d0824 0x562774549447 0x5627745514b5 0x5627745499c8 0x562774549b37 0x56277454aee4 0x56277431bca1 0x5627744f3423 0x56277430c2a7 0x56277431153a 0x7f7ee0102d84 0x7f7ee0287609 0x7f7edfdf0103
2021-05-14T15:54:46.227-0700 7f7edfbe6f00 -1 Falling back to public interface
2021-05-14T15:54:46.595-0700 7f7edfbe6f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQC1/55gGwYwMBAAWmz/osqDY4l2oVSGv5hF/g== --osd-uuid 464aca47-9d43-4048-b9d1-8c38584de427 
2021-05-14T15:54:46.647-0700 7f005ca78f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:54:46.667-0700 7f005ca78f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:54:46.667-0700 7f005ca78f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5595639f8000 @  0x7f005d441680 0x7f005d462824 0x559559a4e447 0x559559a564b5 0x559559a4e9c8 0x559559a4eb37 0x559559a4fee4 0x559559820ca1 0x5595599f8423 0x5595598112a7 0x55955981653a 0x7f005cf94d84 0x7f005d119609 0x7f005cc82103
2021-05-14T15:54:47.111-0700 7f005ca78f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55e5c675e000 @  0x7f90fdbb5680 0x7f90fdbd6824 0x55e5bc392447 0x55e5bc39a4b5 0x55e5bc3929c8 0x55e5bc392b37 0x55e5bc393ee4 0x55e5bc164ca1 0x55e5bc33c423 0x55e5bc1552a7 0x55e5bc15a53a 0x7f90fd708d84 0x7f90fd88d609 0x7f90fd3f6103
2021-05-14T15:54:47.943-0700 7f90fd1ecf00 -1 Falling back to public interface
2021-05-14T15:54:48.311-0700 7f90fd1ecf00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:54:52,071216481-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:54:52,090201787-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:54:52,173802745-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:54:52,180055853-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:54:54.117+0000 ffffb42b41e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:54:54.953+0000 ffffb42b41e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T15:54:56,359507757-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:54:56,365687262-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:54:58.226+0000 ffffa82d31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:54:59.066+0000 ffffa82d31e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T15:55:00,503641625-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:00,510168755-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:02.322+0000 ffff9194e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:03.146+0000 ffff9194e1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T15:55:04,549516420-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:04,555794312-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:06.235+0000 ffffb34b11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:07.079+0000 ffffb34b11e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:10.136+0000 ffff80a761e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:10.984+0000 ffff80a761e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T15:55:12,439951907-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:12,446429663-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:14.124+0000 ffff987ad1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:15.012+0000 ffff987ad1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T15:55:16,704088841-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:16,710292921-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:18.513+0000 ffff92cbf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:19.333+0000 ffff91a5d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T15:55:21,457291083-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:21,463624139-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:23.106+0000 ffffb2dfb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:23.958+0000 ffffb2dfb1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T15:55:25,738436456-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:25,744908811-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:27.459+0000 ffffa72dc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:28.287+0000 ffffa72dc1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:55:30,763044727-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:30,770564561-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:32.571+0000 ffff8c11f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:33.396+0000 ffff8c11f1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T15:55:35,950015341-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:35,956321603-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:37.588+0000 ffff83bd71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:38.444+0000 ffff83bd71e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T15:55:40,728392692-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:40,734831907-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:42.449+0000 ffffb2d0d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:43.269+0000 ffffb2d0d1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T15:55:44,761190635-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:55:44,767321352-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:55:46.562+0000 ffffa72bf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:55:47.394+0000 ffffa72bf1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  190 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T15:55:48,741510859-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:12,808749032-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:22,013217488-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:31,098557751-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:40,500431295-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:49,632331643-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:49,647489021-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:58,834818542-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:56:58,849980631-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:08,130694042-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:08,148901304-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:17,275366541-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:17,290603448-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:26,431072537-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:26,445783019-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:26,457714699-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:57:26,464808101-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:57:26,480435540-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3852010
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T15:57:26,493542654-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T15:57:26,532702961-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:57:26,539084027-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16384', '-O', '16384', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:57:27.995+0000 ffffb534e010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:57:28.831+0000 ffffb534e010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:57:28.831+0000 ffffb534e010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:57:28.852207+0000 Maintaining 256 concurrent writes of 16384 bytes to objects of size 16384 for up to 20 seconds or 0 objects
2021-05-14T22:57:28.852257+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T22:57:28.856641+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:57:28.856641+0000     0       0         0         0         0         0           -           0
2021-05-14T22:57:29.856837+0000     1     256     16209     15953    249.24   249.266  0.00154325   0.0152963
2021-05-14T22:57:30.856988+0000     2     255     29166     28911   225.839   202.469  0.00133682   0.0171468
2021-05-14T22:57:31.857146+0000     3     255     41003     40748     212.2   184.953  0.00233695   0.0181776
2021-05-14T22:57:32.857313+0000     4     255     52591     52336   204.408   181.062  0.00288279     0.01905
2021-05-14T22:57:33.857469+0000     5     255     63903     63648   198.871    176.75  0.00644472   0.0196744
2021-05-14T22:57:34.857634+0000     6     255     75148     74893   195.005   175.703  0.00235402   0.0203069
2021-05-14T22:57:35.857848+0000     7     255     86390     86135   192.235   175.656  0.00189793   0.0206067
2021-05-14T22:57:36.858002+0000     8     255     97160     96905   189.238   168.281  0.00388301   0.0208762
2021-05-14T22:57:37.858153+0000     9     255    107452    107197   186.077   160.812  0.00122296   0.0211871
2021-05-14T22:57:38.858311+0000    10     256    117643    117387   183.388   159.219  0.00665422   0.0216459
2021-05-14T22:57:39.858478+0000    11     255    128199    127944    181.71   164.953   0.0277028   0.0218912
2021-05-14T22:57:40.858644+0000    12     256    138708    138452   180.247   164.188  0.00132873   0.0220037
2021-05-14T22:57:41.858842+0000    13     255    148670    148415   178.355   155.672  0.00165531    0.022273
2021-05-14T22:57:42.858997+0000    14     255    158951    158696   177.087   160.641  0.00394987   0.0224032
2021-05-14T22:57:43.859158+0000    15     255    168893    168638   175.636   155.344  0.00171467   0.0226152
2021-05-14T22:57:44.859313+0000    16     255    178152    177897     173.7   144.672  0.00462869   0.0228532
2021-05-14T22:57:45.859496+0000    17     256    188492    188236   172.983   161.547   0.0110303   0.0230338
2021-05-14T22:57:46.859657+0000    18     256    199416    199160   172.854   170.688   0.0604881   0.0230792
2021-05-14T22:57:47.859827+0000    19     255    210795    210540   173.113   177.812  0.00614955    0.023034
2021-05-14T22:57:48.859969+0000 min lat: 0.000791115 max lat: 0.29916 avg lat: 0.023035
2021-05-14T22:57:48.859969+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:57:48.859969+0000    20     219    222037    221818   173.267   176.219   0.0886083    0.023035
2021-05-14T22:57:49.860211+0000 Total time run:         20.0755
Total writes made:      222037
Write size:             16384
Object size:            16384
Bandwidth (MB/sec):     172.814
Stddev Bandwidth:       21.9567
Max bandwidth (MB/sec): 249.266
Min bandwidth (MB/sec): 144.672
Average IOPS:           11060
Stddev IOPS:            1405.23
Max IOPS:               15953
Min IOPS:               9259
Average Latency(s):     0.0230852
Stddev Latency(s):      0.0551407
Max latency(s):         0.29916
Min latency(s):         0.000791115

[1;32mlocalhost.localdomain	[2021-05-14T15:57:50,643330740-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3852010


[1;33mlocalhost.localdomain	[2021-05-14T15:57:50,650573342-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:14,755068003-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 222.04k objects, 3.4 GiB
    usage:   6.8 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:14,769784652-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:24,157637090-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 222.04k objects, 3.4 GiB
    usage:   6.8 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:24,172729884-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:33,279089042-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 222.04k objects, 3.4 GiB
    usage:   6.8 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:33,293977786-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:42,526874849-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 222.04k objects, 3.4 GiB
    usage:   6.8 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:42,543897496-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:51,754255407-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 222.04k objects, 3.4 GiB
    usage:   6.8 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:51,768860152-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:51,780731778-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:58:51,788000800-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T15:58:51,804271339-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3855559
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T15:58:51,817288950-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T15:58:51,855818942-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:58:51,862439794-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 266ea7f9-7cc3-40c5-b5fa-51ad10c8e8bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.tl9Isx:/tmp/ceph-asok.tl9Isx -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:58:53.554+0000 ffff90841010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:58:54.366+0000 ffff90841010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:58:54.366+0000 ffff90841010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T22:58:54.386691+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T22:58:54.386691+0000     0      12        12         0         0         0           -           0
2021-05-14T22:58:55.386892+0000     1     255     27167     26912   420.179     420.5  0.00923142   0.0094358
2021-05-14T22:58:56.387123+0000     2     255     54571     54316   424.133   428.188  0.00318908  0.00937053
2021-05-14T22:58:57.387333+0000     3     255     82436     82181   427.854   435.391  0.00642531  0.00931052
2021-05-14T22:58:58.387560+0000     4     255    110843    110588    431.83   443.859  0.00340537  0.00922595
2021-05-14T22:58:59.387766+0000     5     255    138050    137795   430.468   425.109  0.00634454  0.00926592
2021-05-14T22:59:00.387951+0000     6     256    164959    164703   428.784   420.438  0.00055598  0.00929378
2021-05-14T22:59:01.388139+0000     7     256    192145    191889   428.201   424.781   0.0148106  0.00932015
2021-05-14T22:59:02.388342+0000     8     255    219501    219246   428.096   427.453 0.000785999   0.0093158
2021-05-14T22:59:03.388591+0000 Total time run:       8.10645
Total reads made:     222037
Read size:            16384
Object size:          16384
Bandwidth (MB/sec):   427.971
Average IOPS:         27390
Stddev IOPS:          506.406
Max IOPS:             28407
Min IOPS:             26908
Average Latency(s):   0.00932603
Max latency(s):       0.0394179
Min latency(s):       0.000303621

[1;32mlocalhost.localdomain	[2021-05-14T15:59:04,035526132-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3855559


[1;7;39;49m[2021-05-14T15:59:04,040400192-07:00][RUNNING][ROUND 2/2/40] object_size=16KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T15:59:04,047296116-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T15:59:04,063361885-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40020\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1707832\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e0009e37-f5b1-4cb6-8cdf-5f6eaf7e76f7\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid e0009e37-f5b1-4cb6-8cdf-5f6eaf7e76f7\nlast_changed 2021-05-14T15:59:34.241903-0700\ncreated 2021-05-14T15:59:34.241903-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40020/0,v1:10.10.1.2:40021/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1707832 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 80812201-9a2f-4a23-9929-442453c41304\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 3a48af8c-477a-4f52-a451-d4571004693f\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 b0c17623-d2c2-4f29-b5af-96564f8770ba\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42020\n'
10.10.1.2: b'  w/ user/pass: admin / fd4aa5ed-2f00-4dfd-8b02-3689651be2bf\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 15:59:56 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40020
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1707832
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e0009e37-f5b1-4cb6-8cdf-5f6eaf7e76f7
setting min_mon_release = octopus
epoch 0
fsid e0009e37-f5b1-4cb6-8cdf-5f6eaf7e76f7
last_changed 2021-05-14T15:59:34.241903-0700
created 2021-05-14T15:59:34.241903-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40020/0,v1:10.10.1.2:40021/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1707832 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 80812201-9a2f-4a23-9929-442453c41304
0
start osd.0
add osd1 3a48af8c-477a-4f52-a451-d4571004693f
1
start osd.1
add osd2 b0c17623-d2c2-4f29-b5af-96564f8770ba
2
start osd.2


restful urls: https://10.10.1.2:42020
  w/ user/pass: admin / fd4aa5ed-2f00-4dfd-8b02-3689651be2bf


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T15:59:06.229-0700 7f538dbc21c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:59:06.229-0700 7f538dbc21c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:59:06.245-0700 7f1f9f5901c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T15:59:06.245-0700 7f1f9f5901c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40020,v1:10.10.1.2:40021] --print /tmp/ceph_monmap.1707832 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1707832 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1707832 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42020 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x555d3758c000 @  0x7fbbe5f47680 0x7fbbe5f68824 0x7fbbe6703187 0x7fbbe670b355 0x7fbbe6703708 0x7fbbe6703877 0x7fbbe6704c24 0x7fbbe671cec1 0x7fbbe668f5f3 0x7fbbe66f0e97 0x7fbbe66f8b1a 0x7fbbe5dfbd84 0x7fbbe5f17609 0x7fbbe5aeb103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.W96hTh2BMO 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 80812201-9a2f-4a23-9929-442453c41304 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDjAJ9gWUjyDBAA1wCPftMk/deBgRV8oD4sHw== --osd-uuid 80812201-9a2f-4a23-9929-442453c41304 
2021-05-14T15:59:48.074-0700 7feaeba60f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:59:48.094-0700 7feaeba60f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T15:59:48.094-0700 7feaeba60f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5556b7a6c000 @  0x7feaec429680 0x7feaec44a824 0x5556ac650447 0x5556ac6584b5 0x5556ac6509c8 0x5556ac650b37 0x5556ac651ee4 0x5556ac422ca1 0x5556ac5fa423 0x5556ac4132a7 0x5556ac41853a 0x7feaebf7cd84 0x7feaec101609 0x7feaebc6a103
2021-05-14T15:59:48.550-0700 7feaeba60f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 3a48af8c-477a-4f52-a451-d4571004693f -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5621ba892000 @  0x7f3ae1b9c680 0x7f3ae1bbd824 0x5621afebb447 0x5621afec34b5 0x5621afebb9c8 0x5621afebbb37 0x5621afebcee4 0x5621afc8dca1 0x5621afe65423 0x5621afc7e2a7 0x5621afc8353a 0x7f3ae16efd84 0x7f3ae1874609 0x7f3ae13dd103
2021-05-14T15:59:49.358-0700 7f3ae11d3f00 -1 Falling back to public interface
2021-05-14T15:59:49.758-0700 7f3ae11d3f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDkAJ9gcL2lNRAAfKPzSqm95jEf56CjSpaPwA== --osd-uuid 3a48af8c-477a-4f52-a451-d4571004693f 
2021-05-14T15:59:49.794-0700 7f438a7c9f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:59:49.814-0700 7f438a7c9f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T15:59:49.814-0700 7f438a7c9f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x561f5c8f2000 @  0x7f438b192680 0x7f438b1b3824 0x561f524d2447 0x561f524da4b5 0x561f524d29c8 0x561f524d2b37 0x561f524d3ee4 0x561f522a4ca1 0x561f5247c423 0x561f522952a7 0x561f5229a53a 0x7f438ace5d84 0x7f438ae6a609 0x7f438a9d3103
2021-05-14T15:59:50.254-0700 7f438a7c9f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new b0c17623-d2c2-4f29-b5af-96564f8770ba -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x558209aca000 @  0x7fb2d2e57680 0x7fb2d2e78824 0x5581feeb5447 0x5581feebd4b5 0x5581feeb59c8 0x5581feeb5b37 0x5581feeb6ee4 0x5581fec87ca1 0x5581fee5f423 0x5581fec782a7 0x5581fec7d53a 0x7fb2d29aad84 0x7fb2d2b2f609 0x7fb2d2698103
2021-05-14T15:59:51.062-0700 7fb2d248ef00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDmAJ9gg+NpJhAA3u3DwP1PBF2JbEYypyZttw== --osd-uuid b0c17623-d2c2-4f29-b5af-96564f8770ba 
2021-05-14T15:59:51.450-0700 7fb2d248ef00 -1 osd.1 0 log_to_monitors {default=true}
2021-05-14T15:59:51.462-0700 7f0698b5af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:59:51.486-0700 7f0698b5af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T15:59:51.486-0700 7f0698b5af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5601d00de000 @  0x7f0699523680 0x7f0699544824 0x5601c4bd4447 0x5601c4bdc4b5 0x5601c4bd49c8 0x5601c4bd4b37 0x5601c4bd5ee4 0x5601c49a6ca1 0x5601c4b7e423 0x5601c49972a7 0x5601c499c53a 0x7f0699076d84 0x7f06991fb609 0x7f0698d64103
2021-05-14T15:59:51.918-0700 7f0698b5af00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d721e7c000 @  0x7f2c609ce680 0x7f2c609ef824 0x55d717e48447 0x55d717e504b5 0x55d717e489c8 0x55d717e48b37 0x55d717e49ee4 0x55d717c1aca1 0x55d717df2423 0x55d717c0b2a7 0x55d717c1053a 0x7f2c60521d84 0x7f2c606a6609 0x7f2c6020f103
2021-05-14T15:59:52.714-0700 7f2c60005f00 -1 Falling back to public interface
2021-05-14T15:59:53.066-0700 7f2c60005f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T15:59:56,903755130-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T15:59:56,923255180-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T15:59:57,006775388-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T15:59:57,013104111-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T22:59:58.721+0000 ffff88b361e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T22:59:59.553+0000 ffff88b361e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:00:00,955681569-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:00,962148615-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:02.601+0000 ffff8c2831e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:03.461+0000 ffff8c2831e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:00:04,916264908-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:04,922446411-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:06.562+0000 ffff854e41e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:07.398+0000 ffff854e41e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:00:08,747466201-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:08,753864190-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:10.703+0000 ffffa88f31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:11.551+0000 ffffa88f31e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:14.607+0000 ffffa79f01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:15.424+0000 ffffa79f01e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:00:16,996081309-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:17,002456855-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:18.700+0000 ffffa4d3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:19.560+0000 ffffa4d3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:00:21,415730584-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:21,421885411-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:23.221+0000 ffff7a69a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:24.057+0000 ffff7a69a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:00:26,008287716-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:26,014485361-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:27.718+0000 ffffabae81e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:28.534+0000 ffffabae81e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:00:30,312814646-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:30,319638828-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:31.982+0000 ffff887a71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:32.826+0000 ffff887a71e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:00:34,861484788-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:34,867767347-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:36.647+0000 ffff9dec31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:37.487+0000 ffff9dec31e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:00:39,389939721-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:39,396147163-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:41.248+0000 ffff798a61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:42.092+0000 ffff798a61e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:00:43,634530853-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:43,640743291-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:45.329+0000 ffffa7f181e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:46.165+0000 ffffa7f181e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:00:47,582978979-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:00:47,589336582-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:00:49.385+0000 ffffa18811e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:00:50.229+0000 ffffa18811e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  184 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  184 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.08   90      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   55 KiB   0 B   0 B   0 B  100 GiB     0  0.90   89      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.03   80      up          osd.2  
                       TOTAL  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.90/1.08  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:00:51,538508921-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:01:15,697716647-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:01:24,832875704-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:01:34,148652987-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:01:43,262999490-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:01:52,381729787-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:01:52,397346426-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:02,070603904-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:02,086120867-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:11,339451606-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:11,354957197-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:20,524153577-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:20,539328271-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:29,682599410-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:29,698005324-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:29,710371826-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:02:29,717635388-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:02:29,733685167-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3866062
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T16:02:29,747235430-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_write.log.2
[1;30mlocalhost.localdomain	[2021-05-14T16:02:29,786533289-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:02:29,793214452-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16384', '-O', '16384', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:02:31.311+0000 ffffbccb2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:02:32.131+0000 ffffbccb2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:02:32.131+0000 ffffbccb2010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:02:32.151289+0000 Maintaining 256 concurrent writes of 16384 bytes to objects of size 16384 for up to 20 seconds or 0 objects
2021-05-14T23:02:32.151347+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:02:32.155906+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:02:32.155906+0000     0       0         0         0         0         0           -           0
2021-05-14T23:02:33.156076+0000     1     255     14816     14561   227.504   227.516  0.00210361   0.0166743
2021-05-14T23:02:34.156238+0000     2     255     27852     27597   215.579   203.688   0.0366879   0.0180213
2021-05-14T23:02:35.156407+0000     3     255     40383     40128   208.974   195.797  0.00225248   0.0187416
2021-05-14T23:02:36.156571+0000     4     256     51820     51564   201.394   178.688  0.00310394   0.0193703
2021-05-14T23:02:37.156748+0000     5     255     62590     62335   194.769   168.297  0.00221661   0.0201348
2021-05-14T23:02:38.156930+0000     6     256     72930     72674   189.227   161.547  0.00135664    0.020762
2021-05-14T23:02:39.157088+0000     7     255     83638     83383   186.095   167.328  0.00203151   0.0212156
2021-05-14T23:02:40.157257+0000     8     255     94446     94191   183.938   168.875  0.00271495   0.0214793
2021-05-14T23:02:41.157413+0000     9     256    105292    105036   182.326   169.453  0.00286571   0.0217454
2021-05-14T23:02:42.157580+0000    10     255    116022    115767   180.858   167.672  0.00155075   0.0219112
2021-05-14T23:02:43.157771+0000    11     256    127101    126845   180.149   173.094  0.00214265   0.0220204
2021-05-14T23:02:44.157934+0000    12     255    136960    136705   177.973   154.062  0.00367254   0.0223625
2021-05-14T23:02:45.158089+0000    13     255    147498    147243   176.947   164.656  0.00162061    0.022479
2021-05-14T23:02:46.158244+0000    14     256    158217    157961   176.268   167.469   0.0153779   0.0225436
2021-05-14T23:02:47.158401+0000    15     256    168892    168636   175.635   166.797  0.00137075   0.0226724
2021-05-14T23:02:48.158549+0000    16     256    178944    178688   174.472   157.062   0.0024583    0.022772
2021-05-14T23:02:49.158705+0000    17     256    189366    189110   173.787   162.844  0.00101662   0.0229039
2021-05-14T23:02:50.158864+0000    18     256    199938    199682   173.308   165.188  0.00202006   0.0230269
2021-05-14T23:02:51.159016+0000    19     255    211074    210819   173.344   174.016   0.0848496   0.0230315
2021-05-14T23:02:52.159177+0000 min lat: 0.000828546 max lat: 0.335222 avg lat: 0.0231373
2021-05-14T23:02:52.159177+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:02:52.159177+0000    20     208    220666    220458   172.206   150.609  0.00781573   0.0231373
2021-05-14T23:02:53.159434+0000 Total time run:         20.0844
Total writes made:      220666
Write size:             16384
Object size:            16384
Bandwidth (MB/sec):     171.67
Stddev Bandwidth:       17.9404
Max bandwidth (MB/sec): 227.516
Min bandwidth (MB/sec): 150.609
Average IOPS:           10986
Stddev IOPS:            1148.18
Max IOPS:               14561
Min IOPS:               9639
Average Latency(s):     0.0232304
Stddev Latency(s):      0.0530234
Max latency(s):         0.335222
Min latency(s):         0.000828546

[1;32mlocalhost.localdomain	[2021-05-14T16:02:53,822097142-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3866062


[1;33mlocalhost.localdomain	[2021-05-14T16:02:53,829680064-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:18,068527563-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 220.67k objects, 3.4 GiB
    usage:   6.7 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:18,083745331-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:27,509585253-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 220.67k objects, 3.4 GiB
    usage:   6.7 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:27,524918180-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:36,535849841-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 220.67k objects, 3.4 GiB
    usage:   6.7 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:36,551311490-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:45,758284379-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 220.67k objects, 3.4 GiB
    usage:   6.7 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:45,777045676-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:54,994659600-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 220.67k objects, 3.4 GiB
    usage:   6.7 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:55,010209585-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:55,022380664-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:03:55,029863068-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:03:55,046294723-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3869573
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T16:03:55,060026758-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T16:03:55,098662916-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:03:55,105193438-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9fb4acff-7f41-444a-b207-f0c8b487b687', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9fb4acff-7f41-444a-b207-f0c8b487b687 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.RO4oEk:/tmp/ceph-asok.RO4oEk -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:03:56.609+0000 ffffa9a5b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:03:57.425+0000 ffffa9a5b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:03:57.425+0000 ffffa9a5b010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:03:57.449057+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:03:57.449057+0000     0       0         0         0         0         0           -           0
2021-05-14T23:03:58.449217+0000     1     255     25120     24865     388.4   388.516  0.00610514   0.0101972
2021-05-14T23:03:59.449389+0000     2     255     52596     52341   408.818   429.312   0.0111834  0.00972993
2021-05-14T23:04:00.449557+0000     3     255     78577     78322    407.84   405.953   0.0093174  0.00977091
2021-05-14T23:04:01.449729+0000     4     255    106824    106569   416.201   441.359  0.00720673  0.00957956
2021-05-14T23:04:02.449903+0000     5     255    135621    135366   422.935   449.953  0.00155877   0.0094253
2021-05-14T23:04:03.450094+0000     6     255    162658    162403   422.842   422.453  0.00946492  0.00943634
2021-05-14T23:04:04.450271+0000     7     255    189784    189529   422.974   423.844  0.00362064  0.00942923
2021-05-14T23:04:05.450486+0000     8     255    219052    218797   427.254   457.312   0.0200205  0.00933722
2021-05-14T23:04:06.450872+0000 Total time run:       8.06933
Total reads made:     220666
Read size:            16384
Object size:          16384
Bandwidth (MB/sec):   427.285
Average IOPS:         27346
Stddev IOPS:          1453.59
Max IOPS:             29268
Min IOPS:             24865
Average Latency(s):   0.00933898
Max latency(s):       0.0447694
Min latency(s):       0.000326546

[1;32mlocalhost.localdomain	[2021-05-14T16:04:07,128325256-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3869573


[1;7;39;49m[2021-05-14T16:04:07,133448779-07:00][RUNNING][ROUND 3/2/40] object_size=16KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:04:07,140862052-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:04:07,156875511-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40813\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1720404\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid fd25f65e-3af5-457f-b104-5bcf38af232d\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid fd25f65e-3af5-457f-b104-5bcf38af232d\nlast_changed 2021-05-14T16:04:37.004397-0700\ncreated 2021-05-14T16:04:37.004397-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40813/0,v1:10.10.1.2:40814/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1720404 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 6548f991-d9d8-4edb-a76a-e20683041c5e\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 adfa92a1-b8d1-4baf-ace7-da3f8ac54ee2\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 f44127f0-a14c-4781-b9c0-640b41245ff8\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42813\n  w/ user/pass: admin / 96a55060-2d2f-4680-9569-1eddd7e1dd2f\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:05:00 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40813
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1720404
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid fd25f65e-3af5-457f-b104-5bcf38af232d
setting min_mon_release = octopus
epoch 0
fsid fd25f65e-3af5-457f-b104-5bcf38af232d
last_changed 2021-05-14T16:04:37.004397-0700
created 2021-05-14T16:04:37.004397-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40813/0,v1:10.10.1.2:40814/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1720404 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 6548f991-d9d8-4edb-a76a-e20683041c5e
0
start osd.0
add osd1 adfa92a1-b8d1-4baf-ace7-da3f8ac54ee2
1
start osd.1
add osd2 f44127f0-a14c-4781-b9c0-640b41245ff8
2
start osd.2


restful urls: https://10.10.1.2:42813
  w/ user/pass: admin / 96a55060-2d2f-4680-9569-1eddd7e1dd2f


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:04:09.460-0700 7f67e6bfe1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:04:09.460-0700 7f67e6bfe1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:04:09.480-0700 7f2deab8d1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:04:09.480-0700 7f2deab8d1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40813,v1:10.10.1.2:40814] --print /tmp/ceph_monmap.1720404 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1720404 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1720404 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42813 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55ada7792000 @  0x7f14fd62e680 0x7f14fd64f824 0x7f14fddea187 0x7f14fddf2355 0x7f14fddea708 0x7f14fddea877 0x7f14fddebc24 0x7f14fde03ec1 0x7f14fdd765f3 0x7f14fddd7e97 0x7f14fdddfb1a 0x7f14fd4e2d84 0x7f14fd5fe609 0x7f14fd1d2103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.byoHHGEi7p 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 6548f991-d9d8-4edb-a76a-e20683041c5e -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQATAp9g4uukBRAAW6RPdqVx3SguFmHgVvWP3g== --osd-uuid 6548f991-d9d8-4edb-a76a-e20683041c5e 
2021-05-14T16:04:51.933-0700 7fc32bb21f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:04:51.953-0700 7fc32bb21f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:04:51.953-0700 7fc32bb21f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55ab7a0d6000 @  0x7fc32c4ea680 0x7fc32c50b824 0x55ab6f277447 0x55ab6f27f4b5 0x55ab6f2779c8 0x55ab6f277b37 0x55ab6f278ee4 0x55ab6f049ca1 0x55ab6f221423 0x55ab6f03a2a7 0x55ab6f03f53a 0x7fc32c03dd84 0x7fc32c1c2609 0x7fc32bd2b103
2021-05-14T16:04:52.369-0700 7fc32bb21f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new adfa92a1-b8d1-4baf-ace7-da3f8ac54ee2 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56476d060000 @  0x7fb734644680 0x7fb734665824 0x564761988447 0x5647619904b5 0x5647619889c8 0x564761988b37 0x564761989ee4 0x56476175aca1 0x564761932423 0x56476174b2a7 0x56476175053a 0x7fb734197d84 0x7fb73431c609 0x7fb733e85103
2021-05-14T16:04:53.157-0700 7fb733c7bf00 -1 Falling back to public interface
2021-05-14T16:04:53.513-0700 7fb733c7bf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAUAp9g38eZLBAA9BPGfdqqRHrcY1IfVTAcHg== --osd-uuid adfa92a1-b8d1-4baf-ace7-da3f8ac54ee2 
2021-05-14T16:04:53.549-0700 7f7209469f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:04:53.569-0700 7f7209469f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:04:53.569-0700 7f7209469f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56535d81c000 @  0x7f7209e32680 0x7f7209e53824 0x565353284447 0x56535328c4b5 0x5653532849c8 0x565353284b37 0x565353285ee4 0x565353056ca1 0x56535322e423 0x5653530472a7 0x56535304c53a 0x7f7209985d84 0x7f7209b0a609 0x7f7209673103
2021-05-14T16:04:53.949-0700 7f7209469f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new f44127f0-a14c-4781-b9c0-640b41245ff8 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x560cf929e000 @  0x7fe352314680 0x7fe352335824 0x560ceebfa447 0x560ceec024b5 0x560ceebfa9c8 0x560ceebfab37 0x560ceebfbee4 0x560cee9ccca1 0x560ceeba4423 0x560cee9bd2a7 0x560cee9c253a 0x7fe351e67d84 0x7fe351fec609 0x7fe351b55103
2021-05-14T16:04:54.697-0700 7fe35194bf00 -1 Falling back to public interface
2021-05-14T16:04:55.037-0700 7fe35194bf00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAWAp9gMJbaEhAAR8DVkZS+qIQT1TX7ukN3iw== --osd-uuid f44127f0-a14c-4781-b9c0-640b41245ff8 
2021-05-14T16:04:55.177-0700 7f08c0290f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:04:55.197-0700 7f08c0290f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:04:55.197-0700 7f08c0290f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55c01e494000 @  0x7f08c0c59680 0x7f08c0c7a824 0x55c013162447 0x55c01316a4b5 0x55c0131629c8 0x55c013162b37 0x55c013163ee4 0x55c012f34ca1 0x55c01310c423 0x55c012f252a7 0x55c012f2a53a 0x7f08c07acd84 0x7f08c0931609 0x7f08c049a103
2021-05-14T16:04:55.601-0700 7f08c0290f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55e4545d6000 @  0x7fa364826680 0x7fa364847824 0x55e44941d447 0x55e4494254b5 0x55e44941d9c8 0x55e44941db37 0x55e44941eee4 0x55e4491efca1 0x55e4493c7423 0x55e4491e02a7 0x55e4491e553a 0x7fa364379d84 0x7fa3644fe609 0x7fa364067103
2021-05-14T16:04:56.377-0700 7fa363e5df00 -1 Falling back to public interface
2021-05-14T16:04:56.741-0700 7fa363e5df00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:05:00,524039243-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:05:00,543692637-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:05:00,623528802-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:00,629647040-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:02.344+0000 ffff79f4c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:03.193+0000 ffff79f4c1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:05:04,616985291-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:04,623378300-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:06.293+0000 ffffa834e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:07.149+0000 ffffa834e1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:05:08,728560560-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:08,734880507-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:10.586+0000 ffff8aebd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:11.410+0000 ffff8aebd1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:05:12,847809808-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:12,854193035-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:14.538+0000 ffffb175a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:15.387+0000 ffffb175a1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:18.543+0000 ffffb3ce41e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:19.375+0000 ffffb3ce41e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:05:20,950347863-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:20,956963540-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:22.604+0000 ffff7e1371e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:23.468+0000 ffff7e1371e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:05:25,984917680-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:25,991343890-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:27.733+0000 ffffb0d181e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:28.581+0000 ffffab59e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:05:30,929634824-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:30,935816523-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:32.586+0000 ffff935e51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:33.418+0000 ffff935e51e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:05:34,818073312-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:34,824188474-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:36.562+0000 ffff930311e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:37.594+0000 ffff930311e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:05:39,885984642-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:39,892265357-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:41.639+0000 ffffa03601e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:42.459+0000 ffffa03601e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:05:44,158014755-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:44,164388756-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:45.796+0000 ffffb28df1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:46.636+0000 ffffb167d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:05:48,507831961-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:48,513939352-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:50.157+0000 ffff845211e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:50.985+0000 ffff845211e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:05:52,261615310-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:05:52,267758887-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:05:54.105+0000 ffff86cb51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:05:54.945+0000 ffff86cb51e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  154      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  151      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:05:56,443726987-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:06:20,937939449-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:06:30,244569543-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:06:39,377520314-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:06:48,511744754-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:06:57,776920600-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:06:57,793383131-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:07,101329375-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:07,116778543-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:16,273999431-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:16,289527093-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:25,456542861-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:25,471994610-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:34,878718863-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:34,897051058-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:34,910877339-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:07:34,918938033-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:07:34,935855307-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3880180
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T16:07:34,950182434-07:00] INFO: > Run rados bench[0m
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_write.log.3
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
[1;30mlocalhost.localdomain	[2021-05-14T16:07:34,990110705-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:07:34,996645384-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16384', '-O', '16384', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:07:36.535+0000 ffff92284010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:07:37.367+0000 ffff92284010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:07:37.367+0000 ffff92284010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:07:37.387272+0000 Maintaining 256 concurrent writes of 16384 bytes to objects of size 16384 for up to 20 seconds or 0 objects
2021-05-14T23:07:37.387318+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:07:37.392583+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:07:37.392583+0000     0       9         9         0         0         0           -           0
2021-05-14T23:07:38.392793+0000     1     256     15928     15672   244.677   244.875   0.0669999   0.0158305
2021-05-14T23:07:39.392950+0000     2     255     28977     28722   224.282   203.906  0.00150411   0.0171855
2021-05-14T23:07:40.393121+0000     3     255     41362     41107   214.018   193.516  0.00225996   0.0183262
2021-05-14T23:07:41.393309+0000     4     255     51738     51483   201.039   162.125    0.140458   0.0195775
2021-05-14T23:07:42.393466+0000     5     256     58313     58057   181.374   102.719 0.000984243   0.0216371
2021-05-14T23:07:43.393620+0000     6     256     68675     68419   178.126   161.906  0.00220949   0.0222899
2021-05-14T23:07:44.393776+0000     7     255     78914     78659   175.533       160  0.00584938   0.0224885
2021-05-14T23:07:45.393937+0000     8     256     88660     88404   172.622   152.266  0.00160127    0.022866
2021-05-14T23:07:46.394109+0000     9     256     98572     98316   170.647   154.875  0.00239885   0.0231901
2021-05-14T23:07:47.394277+0000    10     256    108331    108075   168.828   152.484  0.00891551   0.0234979
2021-05-14T23:07:48.394453+0000    11     255    118171    117916   167.457   153.766  0.00771352   0.0237327
2021-05-14T23:07:49.394604+0000    12     256    127800    127544   166.037   150.438  0.00138474   0.0239219
2021-05-14T23:07:50.394759+0000    13     255    136007    135752   163.129    128.25   0.0283094   0.0243238
2021-05-14T23:07:51.394912+0000    14     255    146950    146695   163.688   170.984  0.00121668   0.0243274
2021-05-14T23:07:52.395068+0000    15     256    157298    157042   163.552   161.672  0.00170671   0.0243429
2021-05-14T23:07:53.395232+0000    16     255    168336    168081   164.108   172.484  0.00175354   0.0242987
2021-05-14T23:07:54.395385+0000    17     256    178767    178511    164.04   162.969  0.00105508   0.0242859
2021-05-14T23:07:55.395553+0000    18     256    189898    189642   164.587   173.922   0.0019434   0.0242115
2021-05-14T23:07:56.395717+0000    19     255    200227    199972   164.418   161.406  0.00593765   0.0242449
2021-05-14T23:07:57.395898+0000 min lat: 0.000851576 max lat: 0.342452 avg lat: 0.0242517
2021-05-14T23:07:57.395898+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:07:57.395898+0000    20     217    210808    210591   164.492   165.922   0.0119686   0.0242517
2021-05-14T23:07:58.396157+0000 Total time run:         20.0757
Total writes made:      210808
Write size:             16384
Object size:            16384
Bandwidth (MB/sec):     164.073
Stddev Bandwidth:       28.0363
Max bandwidth (MB/sec): 244.875
Min bandwidth (MB/sec): 102.719
Average IOPS:           10500
Stddev IOPS:            1794.32
Max IOPS:               15672
Min IOPS:               6574
Average Latency(s):     0.0243118
Stddev Latency(s):      0.0500653
Max latency(s):         0.342452
Min latency(s):         0.000851576

[1;32mlocalhost.localdomain	[2021-05-14T16:07:59,050913371-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3880180


[1;33mlocalhost.localdomain	[2021-05-14T16:07:59,058828405-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:23,137666975-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 210.81k objects, 3.2 GiB
    usage:   6.4 GiB used, 294 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:23,153347918-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:32,459612840-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 210.81k objects, 3.2 GiB
    usage:   6.4 GiB used, 294 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:32,475190176-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:41,697857569-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 210.81k objects, 3.2 GiB
    usage:   6.4 GiB used, 294 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:41,714011647-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:50,885979419-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 210.81k objects, 3.2 GiB
    usage:   6.4 GiB used, 294 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:08:50,901259659-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:09:00,150806442-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 210.81k objects, 3.2 GiB
    usage:   6.4 GiB used, 294 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:09:00,166413243-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:09:00,178835180-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:09:00,186365444-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:09:00,203136713-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3883781
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T16:09:00,216855712-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T16:09:00,255790680-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:09:00,262243415-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b75ceb3b-ebd4-4601-92b7-d22ec089fa94', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b75ceb3b-ebd4-4601-92b7-d22ec089fa94 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.213Lb3:/tmp/ceph-asok.213Lb3 -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:09:01.749+0000 ffffb5ece010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:09:02.577+0000 ffffb5ece010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:09:02.577+0000 ffffb5ece010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:09:02.599404+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:09:02.599404+0000     0       0         0         0         0         0           -           0
2021-05-14T23:09:03.599570+0000     1     255     27122     26867   419.668   419.797 0.000643639   0.0093661
2021-05-14T23:09:04.599761+0000     2     255     54890     54635    426.73   433.875  0.00928808  0.00932933
2021-05-14T23:09:05.599941+0000     3     255     82501     82246   428.268   431.422  0.00948538  0.00930386
2021-05-14T23:09:06.600115+0000     4     255    109953    109698   428.417   428.938  0.00910882  0.00930945
2021-05-14T23:09:07.600280+0000     5     255    138553    138298   432.093   446.875  0.00732059  0.00923093
2021-05-14T23:09:08.600492+0000     6     255    166918    166663   433.929   443.203  0.00179665  0.00919121
2021-05-14T23:09:09.600698+0000     7     256    194157    193901   432.726   425.594  0.00829371  0.00922402
2021-05-14T23:09:10.600937+0000 Total time run:       7.60055
Total reads made:     210808
Read size:            16384
Object size:          16384
Bandwidth (MB/sec):   433.373
Average IOPS:         27735
Stddev IOPS:          610.138
Max IOPS:             28600
Min IOPS:             26867
Average Latency(s):   0.00920928
Max latency(s):       0.068453
Min latency(s):       0.000338908

[1;32mlocalhost.localdomain	[2021-05-14T16:09:11,253604225-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3883781


[1;7;39;49m[2021-05-14T16:09:11,258791269-07:00][RUNNING][ROUND 4/2/40] object_size=16KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:09:11,266032329-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:09:11,282384981-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40963\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1723863\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 90fc06fe-00dc-4309-a519-cc51ff10848f\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 90fc06fe-00dc-4309-a519-cc51ff10848f\nlast_changed 2021-05-14T16:09:41.889432-0700\ncreated 2021-05-14T16:09:41.889432-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40963/0,v1:10.10.1.2:40964/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1723863 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 6e75ac6f-4238-4059-96a8-2031d46a332e\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 6b8579e1-b805-435f-bcf3-71516a170669\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 10ea4592-ab98-4023-a7cb-2ee4cd05ca73\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42963\n  w/ user/pass: admin / 6264d134-c350-4ffc-9144-1e32951fa9cd\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\nCEPH_DEV=1\n'
[1] 16:10:05 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40963
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1723863
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 90fc06fe-00dc-4309-a519-cc51ff10848f
setting min_mon_release = octopus
epoch 0
fsid 90fc06fe-00dc-4309-a519-cc51ff10848f
last_changed 2021-05-14T16:09:41.889432-0700
created 2021-05-14T16:09:41.889432-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40963/0,v1:10.10.1.2:40964/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1723863 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 6e75ac6f-4238-4059-96a8-2031d46a332e
0
start osd.0
add osd1 6b8579e1-b805-435f-bcf3-71516a170669
1
start osd.1
add osd2 10ea4592-ab98-4023-a7cb-2ee4cd05ca73
2
start osd.2


restful urls: https://10.10.1.2:42963
  w/ user/pass: admin / 6264d134-c350-4ffc-9144-1e32951fa9cd


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:09:13.755-0700 7f75564471c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:09:13.755-0700 7f75564471c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:09:13.775-0700 7f624a5e71c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:09:13.775-0700 7f624a5e71c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40963,v1:10.10.1.2:40964] --print /tmp/ceph_monmap.1723863 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1723863 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1723863 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42963 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a3e8d3c000 @  0x7f2f0fb96680 0x7f2f0fbb7824 0x7f2f10352187 0x7f2f1035a355 0x7f2f10352708 0x7f2f10352877 0x7f2f10353c24 0x7f2f1036bec1 0x7f2f102de5f3 0x7f2f1033fe97 0x7f2f10347b1a 0x7f2f0fa4ad84 0x7f2f0fb66609 0x7f2f0f73a103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.X5BeD4spzs 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 6e75ac6f-4238-4059-96a8-2031d46a332e -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBEA59g72WsBRAAQdT0YKwu++g6sNTI3n6D/Q== --osd-uuid 6e75ac6f-4238-4059-96a8-2031d46a332e 
2021-05-14T16:09:56.879-0700 7f5c9c30ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:09:56.899-0700 7f5c9c30ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:09:56.899-0700 7f5c9c30ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55cd837ba000 @  0x7f5c9ccd7680 0x7f5c9ccf8824 0x55cd78ef2447 0x55cd78efa4b5 0x55cd78ef29c8 0x55cd78ef2b37 0x55cd78ef3ee4 0x55cd78cc4ca1 0x55cd78e9c423 0x55cd78cb52a7 0x55cd78cba53a 0x7f5c9c82ad84 0x7f5c9c9af609 0x7f5c9c518103
2021-05-14T16:09:57.299-0700 7f5c9c30ef00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 6b8579e1-b805-435f-bcf3-71516a170669 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x555722e70000 @  0x7f93ddfc1680 0x7f93ddfe2824 0x55571892a447 0x5557189324b5 0x55571892a9c8 0x55571892ab37 0x55571892bee4 0x5557186fcca1 0x5557188d4423 0x5557186ed2a7 0x5557186f253a 0x7f93ddb14d84 0x7f93ddc99609 0x7f93dd802103
2021-05-14T16:09:58.079-0700 7f93dd5f8f00 -1 Falling back to public interface
2021-05-14T16:09:58.423-0700 7f93dd5f8f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBFA59gdpqxKBAAqY3W/sZzgs39xqova81meA== --osd-uuid 6b8579e1-b805-435f-bcf3-71516a170669 
2021-05-14T16:09:58.487-0700 7f4ab43e6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:09:58.507-0700 7f4ab43e6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:09:58.507-0700 7f4ab43e6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x556484bb8000 @  0x7f4ab4daf680 0x7f4ab4dd0824 0x556478e17447 0x556478e1f4b5 0x556478e179c8 0x556478e17b37 0x556478e18ee4 0x556478be9ca1 0x556478dc1423 0x556478bda2a7 0x556478bdf53a 0x7f4ab4902d84 0x7f4ab4a87609 0x7f4ab45f0103
2021-05-14T16:09:58.887-0700 7f4ab43e6f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 10ea4592-ab98-4023-a7cb-2ee4cd05ca73 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x560673b14000 @  0x7f20623bb680 0x7f20623dc824 0x5606698a1447 0x5606698a94b5 0x5606698a19c8 0x5606698a1b37 0x5606698a2ee4 0x560669673ca1 0x56066984b423 0x5606696642a7 0x56066966953a 0x7f2061f0ed84 0x7f2062093609 0x7f2061bfc103
2021-05-14T16:09:59.631-0700 7f20619f2f00 -1 Falling back to public interface
2021-05-14T16:09:59.963-0700 7f20619f2f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBHA59gRLeUDxAAEjiNCHS+mrWrHJyTL3I1Mg== --osd-uuid 10ea4592-ab98-4023-a7cb-2ee4cd05ca73 
2021-05-14T16:10:00.103-0700 7f36eac4af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:10:00.123-0700 7f36eac4af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:10:00.123-0700 7f36eac4af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55f5993fe000 @  0x7f36eb613680 0x7f36eb634824 0x55f58e0d1447 0x55f58e0d94b5 0x55f58e0d19c8 0x55f58e0d1b37 0x55f58e0d2ee4 0x55f58dea3ca1 0x55f58e07b423 0x55f58de942a7 0x55f58de9953a 0x7f36eb166d84 0x7f36eb2eb609 0x7f36eae54103
2021-05-14T16:10:00.535-0700 7f36eac4af00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55669db3c000 @  0x7f2e39060680 0x7f2e39081824 0x556692d00447 0x556692d084b5 0x556692d009c8 0x556692d00b37 0x556692d01ee4 0x556692ad2ca1 0x556692caa423 0x556692ac32a7 0x556692ac853a 0x7f2e38bb3d84 0x7f2e38d38609 0x7f2e388a1103
2021-05-14T16:10:01.259-0700 7f2e38697f00 -1 Falling back to public interface
2021-05-14T16:10:01.599-0700 7f2e38697f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:10:05,348445825-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:10:05,368382334-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:10:05,449452931-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:05,455922544-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:07.216+0000 ffff9ac2e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:08.045+0000 ffff999cc1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:10:09,603242503-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:09,609712656-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:11.401+0000 ffff7fe0c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:12.257+0000 ffff7fe0c1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:10:13,789854870-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:13,796227267-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:15.498+0000 ffff89c571e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:16.326+0000 ffff89c571e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:10:17,827067373-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:17,833339943-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:19.506+0000 ffffb40951e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:20.375+0000 ffffb40951e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:23.679+0000 ffff80dfd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:24.563+0000 ffff80dfd1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:10:25,991446212-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:25,997677464-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:27.680+0000 ffff8f4181e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:28.528+0000 ffff8f4181e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:10:30,893066283-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:30,899366517-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:32.537+0000 ffff9bd8c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:33.393+0000 ffff9bd8c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:10:35,268893870-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:35,275372950-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:37.089+0000 ffff99ccc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:37.930+0000 ffff99ccc1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:10:39,780843285-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:39,787719453-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:41.566+0000 ffff7b5731e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:42.446+0000 ffff7a3111e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:10:45,039695310-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:45,045730539-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:46.679+0000 ffff9dcec1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:47.499+0000 ffff9dcec1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:10:49,969555044-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:49,976632861-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:51.668+0000 ffff7d6381e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:52.492+0000 ffff77fff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:10:54,866100524-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:54,872344318-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:10:56.657+0000 ffffae9671e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:10:57.497+0000 ffffae9671e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:10:58,826695507-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:10:58,832981594-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:11:00.734+0000 ffff98aa11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:11:01.546+0000 ffff98aa11e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  190 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:11:02,814820877-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:11:27,001698594-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:11:36,624543386-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:11:45,680418013-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:11:54,828394379-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:04,245953784-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:04,262762050-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:13,401609539-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:13,417057313-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:22,442626289-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:22,458546539-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:31,874695987-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:31,890137325-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:41,007453529-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:41,025037412-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:41,039101575-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:12:41,048645273-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:12:41,070153871-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3894359
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T16:12:41,085822783-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T16:12:41,129523045-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:12:41,136977981-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16384', '-O', '16384', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:12:42.659+0000 ffffa7694010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:12:43.475+0000 ffffa7694010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:12:43.475+0000 ffffa7694010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:12:43.495073+0000 Maintaining 256 concurrent writes of 16384 bytes to objects of size 16384 for up to 20 seconds or 0 objects
2021-05-14T23:12:43.495123+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:12:43.499543+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:12:43.499543+0000     0       0         0         0         0         0           -           0
2021-05-14T23:12:44.499729+0000     1     255     16749     16494   257.699   257.719   0.0221468   0.0148582
2021-05-14T23:12:45.500207+0000     2     255     30278     30023    234.49   211.391  0.00213636    0.016409
2021-05-14T23:12:46.500367+0000     3     255     42771     42516   221.385   195.203  0.00126286   0.0178724
2021-05-14T23:12:47.500552+0000     4     256     52848     52592   205.391   157.438  0.00085213   0.0191238
2021-05-14T23:12:48.500730+0000     5     256     64765     64509   201.547   186.203   0.0674148   0.0196929
2021-05-14T23:12:49.500920+0000     6     255     76907     76652   199.572   189.734   0.0919402   0.0199174
2021-05-14T23:12:50.501087+0000     7     255     88889     88634   197.803   187.219  0.00219327   0.0199946
2021-05-14T23:12:51.501251+0000     8     256     99123     98867   193.061   159.891  0.00175455    0.020464
2021-05-14T23:12:52.501419+0000     9     255    109843    109588    190.22   167.516  0.00347446   0.0208865
2021-05-14T23:12:53.501577+0000    10     255    121579    121324   189.532   183.375  0.00315487    0.021018
2021-05-14T23:12:54.501735+0000    11     255    133007    132752   188.532   178.562  0.00224612     0.02104
2021-05-14T23:12:55.501895+0000    12     255    142681    142426   185.416   151.156  0.00431697   0.0214409
2021-05-14T23:12:56.502059+0000    13     256    153946    153690   184.689       176  0.00151961   0.0215055
2021-05-14T23:12:57.502232+0000    14     255    163855    163600   182.556   154.844  0.00188993   0.0217995
2021-05-14T23:12:58.502396+0000    15     256    174779    174523   181.762   170.672   0.0103911   0.0218693
2021-05-14T23:12:59.502549+0000    16     256    185026    184770   180.407   160.109    0.170537   0.0219929
2021-05-14T23:13:00.502739+0000    17     255    196461    196206   180.304   178.688  0.00275073   0.0220617
2021-05-14T23:13:01.502928+0000    18     256    205108    204852   177.791   135.094  0.00657289   0.0223948
2021-05-14T23:13:02.503076+0000    19     255    216304    216049    177.64   174.953  0.00158095   0.0224125
2021-05-14T23:13:03.503229+0000 min lat: 0.00079191 max lat: 0.330068 avg lat: 0.0225347
2021-05-14T23:13:03.503229+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:13:03.503229+0000    20     238    226922    226684   177.065   166.172    0.112937   0.0225347
2021-05-14T23:13:04.503518+0000 Total time run:         20.0658
Total writes made:      226922
Write size:             16384
Object size:            16384
Bandwidth (MB/sec):     176.701
Stddev Bandwidth:       25.7055
Max bandwidth (MB/sec): 257.719
Min bandwidth (MB/sec): 135.094
Average IOPS:           11308
Stddev IOPS:            1645.15
Max IOPS:               16494
Min IOPS:               8646
Average Latency(s):     0.0225803
Stddev Latency(s):      0.0480892
Max latency(s):         0.330068
Min latency(s):         0.00079191

[1;32mlocalhost.localdomain	[2021-05-14T16:13:05,162696222-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3894359


[1;33mlocalhost.localdomain	[2021-05-14T16:13:05,170808496-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:29,481106275-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 226.92k objects, 3.5 GiB
    usage:   6.9 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:29,497409435-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:38,691524895-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 226.92k objects, 3.5 GiB
    usage:   6.9 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:38,707800646-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:48,141699324-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 226.92k objects, 3.5 GiB
    usage:   6.9 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:48,157684550-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:57,619676297-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 226.92k objects, 3.5 GiB
    usage:   6.9 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:13:57,635792961-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:14:06,749550373-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 226.92k objects, 3.5 GiB
    usage:   6.9 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:14:06,765668177-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:14:06,778709376-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:14:06,786271940-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:14:06,803690976-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3897939
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T16:14:06,817759115-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T16:14:06,856208692-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:14:06,862562936-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5b80a61a-2742-4ef0-889b-133e652190e3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5b80a61a-2742-4ef0-889b-133e652190e3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9EJHrf:/tmp/ceph-asok.9EJHrf -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:14:08.349+0000 ffff9faac010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:14:09.190+0000 ffff9faac010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:14:09.190+0000 ffff9faac010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:14:09.212299+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:14:09.212299+0000     0       0         0         0         0         0           -           0
2021-05-14T23:14:10.212457+0000     1     256     27096     26840   419.263   419.375   0.0256637  0.00940417
2021-05-14T23:14:11.212642+0000     2     255     53706     53451   417.491   415.797 0.000862407  0.00950306
2021-05-14T23:14:12.212841+0000     3     256     80683     80427     418.8     421.5   0.0096729  0.00951779
2021-05-14T23:14:13.213038+0000     4     255    109906    109651   428.233   456.625   0.0036572  0.00930892
2021-05-14T23:14:14.213288+0000     5     255    137477    137222   428.724   430.797  0.00882234  0.00930667
2021-05-14T23:14:15.213465+0000     6     255    165195    164940    429.44   433.094  0.00934839  0.00929292
2021-05-14T23:14:16.213649+0000     7     255    192642    192387   429.346   428.859  0.00881525  0.00929675
2021-05-14T23:14:17.213833+0000     8     255    221977    221722   432.962   458.359  0.00304651  0.00921754
2021-05-14T23:14:18.214131+0000 Total time run:       8.18663
Total reads made:     226922
Read size:            16384
Object size:          16384
Bandwidth (MB/sec):   433.104
Average IOPS:         27718
Stddev IOPS:          1036.8
Max IOPS:             29335
Min IOPS:             26611
Average Latency(s):   0.00922029
Max latency(s):       0.0375384
Min latency(s):       0.00029303

[1;32mlocalhost.localdomain	[2021-05-14T16:14:18,981402338-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3897939


[1;7;39;49m[2021-05-14T16:14:18,987174047-07:00][RUNNING][ROUND 5/2/40] object_size=16KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:14:18,995682568-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:14:19,014058362-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40977\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1726940\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 49331759-36d0-4f75-a6dd-6f86c2447e44\nsetting min_mon_release = octopus\nepoch 0\nfsid 49331759-36d0-4f75-a6dd-6f86c2447e44\nlast_changed 2021-05-14T16:14:49.403099-0700\ncreated 2021-05-14T16:14:49.403099-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40977/0,v1:10.10.1.2:40978/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1726940 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 c34fa87d-e5dc-4221-ad7f-0631b88e552d\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 8df5d537-3556-4e5c-8967-4d3a63da72df\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 7b3f5496-ca2d-4287-8339-076e6cd9391e\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42977\n  w/ user/pass: admin / 54522cf5-63e2-4c05-b6d9-94c235c48939\n'
10.10.1.2: b'\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:15:11 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40977
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1726940
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 49331759-36d0-4f75-a6dd-6f86c2447e44
setting min_mon_release = octopus
epoch 0
fsid 49331759-36d0-4f75-a6dd-6f86c2447e44
last_changed 2021-05-14T16:14:49.403099-0700
created 2021-05-14T16:14:49.403099-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40977/0,v1:10.10.1.2:40978/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1726940 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 c34fa87d-e5dc-4221-ad7f-0631b88e552d
0
start osd.0
add osd1 8df5d537-3556-4e5c-8967-4d3a63da72df
1
start osd.1
add osd2 7b3f5496-ca2d-4287-8339-076e6cd9391e
2
start osd.2


restful urls: https://10.10.1.2:42977
  w/ user/pass: admin / 54522cf5-63e2-4c05-b6d9-94c235c48939


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:14:21.366-0700 7f39891811c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:14:21.366-0700 7f39891811c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:14:21.382-0700 7fe2d5de81c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:14:21.386-0700 7fe2d5de81c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40977,v1:10.10.1.2:40978] --print /tmp/ceph_monmap.1726940 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1726940 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1726940 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42977 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x564d45c3c000 @  0x7f219cd53680 0x7f219cd74824 0x7f219d50f187 0x7f219d517355 0x7f219d50f708 0x7f219d50f877 0x7f219d510c24 0x7f219d528ec1 0x7f219d49b5f3 0x7f219d4fce97 0x7f219d504b1a 0x7f219cc07d84 0x7f219cd23609 0x7f219c8f7103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.D0FjEuzdHy 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new c34fa87d-e5dc-4221-ad7f-0631b88e552d -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQB2BJ9gWdYlAxAAXtYDDr8iqd8OxjmzduJdQw== --osd-uuid c34fa87d-e5dc-4221-ad7f-0631b88e552d 
2021-05-14T16:15:02.886-0700 7fd53d4e9f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:15:02.906-0700 7fd53d4e9f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:15:02.906-0700 7fd53d4e9f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x560946244000 @  0x7fd53deb2680 0x7fd53ded3824 0x56093a479447 0x56093a4814b5 0x56093a4799c8 0x56093a479b37 0x56093a47aee4 0x56093a24bca1 0x56093a423423 0x56093a23c2a7 0x56093a24153a 0x7fd53da05d84 0x7fd53db8a609 0x7fd53d6f3103
2021-05-14T16:15:03.334-0700 7fd53d4e9f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 8df5d537-3556-4e5c-8967-4d3a63da72df -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55771d360000 @  0x7fbc0addd680 0x7fbc0adfe824 0x5577131cd447 0x5577131d54b5 0x5577131cd9c8 0x5577131cdb37 0x5577131ceee4 0x557712f9fca1 0x557713177423 0x557712f902a7 0x557712f9553a 0x7fbc0a930d84 0x7fbc0aab5609 0x7fbc0a61e103
2021-05-14T16:15:04.130-0700 7fbc0a414f00 -1 Falling back to public interface
2021-05-14T16:15:04.486-0700 7fbc0a414f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQB3BJ9gAWTMKhAAzud/Oz2gw5mkQVwmTk8qqQ== --osd-uuid 8df5d537-3556-4e5c-8967-4d3a63da72df 
2021-05-14T16:15:04.570-0700 7f4360a8af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:15:04.590-0700 7f4360a8af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:15:04.590-0700 7f4360a8af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55e273974000 @  0x7f4361453680 0x7f4361474824 0x55e26996c447 0x55e2699744b5 0x55e26996c9c8 0x55e26996cb37 0x55e26996dee4 0x55e26973eca1 0x55e269916423 0x55e26972f2a7 0x55e26973453a 0x7f4360fa6d84 0x7f436112b609 0x7f4360c94103
2021-05-14T16:15:04.990-0700 7f4360a8af00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7b3f5496-ca2d-4287-8339-076e6cd9391e -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55fa5eb16000 @  0x7ff077086680 0x7ff0770a7824 0x55fa54233447 0x55fa5423b4b5 0x55fa542339c8 0x55fa54233b37 0x55fa54234ee4 0x55fa54005ca1 0x55fa541dd423 0x55fa53ff62a7 0x55fa53ffb53a 0x7ff076bd9d84 0x7ff076d5e609 0x7ff0768c7103
2021-05-14T16:15:05.762-0700 7ff0766bdf00 -1 Falling back to public interface
2021-05-14T16:15:06.118-0700 7ff0766bdf00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQB5BJ9gc7RzFhAAJ8yjPewYWvKrUeJeXcakhw== --osd-uuid 7b3f5496-ca2d-4287-8339-076e6cd9391e 
2021-05-14T16:15:06.190-0700 7f1aeabb4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:15:06.210-0700 7f1aeabb4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:15:06.210-0700 7f1aeabb4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5624fdf7e000 @  0x7f1aeb57d680 0x7f1aeb59e824 0x5624f4026447 0x5624f402e4b5 0x5624f40269c8 0x5624f4026b37 0x5624f4027ee4 0x5624f3df8ca1 0x5624f3fd0423 0x5624f3de92a7 0x5624f3dee53a 0x7f1aeb0d0d84 0x7f1aeb255609 0x7f1aeadbe103
2021-05-14T16:15:06.626-0700 7f1aeabb4f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5626ddb26000 @  0x7f248a20b680 0x7f248a22c824 0x5626d3866447 0x5626d386e4b5 0x5626d38669c8 0x5626d3866b37 0x5626d3867ee4 0x5626d3638ca1 0x5626d3810423 0x5626d36292a7 0x5626d362e53a 0x7f2489d5ed84 0x7f2489ee3609 0x7f2489a4c103
2021-05-14T16:15:07.358-0700 7f2489842f00 -1 Falling back to public interface
2021-05-14T16:15:07.694-0700 7f2489842f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:15:11,524544981-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:15:11,544878024-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:15:11,626267520-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:11,632651603-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:13.481+0000 ffff7ac881e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:14.317+0000 ffff7ac881e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:15:15,728425721-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:15,734526362-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:17.469+0000 ffff9902b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:18.289+0000 ffff9902b1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:15:19,777973297-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:19,784240106-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:21.558+0000 ffffaafd61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:22.466+0000 ffffaafd61e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:15:23,890299772-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:23,896777141-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:25.535+0000 ffffa15a21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:26.363+0000 ffffa15a21e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:29.467+0000 ffff953551e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:30.319+0000 ffff953551e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:15:31,740628251-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:31,746904557-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:33.644+0000 ffff886451e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:34.484+0000 ffff886451e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:15:36,453173333-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:36,461486341-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:38.277+0000 ffff7d6731e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:39.129+0000 ffff7d6731e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:15:41,029770811-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:41,036120959-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:42.706+0000 ffffb11421e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:43.562+0000 ffffb09411e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:15:45,431415669-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:45,437704262-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:47.334+0000 ffffb0e771e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:48.151+0000 ffffb0e771e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:15:49,997573847-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:50,004330729-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:51.739+0000 ffff82bf81e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:52.591+0000 ffff82bf81e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:15:54,664502173-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:54,671126253-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:15:56.296+0000 ffff7bffb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:15:57.124+0000 ffff7bffb1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:15:58,599364717-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:15:58,605715240-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:16:00.305+0000 ffffad2201e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:16:01.201+0000 ffffad2201e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:16:02,545884326-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:16:02,552171598-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:16:04.533+0000 ffff933ef1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:16:05.361+0000 ffff9218d1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  180 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  180 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.10   88      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   55 KiB   0 B   0 B   0 B  100 GiB     0  0.92   91      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.98   80      up          osd.2  
                       TOTAL  300 GiB  181 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.92/1.10  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:16:06,562455264-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:16:31,031606895-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:16:40,084630602-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:16:49,329934087-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:16:58,524870150-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:07,796529696-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   224 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:07,816620988-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:16,954679051-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:16,970915765-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:26,244090797-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:26,260028045-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:35,448022335-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:35,464310598-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:44,637302068-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:44,656450404-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:44,672990110-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:17:44,681671940-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:17:44,700309964-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3908513
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T16:17:44,716426628-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_write.log.5
[1;30mlocalhost.localdomain	[2021-05-14T16:17:44,762512344-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:17:44,769321870-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16384', '-O', '16384', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- rados bench 20 write --pool bench_rados -b 16384 -O 16384 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:17:46.259+0000 ffffa5aad010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:17:47.083+0000 ffffa5aad010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:17:47.083+0000 ffffa5aad010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:17:47.105070+0000 Maintaining 256 concurrent writes of 16384 bytes to objects of size 16384 for up to 20 seconds or 0 objects
2021-05-14T23:17:47.105113+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:17:47.109494+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:17:47.109494+0000     0       0         0         0         0         0           -           0
2021-05-14T23:17:48.109678+0000     1     255     16128     15873   248.001   248.016  0.00922669   0.0156512
2021-05-14T23:17:49.109884+0000     2     256     30537     30281   236.539   225.125  0.00153148   0.0165711
2021-05-14T23:17:50.110075+0000     3     255     43728     43473   226.388   206.125  0.00819383   0.0171859
2021-05-14T23:17:51.110256+0000     4     256     53985     53729   209.846    160.25  0.00227988   0.0185428
2021-05-14T23:17:52.110422+0000     5     255     64248     63993   199.946   160.375  0.00617835   0.0198509
2021-05-14T23:17:53.110586+0000     6     255     71120     70865   184.515   107.375    0.120195   0.0215323
2021-05-14T23:17:54.110756+0000     7     255     77467     77212    172.32   99.1719   0.0872241   0.0231249
2021-05-14T23:17:55.110915+0000     8     255     89306     89051     173.9   184.984  0.00150159    0.022767
2021-05-14T23:17:56.111077+0000     9     255     99316     99061   171.953   156.406  0.00147838   0.0230078
2021-05-14T23:17:57.111227+0000    10     256    110037    109781   171.505     167.5    0.209247   0.0230809
2021-05-14T23:17:58.111394+0000    11     255    120136    119881   170.258   157.812  0.00563289   0.0233623
2021-05-14T23:17:59.111551+0000    12     256    131303    131047   170.607   174.469  0.00162646   0.0232518
2021-05-14T23:18:00.111709+0000    13     256    141410    141154   169.629   157.922  0.00165907   0.0234102
2021-05-14T23:18:01.111862+0000    14     256    152908    152652   170.343   179.656    0.117163   0.0233759
2021-05-14T23:18:02.112022+0000    15     256    162523    162267   169.001   150.234   0.0293686   0.0235921
2021-05-14T23:18:03.112169+0000    16     256    173364    173108   169.024   169.391   0.0693143   0.0236054
2021-05-14T23:18:04.112317+0000    17     255    184930    184675   169.711   180.734    0.025027   0.0235011
2021-05-14T23:18:05.112468+0000    18     256    195941    195685   169.839   172.031  0.00153892   0.0234862
2021-05-14T23:18:06.112619+0000    19     256    205315    205059   168.607   146.469    0.236925   0.0236493
2021-05-14T23:18:07.112772+0000 min lat: 0.000810003 max lat: 0.309672 avg lat: 0.0236658
2021-05-14T23:18:07.112772+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:18:07.112772+0000    20     243    215739    215496    168.33   163.078   0.0205676   0.0236658
2021-05-14T23:18:08.113001+0000 Total time run:         20.1055
Total writes made:      215739
Write size:             16384
Object size:            16384
Bandwidth (MB/sec):     167.661
Stddev Bandwidth:       33.5901
Max bandwidth (MB/sec): 248.016
Min bandwidth (MB/sec): 99.1719
Average IOPS:           10730
Stddev IOPS:            2149.77
Max IOPS:               15873
Min IOPS:               6347
Average Latency(s):     0.0237729
Stddev Latency(s):      0.0474077
Max latency(s):         0.309672
Min latency(s):         0.000810003

[1;32mlocalhost.localdomain	[2021-05-14T16:18:08,791641355-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3908513


[1;33mlocalhost.localdomain	[2021-05-14T16:18:08,799950372-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:18:33,013656529-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 215.74k objects, 3.3 GiB
    usage:   6.6 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:18:33,030089987-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:18:42,305544942-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 215.74k objects, 3.3 GiB
    usage:   6.6 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:18:42,322665743-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:18:51,889002349-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 215.74k objects, 3.3 GiB
    usage:   6.6 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:18:51,911098898-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:19:01,012288673-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 215.74k objects, 3.3 GiB
    usage:   6.6 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:19:01,028637427-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:19:10,088067450-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 215.74k objects, 3.3 GiB
    usage:   6.6 GiB used, 293 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:19:10,104325873-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:19:10,117563246-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:19:10,125352965-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:19:10,142921546-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3912150
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16KB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T16:19:10,157517731-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16KB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T16:19:10,196372948-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:19:10,202775755-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7bfa3795-c713-41d7-a4e3-f36e350f71bb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7bfa3795-c713-41d7-a4e3-f36e350f71bb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.OgjQTl:/tmp/ceph-asok.OgjQTl -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:19:11.681+0000 ffff7ff2d010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:19:12.521+0000 ffff7ff2d010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:19:12.521+0000 ffff7ff2d010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:19:12.544758+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:19:12.544758+0000     0       0         0         0         0         0           -           0
2021-05-14T23:19:13.544924+0000     1     255     27749     27494   429.457   429.594  0.00942282  0.00923629
2021-05-14T23:19:14.545132+0000     2     255     55704     55449   433.081   436.797   0.0186983  0.00917949
2021-05-14T23:19:15.545310+0000     3     256     84174     83918    436.97   444.828   0.0090638  0.00912168
2021-05-14T23:19:16.545505+0000     4     255    111921    111666   436.097   433.562  0.00823481  0.00914626
2021-05-14T23:19:17.545678+0000     5     255    140605    140350     438.5   448.188  0.00261306  0.00909176
2021-05-14T23:19:18.545870+0000     6     255    168118    167863   437.051   429.891  0.00148971  0.00912283
2021-05-14T23:19:19.546081+0000     7     255    195723    195468   436.221   431.328  0.00108504  0.00914225
2021-05-14T23:19:20.546327+0000 Total time run:       7.73184
Total reads made:     215739
Read size:            16384
Object size:          16384
Bandwidth (MB/sec):   435.979
Average IOPS:         27902
Stddev IOPS:          476.47
Max IOPS:             28684
Min IOPS:             27494
Average Latency(s):   0.00915322
Max latency(s):       0.0639482
Min latency(s):       0.000305542

[1;32mlocalhost.localdomain	[2021-05-14T16:19:21,325916060-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3912150


[1;7;39;49m[2021-05-14T16:19:21,334106047-07:00][RUNNING][ROUND 1/3/40] object_size=64KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:19:21,341908097-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:19:21,358778460-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40233\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1729938\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e8531419-cb26-43e8-98f7-fca679e1050e\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid e8531419-cb26-43e8-98f7-fca679e1050e\nlast_changed 2021-05-14T16:19:51.645960-0700\ncreated 2021-05-14T16:19:51.645960-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40233/0,v1:10.10.1.2:40234/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1729938 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 d88bda86-dfd1-48da-914d-62ba1d1a638f\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 2fae6037-3f85-416e-9768-a591c17fa164\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 ce9e3468-2341-4949-8d4f-a46ef519df61\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42233\n  w/ user/pass: admin / 34c1beb4-f7c3-4df0-adfe-d1e67ccc419a\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:20:15 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40233
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1729938
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e8531419-cb26-43e8-98f7-fca679e1050e
setting min_mon_release = octopus
epoch 0
fsid e8531419-cb26-43e8-98f7-fca679e1050e
last_changed 2021-05-14T16:19:51.645960-0700
created 2021-05-14T16:19:51.645960-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40233/0,v1:10.10.1.2:40234/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1729938 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 d88bda86-dfd1-48da-914d-62ba1d1a638f
0
start osd.0
add osd1 2fae6037-3f85-416e-9768-a591c17fa164
1
start osd.1
add osd2 ce9e3468-2341-4949-8d4f-a46ef519df61
2
start osd.2


restful urls: https://10.10.1.2:42233
  w/ user/pass: admin / 34c1beb4-f7c3-4df0-adfe-d1e67ccc419a


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:19:23.452-0700 7f677c59a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:19:23.452-0700 7f677c59a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:19:23.472-0700 7fcb2650f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:19:23.472-0700 7fcb2650f1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40233,v1:10.10.1.2:40234] --print /tmp/ceph_monmap.1729938 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1729938 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1729938 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42233 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x562efe4b0000 @  0x7fa08d2d3680 0x7fa08d2f4824 0x7fa08da8f187 0x7fa08da97355 0x7fa08da8f708 0x7fa08da8f877 0x7fa08da90c24 0x7fa08daa8ec1 0x7fa08da1b5f3 0x7fa08da7ce97 0x7fa08da84b1a 0x7fa08d187d84 0x7fa08d2a3609 0x7fa08ce77103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.0WY30RiNJk 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d88bda86-dfd1-48da-914d-62ba1d1a638f -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQClBZ9ga8V9NxAAUvjPI/LRHDryLnxKSR6lDQ== --osd-uuid d88bda86-dfd1-48da-914d-62ba1d1a638f 
2021-05-14T16:20:06.733-0700 7f998dc40f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:20:06.753-0700 7f998dc40f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:20:06.753-0700 7f998dc40f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56378cc84000 @  0x7f998e609680 0x7f998e62a824 0x563782d2a447 0x563782d324b5 0x563782d2a9c8 0x563782d2ab37 0x563782d2bee4 0x563782afcca1 0x563782cd4423 0x563782aed2a7 0x563782af253a 0x7f998e15cd84 0x7f998e2e1609 0x7f998de4a103
2021-05-14T16:20:07.165-0700 7f998dc40f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 2fae6037-3f85-416e-9768-a591c17fa164 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5644fe838000 @  0x7ffbfc962680 0x7ffbfc983824 0x5644f430b447 0x5644f43134b5 0x5644f430b9c8 0x5644f430bb37 0x5644f430cee4 0x5644f40ddca1 0x5644f42b5423 0x5644f40ce2a7 0x5644f40d353a 0x7ffbfc4b5d84 0x7ffbfc63a609 0x7ffbfc1a3103
2021-05-14T16:20:07.929-0700 7ffbfbf99f00 -1 Falling back to public interface
2021-05-14T16:20:08.277-0700 7ffbfbf99f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCnBZ9gxvfmHxAAb05daiqbvFHTWQg8gwwZlw== --osd-uuid 2fae6037-3f85-416e-9768-a591c17fa164 
2021-05-14T16:20:08.317-0700 7f2c783b5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:20:08.337-0700 7f2c783b5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:20:08.337-0700 7f2c783b5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55d804eb8000 @  0x7f2c78d7e680 0x7f2c78d9f824 0x55d7f998a447 0x55d7f99924b5 0x55d7f998a9c8 0x55d7f998ab37 0x55d7f998bee4 0x55d7f975cca1 0x55d7f9934423 0x55d7f974d2a7 0x55d7f975253a 0x7f2c788d1d84 0x7f2c78a56609 0x7f2c785bf103
2021-05-14T16:20:08.717-0700 7f2c783b5f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new ce9e3468-2341-4949-8d4f-a46ef519df61 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5632b606a000 @  0x7f6ba51ba680 0x7f6ba51db824 0x5632ab867447 0x5632ab86f4b5 0x5632ab8679c8 0x5632ab867b37 0x5632ab868ee4 0x5632ab639ca1 0x5632ab811423 0x5632ab62a2a7 0x5632ab62f53a 0x7f6ba4d0dd84 0x7f6ba4e92609 0x7f6ba49fb103
2021-05-14T16:20:09.465-0700 7f6ba47f1f00 -1 Falling back to public interface
2021-05-14T16:20:09.849-0700 7f6ba47f1f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCpBZ9gseyyBBAATZZCOmDjwkl30xvafR/5MQ== --osd-uuid ce9e3468-2341-4949-8d4f-a46ef519df61 
2021-05-14T16:20:09.881-0700 7f96066d3f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:20:09.901-0700 7f96066d3f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:20:09.901-0700 7f96066d3f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55f8ec8f2000 @  0x7f960709c680 0x7f96070bd824 0x55f8e0e20447 0x55f8e0e284b5 0x55f8e0e209c8 0x55f8e0e20b37 0x55f8e0e21ee4 0x55f8e0bf2ca1 0x55f8e0dca423 0x55f8e0be32a7 0x55f8e0be853a 0x7f9606befd84 0x7f9606d74609 0x7f96068dd103
2021-05-14T16:20:10.321-0700 7f96066d3f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5630adcb0000 @  0x7f4882ec2680 0x7f4882ee3824 0x5630a2dc9447 0x5630a2dd14b5 0x5630a2dc99c8 0x5630a2dc9b37 0x5630a2dcaee4 0x5630a2b9bca1 0x5630a2d73423 0x5630a2b8c2a7 0x5630a2b9153a 0x7f4882a15d84 0x7f4882b9a609 0x7f4882703103
2021-05-14T16:20:11.049-0700 7f48824f9f00 -1 Falling back to public interface
2021-05-14T16:20:11.393-0700 7f48824f9f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:20:15,224978730-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:20:15,245769202-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:20:15,328044286-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:15,334429495-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:17.096+0000 ffff7f6121e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:17.933+0000 ffff7f6121e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:20:19,353789644-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:19,360810736-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:21.185+0000 ffff7d2c91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:22.009+0000 ffff7d2c91e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:20:23,418810622-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:23,425274505-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:25.082+0000 ffff8bed01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:25.918+0000 ffff8bed01e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:20:27,356801799-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:27,363065623-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:29.030+0000 ffffb1fe71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:29.871+0000 ffffb1fe71e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:32.959+0000 ffff824961e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:33.799+0000 ffff824961e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:20:35,228792455-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:35,235081768-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:37.116+0000 ffff796261e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:37.952+0000 ffff796261e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:20:39,985181122-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:39,991810588-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:41.673+0000 ffff772781e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:42.549+0000 ffff772781e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:20:44,628488227-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:44,634685739-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:46.281+0000 ffff8b1161e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:47.114+0000 ffff8b1161e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:20:48,972923728-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:48,979516603-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:50.822+0000 ffff98a5f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:51.662+0000 ffff98a5f1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:20:53,608592358-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:53,615669095-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:55.295+0000 ffff76f511e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:20:56.123+0000 ffff75cef1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:20:57,809520148-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:20:57,815604300-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:20:59.472+0000 ffff9df5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:21:00.304+0000 ffff9df5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:21:02,288863974-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:21:02,295233536-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:21:04.236+0000 ffff8a5c21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:21:05.085+0000 ffff8a5c21e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:21:06,413092023-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:21:06,419488679-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:21:08.429+0000 ffff824f21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:21:09.241+0000 ffff824f21e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  196 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:21:10,708687389-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:21:34,875332096-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:21:44,345462829-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:21:53,471015268-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:02,590222798-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:11,796046105-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   238 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:11,812025001-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:21,405570607-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:21,422065892-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:30,526599973-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:30,542946911-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:39,679009966-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:39,695193989-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:48,871567073-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:48,888002555-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:48,901152752-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:22:48,908800237-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:22:48,926582352-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3922648
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T16:22:48,941175875-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T16:22:48,981322184-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:22:48,987831721-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '65536', '-O', '65536', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:22:50.515+0000 ffff8d232010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:22:51.347+0000 ffff8d232010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:22:51.347+0000 ffff8d232010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:22:51.369198+0000 Maintaining 256 concurrent writes of 65536 bytes to objects of size 65536 for up to 20 seconds or 0 objects
2021-05-14T23:22:51.369243+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:22:51.382532+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:22:51.382532+0000     0       0         0         0         0         0           -           0
2021-05-14T23:22:52.382709+0000     1     255     10409     10154   634.585   634.625   0.0326447   0.0247369
2021-05-14T23:22:53.382929+0000     2     255     19885     19630   613.351    592.25   0.0331074   0.0257489
2021-05-14T23:22:54.383105+0000     3     255     29406     29151   607.219   595.062   0.0207092   0.0260413
2021-05-14T23:22:55.383271+0000     4     255     39675     39420   615.841   641.812   0.0263218   0.0258613
2021-05-14T23:22:56.383451+0000     5     256     47531     47275   590.842   490.938   0.0014168   0.0268172
2021-05-14T23:22:57.383613+0000     6     255     52034     51779   539.278     281.5    0.157071   0.0291978
2021-05-14T23:22:58.383781+0000     7     255     55007     54752   488.778   185.812    0.147831   0.0322172
2021-05-14T23:22:59.383949+0000     8     256     58018     57762   451.192   188.125  0.00168257   0.0350189
2021-05-14T23:23:00.384096+0000     9     256     62462     62206   431.916    277.75  0.00158102   0.0366923
2021-05-14T23:23:01.384252+0000    10     255     71337     71082   444.191    554.75  0.00847159   0.0359425
2021-05-14T23:23:02.384438+0000    11     256     79508     79252   450.222   510.625  0.00648283   0.0353724
2021-05-14T23:23:03.384638+0000    12     256     88267     88011   458.315   547.438   0.0357077   0.0348434
2021-05-14T23:23:04.384834+0000    13     256     97796     97540   468.863   595.562  0.00122318   0.0339181
2021-05-14T23:23:05.385006+0000    14     256    107463    107207   478.522   604.188  0.00920751   0.0333833
2021-05-14T23:23:06.385190+0000    15     255    116970    116715    486.23    594.25   0.0152431   0.0328652
2021-05-14T23:23:07.385389+0000    16     255    127194    126939    495.77       639   0.0359594   0.0322325
2021-05-14T23:23:08.385574+0000    17     255    136341    136086    500.23   571.688  0.00443339   0.0319251
2021-05-14T23:23:09.385846+0000    18     256    145305    145049   503.553   560.188    0.028129   0.0317299
2021-05-14T23:23:10.386041+0000    19     256    154526    154270   507.376   576.312   0.0339943   0.0314969
2021-05-14T23:23:11.386224+0000 min lat: 0.00103215 max lat: 0.3686 avg lat: 0.031112
2021-05-14T23:23:11.386224+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:23:11.386224+0000    20     216    164598    164382   513.602       632   0.0195601    0.031112
2021-05-14T23:23:12.386527+0000 Total time run:         20.0349
Total writes made:      164598
Write size:             65536
Object size:            65536
Bandwidth (MB/sec):     513.473
Stddev Bandwidth:       150.576
Max bandwidth (MB/sec): 641.812
Min bandwidth (MB/sec): 185.812
Average IOPS:           8215
Stddev IOPS:            2409.22
Max IOPS:               10269
Min IOPS:               2973
Average Latency(s):     0.0311174
Stddev Latency(s):      0.03244
Max latency(s):         0.3686
Min latency(s):         0.00103215

[1;32mlocalhost.localdomain	[2021-05-14T16:23:13,053393635-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3922648


[1;33mlocalhost.localdomain	[2021-05-14T16:23:13,061750396-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:23:37,251078500-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 164.60k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:23:37,267907436-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:23:46,659883234-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 164.60k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:23:46,676656375-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:23:55,957711399-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 164.60k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:23:55,974578876-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:24:05,104345261-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 164.60k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:24:05,120782103-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:24:14,397657086-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 164.60k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:24:14,414228846-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:24:14,427352694-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:24:14,435296628-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:24:14,453002133-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3926176
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T16:24:14,467876604-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T16:24:14,506710187-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:24:14,513248197-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fa540820-25d1-49aa-aeeb-52e9a827fb0d', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fa540820-25d1-49aa-aeeb-52e9a827fb0d --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UnTfIV:/tmp/ceph-asok.UnTfIV -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:24:16.014+0000 ffffb7515010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:24:16.866+0000 ffffb7515010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:24:16.866+0000 ffffb7515010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:24:16.888569+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:24:16.888569+0000     0      11        11         0         0         0           -           0
2021-05-14T23:24:17.888958+0000     1     255     17927     17672    1103.5    1104.5   0.0148311   0.0143302
2021-05-14T23:24:18.889168+0000     2     255     35670     35415    1106.1   1108.94   0.0143411   0.0143684
2021-05-14T23:24:19.889415+0000     3     255     52686     52431   1091.82    1063.5   0.0144089   0.0145792
2021-05-14T23:24:20.889614+0000     4     255     68855     68600   1071.46   1010.56    0.014186   0.0148692
2021-05-14T23:24:21.889803+0000     5     255     86680     86425   1079.93   1114.06   0.0140434   0.0147593
2021-05-14T23:24:22.890001+0000     6     255    104619    104364   1086.77   1121.19   0.0145878   0.0146706
2021-05-14T23:24:23.890190+0000     7     255    121181    120926   1079.37   1035.12   0.0141938    0.014775
2021-05-14T23:24:24.890396+0000     8     255    138913    138658   1082.95   1108.25   0.0141894   0.0147289
2021-05-14T23:24:25.890579+0000     9     255    155032    154777   1074.54   1007.44   0.0121676   0.0148434
2021-05-14T23:24:26.890823+0000 Total time run:       9.555
Total reads made:     164598
Read size:            65536
Object size:          65536
Bandwidth (MB/sec):   1076.65
Average IOPS:         17226
Stddev IOPS:          742.442
Max IOPS:             17939
Min IOPS:             16119
Average Latency(s):   0.0148233
Max latency(s):       0.0593407
Min latency(s):       0.000383407

[1;32mlocalhost.localdomain	[2021-05-14T16:24:27,542017010-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3926176


[1;7;39;49m[2021-05-14T16:24:27,547798019-07:00][RUNNING][ROUND 2/3/40] object_size=64KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:24:27,556037668-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:24:27,572947735-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40497\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1733017\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5840b41c-3379-40dc-afd1-955372d25b4d\nsetting min_mon_release = octopus\nepoch 0\nfsid 5840b41c-3379-40dc-afd1-955372d25b4d\nlast_changed 2021-05-14T16:24:57.666107-0700\ncreated 2021-05-14T16:24:57.666107-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40497/0,v1:10.10.1.2:40498/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1733017 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 1fb779bd-28f8-4094-bb1f-09fa37bae53a\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 6ce252db-02ac-45e5-9f67-2662facd4c9c\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 aeb3e46c-b795-4475-bdce-fcf44e44b90c\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42497\n  w/ user/pass: admin / fb9811a5-39d0-4d84-9c3a-597f66263dbf\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:25:21 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40497
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1733017
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5840b41c-3379-40dc-afd1-955372d25b4d
setting min_mon_release = octopus
epoch 0
fsid 5840b41c-3379-40dc-afd1-955372d25b4d
last_changed 2021-05-14T16:24:57.666107-0700
created 2021-05-14T16:24:57.666107-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40497/0,v1:10.10.1.2:40498/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1733017 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 1fb779bd-28f8-4094-bb1f-09fa37bae53a
0
start osd.0
add osd1 6ce252db-02ac-45e5-9f67-2662facd4c9c
1
start osd.1
add osd2 aeb3e46c-b795-4475-bdce-fcf44e44b90c
2
start osd.2


restful urls: https://10.10.1.2:42497
  w/ user/pass: admin / fb9811a5-39d0-4d84-9c3a-597f66263dbf


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:24:29.807-0700 7fa7065951c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:24:29.807-0700 7fa7065951c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:24:29.827-0700 7f14a04df1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:24:29.827-0700 7f14a04df1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40497,v1:10.10.1.2:40498] --print /tmp/ceph_monmap.1733017 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1733017 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1733017 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42497 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55b54abf0000 @  0x7f9175c94680 0x7f9175cb5824 0x7f9176450187 0x7f9176458355 0x7f9176450708 0x7f9176450877 0x7f9176451c24 0x7f9176469ec1 0x7f91763dc5f3 0x7f917643de97 0x7f9176445b1a 0x7f9175b48d84 0x7f9175c64609 0x7f9175838103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.UhwwqrsQ7q 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 1fb779bd-28f8-4094-bb1f-09fa37bae53a -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDXBp9gxF36LhAADft9D3/JblBAs1Du1Wjxhw== --osd-uuid 1fb779bd-28f8-4094-bb1f-09fa37bae53a 
2021-05-14T16:25:12.603-0700 7f7b57ab5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:25:12.627-0700 7f7b57ab5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:25:12.627-0700 7f7b57ab5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x560b84b2a000 @  0x7f7b5847e680 0x7f7b5849f824 0x560b794a0447 0x560b794a84b5 0x560b794a09c8 0x560b794a0b37 0x560b794a1ee4 0x560b79272ca1 0x560b7944a423 0x560b792632a7 0x560b7926853a 0x7f7b57fd1d84 0x7f7b58156609 0x7f7b57cbf103
2021-05-14T16:25:13.051-0700 7f7b57ab5f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 6ce252db-02ac-45e5-9f67-2662facd4c9c -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5612a3d64000 @  0x7f4bdb3c6680 0x7f4bdb3e7824 0x561299596447 0x56129959e4b5 0x5612995969c8 0x561299596b37 0x561299597ee4 0x561299368ca1 0x561299540423 0x5612993592a7 0x56129935e53a 0x7f4bdaf19d84 0x7f4bdb09e609 0x7f4bdac07103
2021-05-14T16:25:13.843-0700 7f4bda9fdf00 -1 Falling back to public interface
2021-05-14T16:25:14.199-0700 7f4bda9fdf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDZBp9gytMYGhAAkBJBazlEmWO5c9k/FX7m6A== --osd-uuid 6ce252db-02ac-45e5-9f67-2662facd4c9c 
2021-05-14T16:25:14.227-0700 7f0c8aa0cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:25:14.251-0700 7f0c8aa0cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:25:14.251-0700 7f0c8aa0cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x555730b88000 @  0x7f0c8b3d5680 0x7f0c8b3f6824 0x55572698e447 0x5557269964b5 0x55572698e9c8 0x55572698eb37 0x55572698fee4 0x555726760ca1 0x555726938423 0x5557267512a7 0x55572675653a 0x7f0c8af28d84 0x7f0c8b0ad609 0x7f0c8ac16103
2021-05-14T16:25:14.631-0700 7f0c8aa0cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new aeb3e46c-b795-4475-bdce-fcf44e44b90c -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x562f18c7a000 @  0x7f4311220680 0x7f4311241824 0x562f0e46a447 0x562f0e4724b5 0x562f0e46a9c8 0x562f0e46ab37 0x562f0e46bee4 0x562f0e23cca1 0x562f0e414423 0x562f0e22d2a7 0x562f0e23253a 0x7f4310d73d84 0x7f4310ef8609 0x7f4310a61103
2021-05-14T16:25:15.447-0700 7f4310857f00 -1 Falling back to public interface
2021-05-14T16:25:15.799-0700 7f4310857f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDbBp9gfmsbBBAAgQmw+RzZJ6BajeF7QaoaMQ== --osd-uuid aeb3e46c-b795-4475-bdce-fcf44e44b90c 
2021-05-14T16:25:15.883-0700 7f74c08b7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:25:15.903-0700 7f74c08b7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:25:15.903-0700 7f74c08b7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55920503a000 @  0x7f74c1280680 0x7f74c12a1824 0x5591fa649447 0x5591fa6514b5 0x5591fa6499c8 0x5591fa649b37 0x5591fa64aee4 0x5591fa41bca1 0x5591fa5f3423 0x5591fa40c2a7 0x5591fa41153a 0x7f74c0dd3d84 0x7f74c0f58609 0x7f74c0ac1103
2021-05-14T16:25:16.295-0700 7f74c08b7f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x564709be6000 @  0x7f6ffa7c0680 0x7f6ffa7e1824 0x5646fecb3447 0x5646fecbb4b5 0x5646fecb39c8 0x5646fecb3b37 0x5646fecb4ee4 0x5646fea85ca1 0x5646fec5d423 0x5646fea762a7 0x5646fea7b53a 0x7f6ffa313d84 0x7f6ffa498609 0x7f6ffa001103
2021-05-14T16:25:17.027-0700 7f6ff9df7f00 -1 Falling back to public interface
2021-05-14T16:25:17.371-0700 7f6ff9df7f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:25:21,253880585-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:25:21,274839638-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:25:21,357163229-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:21,363328213-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:23.053+0000 ffffb22321e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:23.893+0000 ffffb22321e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:25:25,274345533-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:25,280485928-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:27.054+0000 ffff93d491e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:27.866+0000 ffff92ae71e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:25:29,270993248-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:29,277604454-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:31.051+0000 ffff7f2661e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:31.871+0000 ffff7f2661e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:25:33,199527400-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:33,205773218-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:34.895+0000 ffffb444b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:35.719+0000 ffffb444b1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:39.020+0000 ffff782e51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:39.840+0000 ffff782e51e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:25:41,390503524-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:41,396866002-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:43.069+0000 ffff8d9c61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:43.905+0000 ffff8d9c61e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:25:45,437673883-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:45,444066246-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:47.129+0000 ffff8bb6c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:47.961+0000 ffff8bb6c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:25:50,143161372-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:50,149657118-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:51.830+0000 ffff8f6841e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:52.674+0000 ffff8f6841e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:25:54,453947423-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:54,460454721-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:25:56.235+0000 ffffa5e9a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:25:57.059+0000 ffffa4c381e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:25:58,769719333-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:25:58,775888532-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:26:00.444+0000 ffffac17e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:26:01.300+0000 ffffaaf1c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:26:03,130405287-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:26:03,136976795-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:26:04.980+0000 ffff9ea291e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:26:05.812+0000 ffff9d7c71e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:26:07,619878255-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:26:07,626168000-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:26:09.477+0000 ffff9fef01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:26:10.317+0000 ffff9fef01e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 23 lfor 0/0/23 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:26:11,942129684-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:26:11,948415243-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:26:13.614+0000 ffffab0391e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:26:14.442+0000 ffffab0391e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  194 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  194 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   69 KiB   0 B   0 B   0 B  100 GiB     0  1.07   89      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.91   90      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02   80      up          osd.2  
                       TOTAL  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.91/1.07  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:26:15,754825743-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:26:39,908669390-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:26:49,170052053-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:26:58,295062672-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:07,471054667-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:16,541504887-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:16,557850188-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:25,823479088-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:25,841062807-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:35,347651569-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:35,364258874-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:44,876371252-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:44,893041808-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:54,019358091-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:54,036010629-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:54,049309203-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:27:54,057212699-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:27:54,074782780-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3936802
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T16:27:54,089778387-07:00] INFO: > Run rados bench[0m
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_write.log.2
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
[1;30mlocalhost.localdomain	[2021-05-14T16:27:54,129619502-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:27:54,136291375-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '65536', '-O', '65536', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:27:55.719+0000 ffff8d3a2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:27:56.536+0000 ffff8d3a2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:27:56.536+0000 ffff8d3a2010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:27:56.555338+0000 Maintaining 256 concurrent writes of 65536 bytes to objects of size 65536 for up to 20 seconds or 0 objects
2021-05-14T23:27:56.555383+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:27:56.568848+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:27:56.568848+0000     0       0         0         0         0         0           -           0
2021-05-14T23:27:57.569047+0000     1     255      8987      8732   545.711    545.75   0.0296574    0.028651
2021-05-14T23:27:58.569254+0000     2     255     17698     17443   545.018   544.438   0.0307515   0.0290949
2021-05-14T23:27:59.569455+0000     3     256     26503     26247   546.725    550.25   0.0301699   0.0290477
2021-05-14T23:28:00.569627+0000     4     256     32399     32143   502.152     368.5   0.0159181    0.031568
2021-05-14T23:28:01.569807+0000     5     256     36504     36248   453.025   256.562  0.00112662   0.0348396
2021-05-14T23:28:02.569979+0000     6     256     37403     37147   386.883   56.1875  0.00136642   0.0397258
2021-05-14T23:28:03.570167+0000     7     255     40076     39821   355.484   167.125   0.0193105   0.0449005
2021-05-14T23:28:04.570358+0000     8     256     47871     47615   371.928   487.125   0.0396792   0.0428925
2021-05-14T23:28:05.570560+0000     9     255     55848     55593   385.994   498.625   0.0627367   0.0412999
2021-05-14T23:28:06.570785+0000    10     255     64877     64622   403.814   564.312   0.0177134   0.0395206
2021-05-14T23:28:07.570971+0000    11     256     73713     73457   417.294   552.188   0.0481674   0.0382582
2021-05-14T23:28:08.571132+0000    12     256     81103     80847   421.002   461.875  0.00140096   0.0376399
2021-05-14T23:28:09.571283+0000    13     256     89743     89487    430.15       540   0.0489966   0.0371175
2021-05-14T23:28:10.571449+0000    14     255     97168     96913   432.571   464.125   0.0856531   0.0368022
2021-05-14T23:28:11.571606+0000    15     255    106016    105761   440.594       553   0.0147719   0.0362452
2021-05-14T23:28:12.571765+0000    16     255    114477    114222   446.102   528.812   0.0266679    0.035819
2021-05-14T23:28:13.571961+0000    17     256    123253    122997   452.115   548.438   0.0426277   0.0353312
2021-05-14T23:28:14.572138+0000    18     255    132040    131785   457.506    549.25   0.0205494   0.0349358
2021-05-14T23:28:15.572338+0000    19     256    140083    139827   459.876   502.625    0.028276   0.0347479
2021-05-14T23:28:16.572504+0000 min lat: 0.0010173 max lat: 0.779344 avg lat: 0.0345786
2021-05-14T23:28:16.572504+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:28:16.572504+0000    20     235    148102    147867   462.003     502.5   0.0116323   0.0345786
2021-05-14T23:28:17.572784+0000 Total time run:         20.0936
Total writes made:      148102
Write size:             65536
Object size:            65536
Bandwidth (MB/sec):     460.664
Stddev Bandwidth:       141.786
Max bandwidth (MB/sec): 564.312
Min bandwidth (MB/sec): 56.1875
Average IOPS:           7370
Stddev IOPS:            2268.58
Max IOPS:               9029
Min IOPS:               899
Average Latency(s):     0.0346689
Stddev Latency(s):      0.0466438
Max latency(s):         0.779344
Min latency(s):         0.0010173

[1;32mlocalhost.localdomain	[2021-05-14T16:28:18,206415290-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3936802


[1;33mlocalhost.localdomain	[2021-05-14T16:28:18,215005663-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:28:42,711961463-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 148.10k objects, 9.0 GiB
    usage:   18 GiB used, 282 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:28:42,729046523-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:28:51,709679620-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 148.10k objects, 9.0 GiB
    usage:   18 GiB used, 282 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:28:51,726781797-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:00,879686053-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 148.10k objects, 9.0 GiB
    usage:   18 GiB used, 282 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:00,896822616-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:10,138499736-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 148.10k objects, 9.0 GiB
    usage:   18 GiB used, 282 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:10,155719128-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:19,292980389-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 148.10k objects, 9.0 GiB
    usage:   18 GiB used, 282 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:19,309902504-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:19,323214939-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:29:19,331204308-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:29:19,349468689-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3940362
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T16:29:19,364303751-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T16:29:19,404025738-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:29:19,410643586-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid fd6f2c6f-6fbf-4f0d-a7cd-7f63630e55b7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8hOINW:/tmp/ceph-asok.8hOINW -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:29:21.090+0000 ffff9fce2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:29:21.934+0000 ffff9fce2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:29:21.934+0000 ffff9fce2010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:29:21.958419+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:29:21.958419+0000     0       0         0         0         0         0           -           0
2021-05-14T23:29:22.958576+0000     1     255     17708     17453   1090.48   1090.81   0.0143901   0.0145073
2021-05-14T23:29:23.958759+0000     2     255     34997     34742   1085.42   1080.56   0.0139698   0.0146442
2021-05-14T23:29:24.958932+0000     3     255     52675     52420   1091.84   1104.88   0.0142576   0.0145796
2021-05-14T23:29:25.959115+0000     4     255     70610     70355   1099.07   1120.94   0.0136846   0.0144965
2021-05-14T23:29:26.959290+0000     5     255     87964     87709   1096.14   1084.62   0.0173237   0.0145386
2021-05-14T23:29:27.959467+0000     6     255    105400    105145   1095.04   1089.75   0.0145324     0.01456
2021-05-14T23:29:28.959687+0000     7     255    122962    122707   1095.38   1097.62   0.0145725   0.0145588
2021-05-14T23:29:29.959938+0000     8     255    140547    140292    1095.8   1099.06   0.0147854   0.0145552
2021-05-14T23:29:30.960173+0000 Total time run:       8.47277
Total reads made:     148102
Read size:            65536
Object size:          65536
Bandwidth (MB/sec):   1092.49
Average IOPS:         17479
Stddev IOPS:          204.751
Max IOPS:             17935
Min IOPS:             17289
Average Latency(s):   0.0146071
Max latency(s):       0.0310723
Min latency(s):       0.00102826

[1;32mlocalhost.localdomain	[2021-05-14T16:29:31,621281108-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3940362


[1;7;39;49m[2021-05-14T16:29:31,627043689-07:00][RUNNING][ROUND 3/3/40] object_size=64KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:29:31,635197261-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:29:31,652129923-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40658\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1736105\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 9990039b-1787-4e2e-9906-990597aaf1df\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 9990039b-1787-4e2e-9906-990597aaf1df\nlast_changed 2021-05-14T16:30:02.665857-0700\ncreated 2021-05-14T16:30:02.665857-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40658/0,v1:10.10.1.2:40659/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1736105 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 d93b56dd-6de2-44bc-97d0-7765c6a4c0ae\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 d7fd1711-30f7-4c38-8a8f-ccc405275d03\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 7514d2b0-d6d0-4869-b47a-a9e72a892b64\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42658\n  w/ user/pass: admin / b7a4501d-85c3-4bad-88ea-ca9bc2acebde\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:30:25 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40658
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1736105
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 9990039b-1787-4e2e-9906-990597aaf1df
setting min_mon_release = octopus
epoch 0
fsid 9990039b-1787-4e2e-9906-990597aaf1df
last_changed 2021-05-14T16:30:02.665857-0700
created 2021-05-14T16:30:02.665857-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40658/0,v1:10.10.1.2:40659/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1736105 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 d93b56dd-6de2-44bc-97d0-7765c6a4c0ae
0
start osd.0
add osd1 d7fd1711-30f7-4c38-8a8f-ccc405275d03
1
start osd.1
add osd2 7514d2b0-d6d0-4869-b47a-a9e72a892b64
2
start osd.2


restful urls: https://10.10.1.2:42658
  w/ user/pass: admin / b7a4501d-85c3-4bad-88ea-ca9bc2acebde


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:29:33.994-0700 7f61903851c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:29:33.994-0700 7f61903851c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:29:34.014-0700 7f54400ef1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:29:34.014-0700 7f54400ef1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40658,v1:10.10.1.2:40659] --print /tmp/ceph_monmap.1736105 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1736105 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1736105 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42658 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55941e0e6000 @  0x7f76abe3a680 0x7f76abe5b824 0x7f76ac5f6187 0x7f76ac5fe355 0x7f76ac5f6708 0x7f76ac5f6877 0x7f76ac5f7c24 0x7f76ac60fec1 0x7f76ac5825f3 0x7f76ac5e3e97 0x7f76ac5ebb1a 0x7f76abceed84 0x7f76abe0a609 0x7f76ab9de103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.HwHF4q1DGV 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d93b56dd-6de2-44bc-97d0-7765c6a4c0ae -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAICJ9g9jfzIhAAYglutueS62BO4EH3dAzQtg== --osd-uuid d93b56dd-6de2-44bc-97d0-7765c6a4c0ae 
2021-05-14T16:30:17.382-0700 7f9f1bf17f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:30:17.402-0700 7f9f1bf17f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:30:17.402-0700 7f9f1bf17f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5649d0cd2000 @  0x7f9f1c8e0680 0x7f9f1c901824 0x5649c5a69447 0x5649c5a714b5 0x5649c5a699c8 0x5649c5a69b37 0x5649c5a6aee4 0x5649c583bca1 0x5649c5a13423 0x5649c582c2a7 0x5649c583153a 0x7f9f1c433d84 0x7f9f1c5b8609 0x7f9f1c121103
2021-05-14T16:30:17.810-0700 7f9f1bf17f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d7fd1711-30f7-4c38-8a8f-ccc405275d03 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55dbac02a000 @  0x7fde5714f680 0x7fde57170824 0x55dba1111447 0x55dba11194b5 0x55dba11119c8 0x55dba1111b37 0x55dba1112ee4 0x55dba0ee3ca1 0x55dba10bb423 0x55dba0ed42a7 0x55dba0ed953a 0x7fde56ca2d84 0x7fde56e27609 0x7fde56990103
2021-05-14T16:30:18.626-0700 7fde56786f00 -1 Falling back to public interface
2021-05-14T16:30:18.974-0700 7fde56786f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAKCJ9gDIStDRAAKjtHJE8E89E9YxxEALFK4g== --osd-uuid d7fd1711-30f7-4c38-8a8f-ccc405275d03 
2021-05-14T16:30:19.022-0700 7fbdad908f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:30:19.042-0700 7fbdad908f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:30:19.042-0700 7fbdad908f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x565005dd0000 @  0x7fbdae2d1680 0x7fbdae2f2824 0x564ffa90f447 0x564ffa9174b5 0x564ffa90f9c8 0x564ffa90fb37 0x564ffa910ee4 0x564ffa6e1ca1 0x564ffa8b9423 0x564ffa6d22a7 0x564ffa6d753a 0x7fbdade24d84 0x7fbdadfa9609 0x7fbdadb12103
2021-05-14T16:30:19.422-0700 7fbdad908f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7514d2b0-d6d0-4869-b47a-a9e72a892b64 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5653197ec000 @  0x7fd8004a5680 0x7fd8004c6824 0x56530e379447 0x56530e3814b5 0x56530e3799c8 0x56530e379b37 0x56530e37aee4 0x56530e14bca1 0x56530e323423 0x56530e13c2a7 0x56530e14153a 0x7fd7ffff8d84 0x7fd80017d609 0x7fd7ffce6103
2021-05-14T16:30:20.202-0700 7fd7ffadcf00 -1 Falling back to public interface
2021-05-14T16:30:20.546-0700 7fd7ffadcf00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQALCJ9gfjOZMRAAtdRerCk5g5tyHNNPO80R8g== --osd-uuid 7514d2b0-d6d0-4869-b47a-a9e72a892b64 
2021-05-14T16:30:20.610-0700 7f584a634f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:30:20.630-0700 7f584a634f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:30:20.630-0700 7f584a634f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x556b29e68000 @  0x7f584affd680 0x7f584b01e824 0x556b1ec78447 0x556b1ec804b5 0x556b1ec789c8 0x556b1ec78b37 0x556b1ec79ee4 0x556b1ea4aca1 0x556b1ec22423 0x556b1ea3b2a7 0x556b1ea4053a 0x7f584ab50d84 0x7f584acd5609 0x7f584a83e103
2021-05-14T16:30:21.018-0700 7f584a634f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d240f08000 @  0x7fede6a4b680 0x7fede6a6c824 0x55d2350d2447 0x55d2350da4b5 0x55d2350d29c8 0x55d2350d2b37 0x55d2350d3ee4 0x55d234ea4ca1 0x55d23507c423 0x55d234e952a7 0x55d234e9a53a 0x7fede659ed84 0x7fede6723609 0x7fede628c103
2021-05-14T16:30:21.734-0700 7fede6082f00 -1 Falling back to public interface
2021-05-14T16:30:22.070-0700 7fede6082f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:30:25,979388073-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:30:26,000102703-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:30:26,092617213-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:26,099316644-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:28.138+0000 ffff78a611e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:28.998+0000 ffff78a611e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:30:30,381605615-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:30,387785732-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:32.306+0000 ffffa20791e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:33.155+0000 ffffa0e171e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:30:34,660687617-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:34,667726827-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:36.323+0000 ffffa4c001e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:37.151+0000 ffffa4c001e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:30:38,596171438-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:38,602360316-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:40.244+0000 ffff9985b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:41.092+0000 ffff9985b1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:44.172+0000 ffff9f2171e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:44.997+0000 ffff9dfb51e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:30:46,372000298-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:46,378389656-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:48.165+0000 ffff80b291e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:49.025+0000 ffff80b291e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:30:50,514983369-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:50,521137112-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:52.246+0000 ffff9b0f81e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:53.102+0000 ffff99e961e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:30:55,525584633-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:30:55,532069932-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:30:57.211+0000 ffffa47b01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:30:58.087+0000 ffffa47b01e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:31:00,531483505-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:31:00,537622425-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:31:02.252+0000 ffffaaf301e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:31:03.092+0000 ffffaaf301e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:31:05,270573094-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:31:05,277170897-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:31:06.940+0000 ffff8f7691e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:31:07.784+0000 ffff8f7691e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:31:09,288905122-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:31:09,295469710-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:31:10.997+0000 ffff905d71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:31:11.841+0000 ffff8f3751e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:31:13,653302111-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:31:13,659462785-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:31:15.370+0000 ffffa4fe21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:31:16.186+0000 ffffa4fe21e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:31:17,509113177-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:31:17,515273655-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:31:19.454+0000 ffff90d421e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:31:20.271+0000 ffff8b59e1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93  143      up          osd.2  
                       TOTAL  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:31:21,818005748-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:31:46,025119979-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:31:55,648338737-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:04,785319366-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:13,968691074-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:23,088799032-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   239 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:23,106016783-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:32,427279120-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:32,444844061-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:41,524280095-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:41,541107329-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:50,826867960-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:32:50,844198515-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:00,181627625-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:00,198796631-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:00,212730498-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:33:00,220796287-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:00,239547675-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3950997
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T16:33:00,255246939-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_write.log.3
[1;30mlocalhost.localdomain	[2021-05-14T16:33:00,295071064-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:33:00,301598264-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '65536', '-O', '65536', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:33:01.816+0000 ffffbe522010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:33:02.620+0000 ffffbe522010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:33:02.624+0000 ffffbe522010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:33:02.641543+0000 Maintaining 256 concurrent writes of 65536 bytes to objects of size 65536 for up to 20 seconds or 0 objects
2021-05-14T23:33:02.641587+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:33:02.655470+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:33:02.655470+0000     0       0         0         0         0         0           -           0
2021-05-14T23:33:03.655716+0000     1     255      8850      8595    537.12   537.188   0.0159453   0.0291207
2021-05-14T23:33:04.655979+0000     2     256     16665     16409   512.681   488.375   0.0135416   0.0308432
2021-05-14T23:33:05.656168+0000     3     255     24016     23761   494.925     459.5  0.00837076   0.0319323
2021-05-14T23:33:06.656356+0000     4     255     31309     31054   485.126   455.812   0.0477798   0.0327536
2021-05-14T23:33:07.656613+0000     5     255     39010     38755   484.338   481.312   0.0843799   0.0328324
2021-05-14T23:33:08.656841+0000     6     256     43938     43682   454.926   307.938  0.00149535   0.0349102
2021-05-14T23:33:09.657000+0000     7     256     47037     46781   417.603   193.688  0.00105008   0.0373952
2021-05-14T23:33:10.657178+0000     8     256     49095     48839   381.479   128.625    0.161063   0.0414775
2021-05-14T23:33:11.657389+0000     9     256     50944     50688    351.93   115.562   0.0152556   0.0452274
2021-05-14T23:33:12.657560+0000    10     256     52944     52688   329.235       125   0.0833723   0.0480943
2021-05-14T23:33:13.657724+0000    11     256     56958     56702   322.108   250.875  0.00560498   0.0494168
2021-05-14T23:33:14.657892+0000    12     255     62782     62527   325.599   364.062    0.058176   0.0489356
2021-05-14T23:33:15.658076+0000    13     255     68809     68554   329.523   376.688  0.00763708   0.0484677
2021-05-14T23:33:16.658283+0000    14     255     76635     76380   340.917   489.125   0.0148194   0.0468467
2021-05-14T23:33:17.658568+0000    15     256     84662     84406   351.622   501.625  0.00642901   0.0453976
2021-05-14T23:33:18.658793+0000    16     255     92497     92242   360.248    489.75   0.0478782   0.0443014
2021-05-14T23:33:19.658962+0000    17     256    100319    100063   367.806   488.812  0.00604244   0.0434224
2021-05-14T23:33:20.659165+0000    18     255    106531    106276   368.941   388.312   0.0350814   0.0433126
2021-05-14T23:33:21.659377+0000    19     256    113724    113468   373.176     449.5   0.0119419   0.0428034
2021-05-14T23:33:22.659569+0000 min lat: 0.000998766 max lat: 0.506129 avg lat: 0.0423678
2021-05-14T23:33:22.659569+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:33:22.659569+0000    20     204    120903    120699   377.109   451.938   0.0139218   0.0423678
2021-05-14T23:33:23.659836+0000 Total time run:         20.0331
Total writes made:      120903
Write size:             65536
Object size:            65536
Bandwidth (MB/sec):     377.197
Stddev Bandwidth:       140.351
Max bandwidth (MB/sec): 537.188
Min bandwidth (MB/sec): 115.562
Average IOPS:           6035
Stddev IOPS:            2245.62
Max IOPS:               8595
Min IOPS:               1849
Average Latency(s):     0.0423653
Stddev Latency(s):      0.0423796
Max latency(s):         0.506129
Min latency(s):         0.000998766

[1;32mlocalhost.localdomain	[2021-05-14T16:33:24,332017909-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3950997


[1;33mlocalhost.localdomain	[2021-05-14T16:33:24,340419725-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:48,615356066-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 120.90k objects, 7.4 GiB
    usage:   15 GiB used, 285 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:48,632722145-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:57,734242441-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 120.90k objects, 7.4 GiB
    usage:   15 GiB used, 285 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:33:57,751750985-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:07,027521421-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 120.90k objects, 7.4 GiB
    usage:   15 GiB used, 285 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:07,047246265-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:16,544966138-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 120.90k objects, 7.4 GiB
    usage:   15 GiB used, 285 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:16,561812678-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:25,677776280-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 120.90k objects, 7.4 GiB
    usage:   15 GiB used, 285 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:25,695323830-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:25,708879885-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:34:25,717153969-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:34:25,736008243-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3954506
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T16:34:25,751329306-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T16:34:25,790271695-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:34:25,796712195-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '6ec6c991-f3c4-4460-b521-9d1280ffc6c2', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 6ec6c991-f3c4-4460-b521-9d1280ffc6c2 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.AYVYjS:/tmp/ceph-asok.AYVYjS -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:34:27.299+0000 ffff9f73b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:34:28.111+0000 ffff9f73b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:34:28.111+0000 ffff9f73b010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:34:28.135933+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:34:28.135933+0000     0       0         0         0         0         0           -           0
2021-05-14T23:34:29.136138+0000     1     255     17577     17322   1082.26   1082.62   0.0146894   0.0146139
2021-05-14T23:34:30.136326+0000     2     255     35277     35022   1094.15   1106.25   0.0141907   0.0145264
2021-05-14T23:34:31.136558+0000     3     255     52483     52228   1087.81   1075.38   0.0147985   0.0146334
2021-05-14T23:34:32.136749+0000     4     255     70171     69916   1092.18    1105.5   0.0144698   0.0145866
2021-05-14T23:34:33.136947+0000     5     255     87852     87597   1094.71   1105.06   0.0144699   0.0145598
2021-05-14T23:34:34.137915+0000     6     255    105285    105030   1093.68   1089.56   0.0188846   0.0145723
2021-05-14T23:34:35.138167+0000 Total time run:       6.92269
Total reads made:     120903
Read size:            65536
Object size:          65536
Bandwidth (MB/sec):   1091.55
Average IOPS:         17464
Stddev IOPS:          214.739
Max IOPS:             17700
Min IOPS:             17206
Average Latency(s):   0.0146185
Max latency(s):       0.0381178
Min latency(s):       0.00310862

[1;32mlocalhost.localdomain	[2021-05-14T16:34:35,803497100-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3954506


[1;7;39;49m[2021-05-14T16:34:35,809052133-07:00][RUNNING][ROUND 4/3/40] object_size=64KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:34:35,817022219-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:34:35,834185793-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40182\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1739224\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 4912e77f-178f-491c-a664-290d005a858b\nsetting min_mon_release = octopus\nepoch 0\nfsid 4912e77f-178f-491c-a664-290d005a858b\nlast_changed 2021-05-14T16:35:06.169165-0700\ncreated 2021-05-14T16:35:06.169165-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40182/0,v1:10.10.1.2:40183/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1739224 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 fdf603b1-1ef2-4e1c-95f5-f7f8c9635b1f\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 2699c1de-a5d7-461c-9976-9b0e55ab5c38\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 30588a1f-ed46-4915-9c1c-c4a8da6dbfd0\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n\nrestful urls: https://10.10.1.2:42182\n  w/ user/pass: admin / 9be79b99-46a2-4582-b3ce-c12018653e26\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:35:28 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40182
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1739224
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 4912e77f-178f-491c-a664-290d005a858b
setting min_mon_release = octopus
epoch 0
fsid 4912e77f-178f-491c-a664-290d005a858b
last_changed 2021-05-14T16:35:06.169165-0700
created 2021-05-14T16:35:06.169165-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40182/0,v1:10.10.1.2:40183/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1739224 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 fdf603b1-1ef2-4e1c-95f5-f7f8c9635b1f
0
start osd.0
add osd1 2699c1de-a5d7-461c-9976-9b0e55ab5c38
1
start osd.1
add osd2 30588a1f-ed46-4915-9c1c-c4a8da6dbfd0
2
start osd.2


restful urls: https://10.10.1.2:42182
  w/ user/pass: admin / 9be79b99-46a2-4582-b3ce-c12018653e26


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:34:38.164-0700 7f87c4cfa1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:34:38.164-0700 7f87c4cfa1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:34:38.184-0700 7f91a64391c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:34:38.184-0700 7f91a64391c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40182,v1:10.10.1.2:40183] --print /tmp/ceph_monmap.1739224 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1739224 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1739224 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42182 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a20c0c2000 @  0x7f2c2d210680 0x7f2c2d231824 0x7f2c2d9cc187 0x7f2c2d9d4355 0x7f2c2d9cc708 0x7f2c2d9cc877 0x7f2c2d9cdc24 0x7f2c2d9e5ec1 0x7f2c2d9585f3 0x7f2c2d9b9e97 0x7f2c2d9c1b1a 0x7f2c2d0c4d84 0x7f2c2d1e0609 0x7f2c2cdb4103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.nFOeFJym3o 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new fdf603b1-1ef2-4e1c-95f5-f7f8c9635b1f -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQA2CZ9gG2aHMxAAPFI+gSXDA2/noGa/Ffe6eA== --osd-uuid fdf603b1-1ef2-4e1c-95f5-f7f8c9635b1f 
2021-05-14T16:35:19.653-0700 7f518fc49f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:35:19.673-0700 7f518fc49f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:35:19.673-0700 7f518fc49f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55a84af50000 @  0x7f5190612680 0x7f5190633824 0x55a83ff4e447 0x55a83ff564b5 0x55a83ff4e9c8 0x55a83ff4eb37 0x55a83ff4fee4 0x55a83fd20ca1 0x55a83fef8423 0x55a83fd112a7 0x55a83fd1653a 0x7f5190165d84 0x7f51902ea609 0x7f518fe53103
2021-05-14T16:35:20.073-0700 7f518fc49f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 2699c1de-a5d7-461c-9976-9b0e55ab5c38 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x564d7a58c000 @  0x7f18ce0f7680 0x7f18ce118824 0x564d6ffc7447 0x564d6ffcf4b5 0x564d6ffc79c8 0x564d6ffc7b37 0x564d6ffc8ee4 0x564d6fd99ca1 0x564d6ff71423 0x564d6fd8a2a7 0x564d6fd8f53a 0x7f18cdc4ad84 0x7f18cddcf609 0x7f18cd938103
2021-05-14T16:35:20.841-0700 7f18cd72ef00 -1 Falling back to public interface
2021-05-14T16:35:21.193-0700 7f18cd72ef00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQA4CZ9gxjW3GhAAKC7ydJul6kgixHZ7cQGKkA== --osd-uuid 2699c1de-a5d7-461c-9976-9b0e55ab5c38 
2021-05-14T16:35:21.233-0700 7f9a9b9bbf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:35:21.253-0700 7f9a9b9bbf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:35:21.253-0700 7f9a9b9bbf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x555e240f2000 @  0x7f9a9c384680 0x7f9a9c3a5824 0x555e192f1447 0x555e192f94b5 0x555e192f19c8 0x555e192f1b37 0x555e192f2ee4 0x555e190c3ca1 0x555e1929b423 0x555e190b42a7 0x555e190b953a 0x7f9a9bed7d84 0x7f9a9c05c609 0x7f9a9bbc5103
2021-05-14T16:35:21.645-0700 7f9a9b9bbf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 30588a1f-ed46-4915-9c1c-c4a8da6dbfd0 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x560ce0e98000 @  0x7f4b14089680 0x7f4b140aa824 0x560cd6104447 0x560cd610c4b5 0x560cd61049c8 0x560cd6104b37 0x560cd6105ee4 0x560cd5ed6ca1 0x560cd60ae423 0x560cd5ec72a7 0x560cd5ecc53a 0x7f4b13bdcd84 0x7f4b13d61609 0x7f4b138ca103
2021-05-14T16:35:22.385-0700 7f4b136c0f00 -1 Falling back to public interface
2021-05-14T16:35:22.733-0700 7f4b136c0f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQA6CZ9gsGLaABAAzhsDTBoDM+F7UmKsSRJDdQ== --osd-uuid 30588a1f-ed46-4915-9c1c-c4a8da6dbfd0 
2021-05-14T16:35:22.813-0700 7f4f009b0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:35:22.833-0700 7f4f009b0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:35:22.833-0700 7f4f009b0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55f02c9be000 @  0x7f4f01379680 0x7f4f0139a824 0x55f020bad447 0x55f020bb54b5 0x55f020bad9c8 0x55f020badb37 0x55f020baeee4 0x55f02097fca1 0x55f020b57423 0x55f0209702a7 0x55f02097553a 0x7f4f00eccd84 0x7f4f01051609 0x7f4f00bba103
2021-05-14T16:35:23.225-0700 7f4f009b0f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a1af994000 @  0x7f3e010b9680 0x7f3e010da824 0x55a1a433e447 0x55a1a43464b5 0x55a1a433e9c8 0x55a1a433eb37 0x55a1a433fee4 0x55a1a4110ca1 0x55a1a42e8423 0x55a1a41012a7 0x55a1a410653a 0x7f3e00c0cd84 0x7f3e00d91609 0x7f3e008fa103
2021-05-14T16:35:23.949-0700 7f3e006f0f00 -1 Falling back to public interface
2021-05-14T16:35:24.285-0700 7f3e006f0f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:35:28,178177243-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:35:28,199063838-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:35:28,285269608-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:28,291717294-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:30.017+0000 ffff774a11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:30.850+0000 ffff7623f1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:35:32,261554683-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:32,267927941-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:33.938+0000 ffff7a1d51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:34.778+0000 ffff7a1d51e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:35:36,190667485-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:36,197188143-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:37.871+0000 ffff8e1d71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:38.735+0000 ffff8e1d71e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:35:40,163053705-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:40,169483823-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:42.112+0000 ffff85a7c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:42.940+0000 ffff85a7c1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:46.152+0000 ffffa22d01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:47.052+0000 ffffa106e1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:35:48,590853673-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:48,597852223-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:50.281+0000 ffff905841e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:51.121+0000 ffff905841e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:35:53,316044563-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:53,322593636-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:55.122+0000 ffff964481e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:35:55.958+0000 ffff964481e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:35:57,783429544-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:35:57,789581964-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:35:59.503+0000 ffffa274a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:36:00.335+0000 ffffa274a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:36:02,365310487-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:36:02,371573776-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:36:04.031+0000 ffffb48fa1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:36:04.847+0000 ffffb48fa1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:36:06,606899796-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:36:06,613183533-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:36:08.396+0000 ffff7c06c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:36:09.252+0000 ffff7c06c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:36:11,609839273-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:36:11,616062955-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:36:13.449+0000 ffff9334c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:36:14.281+0000 ffff9334c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:36:16,675180437-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:36:16,681341318-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:36:18.318+0000 ffff925201e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:36:19.202+0000 ffff912be1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:36:20,603790471-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:36:20,610451658-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:36:22.354+0000 ffff98eaf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:36:23.183+0000 ffff98eaf1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  143      up          osd.2  
                       TOTAL  300 GiB  196 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:36:24,472148754-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:36:48,841002737-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:36:57,961913135-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:07,196191273-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:16,660275582-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:25,709976232-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   238 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:25,727453327-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:35,224939847-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:35,242228659-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:44,231700532-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:44,249119251-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:53,673967524-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:37:53,693666649-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:38:02,727683215-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:38:02,745019330-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:38:02,759212872-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:38:02,767514019-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:38:02,786633099-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3964939
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T16:38:02,802206712-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T16:38:02,842572672-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:38:02,849272145-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '65536', '-O', '65536', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:38:04.364+0000 ffffa1cb6010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:38:05.168+0000 ffffa1cb6010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:38:05.168+0000 ffffa1cb6010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:38:05.186020+0000 Maintaining 256 concurrent writes of 65536 bytes to objects of size 65536 for up to 20 seconds or 0 objects
2021-05-14T23:38:05.186066+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:38:05.199424+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:38:05.199424+0000     0       0         0         0         0         0           -           0
2021-05-14T23:38:06.199661+0000     1     256      8974      8718   544.821   544.875   0.0392844   0.0287186
2021-05-14T23:38:07.199859+0000     2     256     17526     17270   539.607     534.5  0.00978114   0.0288225
2021-05-14T23:38:08.200049+0000     3     256     26271     26015   541.891   546.562   0.0235347   0.0292298
2021-05-14T23:38:09.200228+0000     4     255     35084     34829   544.113   550.875   0.0192514   0.0291783
2021-05-14T23:38:10.200415+0000     5     256     42232     41976   524.611   446.688  0.00979284   0.0303473
2021-05-14T23:38:11.200580+0000     6     256     46831     46575   485.074   287.438  0.00126692    0.032466
2021-05-14T23:38:12.200734+0000     7     256     49229     48973   437.186   149.875  0.00170095   0.0362944
2021-05-14T23:38:13.200900+0000     8     256     55207     54951   429.233   373.625   0.0058032   0.0369352
2021-05-14T23:38:14.201077+0000     9     255     64288     64033   444.599   567.625   0.0422408   0.0358894
2021-05-14T23:38:15.201256+0000    10     256     72522     72266   451.586   514.562  0.00557584   0.0352545
2021-05-14T23:38:16.201503+0000    11     255     81102     80847   459.277   536.312   0.0412052   0.0347506
2021-05-14T23:38:17.201691+0000    12     255     89457     89202   464.511   522.188   0.0379836   0.0343772
2021-05-14T23:38:18.201996+0000    13     255     98363     98108   471.585   556.625   0.0121613   0.0338544
2021-05-14T23:38:19.202224+0000    14     256    106925    106669    476.11   535.062    0.034672    0.033551
2021-05-14T23:38:20.202431+0000    15     256    115333    115077   479.396     525.5   0.0336296   0.0332077
2021-05-14T23:38:21.202600+0000    16     255    123876    123621   482.803       534  0.00256564   0.0330668
2021-05-14T23:38:22.202774+0000    17     256    132771    132515   487.095   555.875   0.0301293   0.0328021
2021-05-14T23:38:23.202947+0000    18     255    140019    139764     485.2   453.062   0.0298652   0.0329314
2021-05-14T23:38:24.203159+0000    19     256    148635    148379   487.996   538.438   0.0372025   0.0327426
2021-05-14T23:38:25.203339+0000 min lat: 0.000986524 max lat: 0.405434 avg lat: 0.0326886
2021-05-14T23:38:25.203339+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:38:25.203339+0000    20     220    156694    156474   488.889   505.938   0.0313403   0.0326886
2021-05-14T23:38:26.203616+0000 Total time run:         20.0316
Total writes made:      156694
Write size:             65536
Object size:            65536
Bandwidth (MB/sec):     488.897
Stddev Bandwidth:       105.579
Max bandwidth (MB/sec): 567.625
Min bandwidth (MB/sec): 149.875
Average IOPS:           7822
Stddev IOPS:            1689.26
Max IOPS:               9082
Min IOPS:               2398
Average Latency(s):     0.0326845
Stddev Latency(s):      0.030368
Max latency(s):         0.405434
Min latency(s):         0.000986524

[1;32mlocalhost.localdomain	[2021-05-14T16:38:26,836468455-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3964939


[1;33mlocalhost.localdomain	[2021-05-14T16:38:26,845325237-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:38:51,418496602-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 156.69k objects, 9.6 GiB
    usage:   19 GiB used, 281 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:38:51,436314524-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:00,726463047-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 156.69k objects, 9.6 GiB
    usage:   19 GiB used, 281 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:00,744252344-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:09,888166354-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 156.69k objects, 9.6 GiB
    usage:   19 GiB used, 281 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:09,905388599-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:18,915968885-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 156.69k objects, 9.6 GiB
    usage:   19 GiB used, 281 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:18,933362219-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:28,517371914-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 156.69k objects, 9.6 GiB
    usage:   19 GiB used, 281 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:28,536021068-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:28,552006050-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:39:28,561744503-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:39:28,584255228-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3968533
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T16:39:28,600993805-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T16:39:28,641147521-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:39:28,647790974-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '085606d4-009f-49e9-80b9-834ae7846110', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 085606d4-009f-49e9-80b9-834ae7846110 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.kKRo2T:/tmp/ceph-asok.kKRo2T -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:39:30.147+0000 ffffac7c7010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:39:30.975+0000 ffffac7c7010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:39:30.975+0000 ffffac7c7010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:39:31.000630+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:39:31.000630+0000     0       0         0         0         0         0           -           0
2021-05-14T23:39:32.000793+0000     1     255     17163     16908   1056.44   1056.75   0.0162328   0.0149574
2021-05-14T23:39:33.001003+0000     2     255     34809     34554   1079.54   1102.88   0.0144402   0.0147245
2021-05-14T23:39:34.001186+0000     3     255     52396     52141   1086.02   1099.19   0.0145002   0.0146589
2021-05-14T23:39:35.001381+0000     4     255     69553     69298   1082.54   1072.31   0.0172511   0.0147126
2021-05-14T23:39:36.001611+0000     5     255     86006     85751   1071.65   1028.31    0.014298    0.014874
2021-05-14T23:39:37.001835+0000     6     255    103658    103403   1076.87   1103.25    0.014409   0.0148062
2021-05-14T23:39:38.002038+0000     7     255    121427    121172   1081.65   1110.56   0.0143289    0.014744
2021-05-14T23:39:39.002229+0000     8     256    138726    138470   1081.56   1081.12   0.0152961   0.0147466
2021-05-14T23:39:40.002488+0000     9     255    155702    155447   1079.25   1061.06   0.0143329   0.0147812
2021-05-14T23:39:41.002713+0000 Total time run:       9.06455
Total reads made:     156694
Read size:            65536
Object size:          65536
Bandwidth (MB/sec):   1080.4
Average IOPS:         17286
Stddev IOPS:          437.992
Max IOPS:             17769
Min IOPS:             16453
Average Latency(s):   0.0147722
Max latency(s):       0.0628811
Min latency(s):       0.000351405

[1;32mlocalhost.localdomain	[2021-05-14T16:39:41,692071605-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3968533


[1;7;39;49m[2021-05-14T16:39:41,697880194-07:00][RUNNING][ROUND 5/3/40] object_size=64KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:39:41,706151081-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:39:41,723194434-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40498\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1743966\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 31757ec1-802f-4152-852c-8f85336fe6cf\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 31757ec1-802f-4152-852c-8f85336fe6cf\nlast_changed 2021-05-14T16:40:13.484965-0700\ncreated 2021-05-14T16:40:13.484965-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40498/0,v1:10.10.1.2:40499/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1743966 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 8b574d31-512b-4a26-9f47-1ccd62eda78d\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 b839adde-b429-4c1f-bc48-205c9bad06f7\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 26bf5f81-da69-4ee5-95cf-c9212ab8489a\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42498\n  w/ user/pass: admin / 42e0d254-9102-46ca-8b84-a74d38cb6067\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:40:36 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40498
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1743966
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 31757ec1-802f-4152-852c-8f85336fe6cf
setting min_mon_release = octopus
epoch 0
fsid 31757ec1-802f-4152-852c-8f85336fe6cf
last_changed 2021-05-14T16:40:13.484965-0700
created 2021-05-14T16:40:13.484965-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40498/0,v1:10.10.1.2:40499/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1743966 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 8b574d31-512b-4a26-9f47-1ccd62eda78d
0
start osd.0
add osd1 b839adde-b429-4c1f-bc48-205c9bad06f7
1
start osd.1
add osd2 26bf5f81-da69-4ee5-95cf-c9212ab8489a
2
start osd.2


restful urls: https://10.10.1.2:42498
  w/ user/pass: admin / 42e0d254-9102-46ca-8b84-a74d38cb6067


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:39:43.911-0700 7f17175c71c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:39:43.911-0700 7f17175c71c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:39:43.931-0700 7fc9d6e781c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:39:43.931-0700 7fc9d6e781c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd ceph-mon still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40498,v1:10.10.1.2:40499] --print /tmp/ceph_monmap.1743966 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1743966 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1743966 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42498 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d054e40000 @  0x7fd3785fa680 0x7fd37861b824 0x7fd378db6187 0x7fd378dbe355 0x7fd378db6708 0x7fd378db6877 0x7fd378db7c24 0x7fd378dcfec1 0x7fd378d425f3 0x7fd378da3e97 0x7fd378dabb1a 0x7fd3784aed84 0x7fd3785ca609 0x7fd37819e103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.ipIV8r7FuT 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 8b574d31-512b-4a26-9f47-1ccd62eda78d -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBrCp9g7grjGBAA8mIjECytopZ2/cKXlWjNfg== --osd-uuid 8b574d31-512b-4a26-9f47-1ccd62eda78d 
2021-05-14T16:40:28.196-0700 7f0660e9ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:40:28.216-0700 7f0660e9ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:40:28.216-0700 7f0660e9ff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5557f6f5e000 @  0x7f0661868680 0x7f0661889824 0x5557eb443447 0x5557eb44b4b5 0x5557eb4439c8 0x5557eb443b37 0x5557eb444ee4 0x5557eb215ca1 0x5557eb3ed423 0x5557eb2062a7 0x5557eb20b53a 0x7f06613bbd84 0x7f0661540609 0x7f06610a9103
2021-05-14T16:40:28.632-0700 7f0660e9ff00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new b839adde-b429-4c1f-bc48-205c9bad06f7 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x557203c40000 @  0x7f68fd65c680 0x7f68fd67d824 0x5571f963a447 0x5571f96424b5 0x5571f963a9c8 0x5571f963ab37 0x5571f963bee4 0x5571f940cca1 0x5571f95e4423 0x5571f93fd2a7 0x5571f940253a 0x7f68fd1afd84 0x7f68fd334609 0x7f68fce9d103
2021-05-14T16:40:29.392-0700 7f68fcc93f00 -1 Falling back to public interface
2021-05-14T16:40:29.736-0700 7f68fcc93f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBtCp9gkzkqABAAJ/+Kk/Alznu/bFtkB6otsQ== --osd-uuid b839adde-b429-4c1f-bc48-205c9bad06f7 
2021-05-14T16:40:29.800-0700 7fcc20c4df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:40:29.820-0700 7fcc20c4df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:40:29.820-0700 7fcc20c4df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55ebdd650000 @  0x7fcc21616680 0x7fcc21637824 0x55ebd2413447 0x55ebd241b4b5 0x55ebd24139c8 0x55ebd2413b37 0x55ebd2414ee4 0x55ebd21e5ca1 0x55ebd23bd423 0x55ebd21d62a7 0x55ebd21db53a 0x7fcc21169d84 0x7fcc212ee609 0x7fcc20e57103
2021-05-14T16:40:30.204-0700 7fcc20c4df00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 26bf5f81-da69-4ee5-95cf-c9212ab8489a -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x557ce6d7c000 @  0x7f62b615f680 0x7f62b6180824 0x557cdbf5a447 0x557cdbf624b5 0x557cdbf5a9c8 0x557cdbf5ab37 0x557cdbf5bee4 0x557cdbd2cca1 0x557cdbf04423 0x557cdbd1d2a7 0x557cdbd2253a 0x7f62b5cb2d84 0x7f62b5e37609 0x7f62b59a0103
2021-05-14T16:40:31.044-0700 7f62b5796f00 -1 Falling back to public interface
2021-05-14T16:40:31.392-0700 7f62b5796f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBuCp9gXjk/KBAAhSD4afOR9c5QUqU4PyMpxg== --osd-uuid 26bf5f81-da69-4ee5-95cf-c9212ab8489a 
2021-05-14T16:40:31.452-0700 7fa118ba3f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:40:31.472-0700 7fa118ba3f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:40:31.472-0700 7fa118ba3f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55af96570000 @  0x7fa11956c680 0x7fa11958d824 0x55af8b05f447 0x55af8b0674b5 0x55af8b05f9c8 0x55af8b05fb37 0x55af8b060ee4 0x55af8ae31ca1 0x55af8b009423 0x55af8ae222a7 0x55af8ae2753a 0x7fa1190bfd84 0x7fa119244609 0x7fa118dad103
2021-05-14T16:40:31.860-0700 7fa118ba3f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x561500d0e000 @  0x7f9b1f7d9680 0x7f9b1f7fa824 0x5614f586d447 0x5614f58754b5 0x5614f586d9c8 0x5614f586db37 0x5614f586eee4 0x5614f563fca1 0x5614f5817423 0x5614f56302a7 0x5614f563553a 0x7f9b1f32cd84 0x7f9b1f4b1609 0x7f9b1f01a103
2021-05-14T16:40:32.596-0700 7f9b1ee10f00 -1 Falling back to public interface
2021-05-14T16:40:32.928-0700 7f9b1ee10f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:40:36,815712923-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:40:36,851789944-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:40:36,934736671-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:40:36,941256967-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:40:38.618+0000 ffffa9d3f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:40:39.446+0000 ffffa8add1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:40:40,880206368-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:40:40,886446387-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:40:42.531+0000 ffff7cbe51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:40:43.399+0000 ffff7cbe51e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:40:45,071245675-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:40:45,077824527-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:40:46.972+0000 ffff8126d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:40:47.792+0000 ffff8126d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:40:49,157410403-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:40:49,163462274-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:40:51.032+0000 ffffacc421e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:40:51.849+0000 ffffacc421e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:40:54.909+0000 ffff80a271e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:40:55.721+0000 ffff80a271e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:40:57,073203546-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:40:57,079497409-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:40:58.774+0000 ffff858701e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:40:59.622+0000 ffff7ffff1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:41:01,891053367-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:01,897436375-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:03.579+0000 ffff8eeb01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:04.399+0000 ffff8eeb01e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:41:06,368956063-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:06,375154029-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:08.215+0000 ffff9720a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:09.044+0000 ffff9720a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:41:11,373633099-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:11,379980205-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:13.084+0000 ffff7eae51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:13.944+0000 ffff7eae51e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:41:15,767965211-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:15,774107532-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:17.601+0000 ffff88abb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:18.425+0000 ffff88abb1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:41:20,091419944-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:20,097717317-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:21.930+0000 ffff97abb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:22.782+0000 ffff97abb1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:41:24,621456762-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:24,627720754-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:26.262+0000 ffff78d8a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:27.095+0000 ffff78d8a1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:41:28,461447594-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:41:28,467560060-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:41:30.155+0000 ffffb103d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:41:30.999+0000 ffffb103d1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93  143      up          osd.2  
                       TOTAL  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:41:32,307714068-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:41:56,615857233-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:05,820731239-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:15,011102568-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:24,263119275-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:33,748455757-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:33,766504596-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:42,900063442-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:42,917909566-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:52,171492248-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:42:52,189321464-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:01,765645209-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:01,783423282-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:10,806875910-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:10,824655648-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:10,839214875-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:43:10,847579046-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:10,867004386-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3979231
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T16:43:10,882816312-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_write.log.5
[1;30mlocalhost.localdomain	[2021-05-14T16:43:10,923030079-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:43:10,929587056-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '65536', '-O', '65536', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- rados bench 20 write --pool bench_rados -b 65536 -O 65536 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:43:12.789+0000 ffffb1175010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:43:13.621+0000 ffffb1175010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:43:13.621+0000 ffffb1175010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:43:13.638981+0000 Maintaining 256 concurrent writes of 65536 bytes to objects of size 65536 for up to 20 seconds or 0 objects
2021-05-14T23:43:13.639026+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-14T23:43:13.652282+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:43:13.652282+0000     0       0         0         0         0         0           -           0
2021-05-14T23:43:14.652473+0000     1     255      8885      8630   539.345   539.375   0.0389163   0.0290015
2021-05-14T23:43:15.652700+0000     2     256     17669     17413    544.08   548.938   0.0147358   0.0290542
2021-05-14T23:43:16.652898+0000     3     256     26466     26210   545.954   549.812   0.0218234   0.0290416
2021-05-14T23:43:17.653082+0000     4     255     35277     35022   547.128    550.75   0.0586898   0.0290343
2021-05-14T23:43:18.653306+0000     5     256     38717     38461   480.677   214.938    0.001106   0.0327713
2021-05-14T23:43:19.653502+0000     6     255     46961     46706   486.433   515.312  0.00470172   0.0327384
2021-05-14T23:43:20.653714+0000     7     255     55786     55531   495.721   551.562   0.0228015   0.0321675
2021-05-14T23:43:21.653922+0000     8     256     64627     64371   502.804     552.5   0.0139666   0.0316904
2021-05-14T23:43:22.654127+0000     9     255     73375     73120   507.681   546.812   0.0508808   0.0314182
2021-05-14T23:43:23.654329+0000    10     255     82223     81968   512.202       553  0.00805329   0.0311472
2021-05-14T23:43:24.654570+0000    11     255     88321     88066   500.277   381.125   0.0224518   0.0319159
2021-05-14T23:43:25.654765+0000    12     255     95985     95730   498.496       479    0.046516   0.0320401
2021-05-14T23:43:26.654969+0000    13     256    104853    104597   502.772   554.188  0.00340446   0.0317475
2021-05-14T23:43:27.655155+0000    14     255    113123    112868   503.776   516.938   0.0389374   0.0317081
2021-05-14T23:43:28.655329+0000    15     255    121951    121696   506.968    551.75     0.01433     0.03149
2021-05-14T23:43:29.655520+0000    16     255    130308    130053   507.921   522.312    0.028568   0.0314525
2021-05-14T23:43:30.655701+0000    17     256    138230    137974   507.159   495.062  0.00711186   0.0313708
2021-05-14T23:43:31.655876+0000    18     255    146942    146687   509.232   544.562   0.0255562   0.0313757
2021-05-14T23:43:32.656091+0000    19     255    155225    154970   509.671   517.688   0.0439771   0.0313523
2021-05-14T23:43:33.656316+0000 min lat: 0.00102373 max lat: 0.376171 avg lat: 0.0312783
2021-05-14T23:43:33.656316+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:43:33.656316+0000    20     216    163740    163524   510.913   534.625   0.0361084   0.0312783
2021-05-14T23:43:34.656594+0000 Total time run:         20.0642
Total writes made:      163740
Write size:             65536
Object size:            65536
Bandwidth (MB/sec):     510.05
Stddev Bandwidth:       80.4528
Max bandwidth (MB/sec): 554.188
Min bandwidth (MB/sec): 214.938
Average IOPS:           8160
Stddev IOPS:            1287.24
Max IOPS:               8867
Min IOPS:               3439
Average Latency(s):     0.0313117
Stddev Latency(s):      0.0280671
Max latency(s):         0.376171
Min latency(s):         0.00102373

[1;32mlocalhost.localdomain	[2021-05-14T16:43:35,291947229-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3979231


[1;33mlocalhost.localdomain	[2021-05-14T16:43:35,300682504-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:59,867767569-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 163.74k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:43:59,886141318-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:09,395766500-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 163.74k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:09,413392611-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:18,468270131-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 163.74k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:18,486301041-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:27,688476616-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 163.74k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:27,706252977-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:37,251764025-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 163.74k objects, 10 GiB
    usage:   20 GiB used, 280 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:37,269710875-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:37,284373964-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:44:37,293104753-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:44:37,312789892-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3982828
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64KB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T16:44:37,329094861-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64KB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T16:44:37,369160297-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:44:37,375546320-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '002ad2ce-9520-4e58-911a-3f13defa4196', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 002ad2ce-9520-4e58-911a-3f13defa4196 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.1doEEb:/tmp/ceph-asok.1doEEb -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:44:38.835+0000 ffffb5608010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:44:39.636+0000 ffffb5608010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:44:39.636+0000 ffffb5608010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:44:39.659353+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:44:39.659353+0000     0       0         0         0         0         0           -           0
2021-05-14T23:44:40.659525+0000     1     255     17107     16852   1052.91   1053.25   0.0142999    0.015019
2021-05-14T23:44:41.659729+0000     2     255     34654     34399   1074.69   1096.69   0.0147199    0.014786
2021-05-14T23:44:42.659936+0000     3     256     52181     51925   1081.51   1095.38   0.0150257   0.0147149
2021-05-14T23:44:43.660158+0000     4     255     69018     68763   1074.17   1052.38   0.0159679   0.0148279
2021-05-14T23:44:44.660353+0000     5     255     86445     86190   1077.13   1089.19   0.0145163   0.0147965
2021-05-14T23:44:45.660551+0000     6     255    104069    103814   1081.15    1101.5   0.0145245   0.0147461
2021-05-14T23:44:46.660771+0000     7     255    121865    121610   1085.56   1112.25   0.0144078   0.0146901
2021-05-14T23:44:47.660962+0000     8     255    139037    138782      1084   1073.25   0.0144166   0.0147133
2021-05-14T23:44:48.661151+0000     9     256    156773    156517   1086.69   1108.44   0.0144794   0.0146788
2021-05-14T23:44:49.661394+0000 Total time run:       9.39475
Total reads made:     163740
Read size:            65536
Object size:          65536
Bandwidth (MB/sec):   1089.31
Average IOPS:         17428
Stddev IOPS:          357.91
Max IOPS:             17796
Min IOPS:             16838
Average Latency(s):   0.0146511
Max latency(s):       0.0370787
Min latency(s):       0.000437685

[1;32mlocalhost.localdomain	[2021-05-14T16:44:50,356457553-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3982828


[1;7;39;49m[2021-05-14T16:44:50,366663800-07:00][RUNNING][ROUND 1/4/40] object_size=256KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:44:50,376146787-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:44:50,398475273-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40554\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1746332\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 83a22e06-b3c8-4334-a431-d340795aefaa\nsetting min_mon_release = octopus\nepoch 0\nfsid 83a22e06-b3c8-4334-a431-d340795aefaa\nlast_changed 2021-05-14T16:45:20.832757-0700\ncreated 2021-05-14T16:45:20.832757-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40554/0,v1:10.10.1.2:40555/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1746332 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 eedd4890-ca91-418e-be15-f1e8ecf0034b\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 40b5135a-692e-4cfd-9268-5858f946417c\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 cfa2eca9-f63b-4b55-8634-a2ef0308b507\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42554\n  w/ user/pass: admin / 85732acd-3fa5-410c-9cab-2e62bb7f1c00\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:45:45 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40554
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1746332
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 83a22e06-b3c8-4334-a431-d340795aefaa
setting min_mon_release = octopus
epoch 0
fsid 83a22e06-b3c8-4334-a431-d340795aefaa
last_changed 2021-05-14T16:45:20.832757-0700
created 2021-05-14T16:45:20.832757-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40554/0,v1:10.10.1.2:40555/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1746332 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 eedd4890-ca91-418e-be15-f1e8ecf0034b
0
start osd.0
add osd1 40b5135a-692e-4cfd-9268-5858f946417c
1
start osd.1
add osd2 cfa2eca9-f63b-4b55-8634-a2ef0308b507
2
start osd.2


restful urls: https://10.10.1.2:42554
  w/ user/pass: admin / 85732acd-3fa5-410c-9cab-2e62bb7f1c00


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:44:52.526-0700 7f3f7674f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:44:52.526-0700 7f3f7674f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:44:52.542-0700 7fd7583ac1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:44:52.546-0700 7fd7583ac1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40554,v1:10.10.1.2:40555] --print /tmp/ceph_monmap.1746332 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1746332 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1746332 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42554 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d217e26000 @  0x7f87d02d4680 0x7f87d02f5824 0x7f87d0a90187 0x7f87d0a98355 0x7f87d0a90708 0x7f87d0a90877 0x7f87d0a91c24 0x7f87d0aa9ec1 0x7f87d0a1c5f3 0x7f87d0a7de97 0x7f87d0a85b1a 0x7f87d0188d84 0x7f87d02a4609 0x7f87cfe78103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.nKu1On6No9 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new eedd4890-ca91-418e-be15-f1e8ecf0034b -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCfC59gtpeJOhAADUovKblfJgpvtXym7fJCIQ== --osd-uuid eedd4890-ca91-418e-be15-f1e8ecf0034b 
2021-05-14T16:45:36.778-0700 7fb53e578f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:45:36.798-0700 7fb53e578f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:45:36.798-0700 7fb53e578f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56056f8f4000 @  0x7fb53ef41680 0x7fb53ef62824 0x56056531f447 0x5605653274b5 0x56056531f9c8 0x56056531fb37 0x560565320ee4 0x5605650f1ca1 0x5605652c9423 0x5605650e22a7 0x5605650e753a 0x7fb53ea94d84 0x7fb53ec19609 0x7fb53e782103
2021-05-14T16:45:37.210-0700 7fb53e578f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 40b5135a-692e-4cfd-9268-5858f946417c -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x558e9c5ae000 @  0x7f1e4ea9f680 0x7f1e4eac0824 0x558e92318447 0x558e923204b5 0x558e923189c8 0x558e92318b37 0x558e92319ee4 0x558e920eaca1 0x558e922c2423 0x558e920db2a7 0x558e920e053a 0x7f1e4e5f2d84 0x7f1e4e777609 0x7f1e4e2e0103
2021-05-14T16:45:37.978-0700 7f1e4e0d6f00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQChC59gMDhaIhAAL2FJ77ur9bPGLxCNKR3Tuw== --osd-uuid 40b5135a-692e-4cfd-9268-5858f946417c 
2021-05-14T16:45:38.398-0700 7f1e4e0d6f00 -1 osd.0 0 log_to_monitors {default=true}
2021-05-14T16:45:38.398-0700 7fb500cf7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:45:38.418-0700 7fb500cf7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:45:38.418-0700 7fb500cf7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5632771ae000 @  0x7fb5016c0680 0x7fb5016e1824 0x56326bc0d447 0x56326bc154b5 0x56326bc0d9c8 0x56326bc0db37 0x56326bc0eee4 0x56326b9dfca1 0x56326bbb7423 0x56326b9d02a7 0x56326b9d553a 0x7fb501213d84 0x7fb501398609 0x7fb500f01103
2021-05-14T16:45:38.822-0700 7fb500cf7f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new cfa2eca9-f63b-4b55-8634-a2ef0308b507 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x561326708000 @  0x7efe5b686680 0x7efe5b6a7824 0x56131ae06447 0x56131ae0e4b5 0x56131ae069c8 0x56131ae06b37 0x56131ae07ee4 0x56131abd8ca1 0x56131adb0423 0x56131abc92a7 0x56131abce53a 0x7efe5b1d9d84 0x7efe5b35e609 0x7efe5aec7103
2021-05-14T16:45:39.570-0700 7efe5acbdf00 -1 Falling back to public interface
2021-05-14T16:45:39.918-0700 7efe5acbdf00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCjC59gcqVOCxAAGWrPvAFQDeiDZ5u7oFKNWg== --osd-uuid cfa2eca9-f63b-4b55-8634-a2ef0308b507 
2021-05-14T16:45:39.986-0700 7f0838d13f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:45:40.006-0700 7f0838d13f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:45:40.006-0700 7f0838d13f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5646245b2000 @  0x7f08396dc680 0x7f08396fd824 0x56461979a447 0x5646197a24b5 0x56461979a9c8 0x56461979ab37 0x56461979bee4 0x56461956cca1 0x564619744423 0x56461955d2a7 0x56461956253a 0x7f083922fd84 0x7f08393b4609 0x7f0838f1d103
2021-05-14T16:45:40.390-0700 7f0838d13f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x556bf0c36000 @  0x7fdb99439680 0x7fdb9945a824 0x556be6c35447 0x556be6c3d4b5 0x556be6c359c8 0x556be6c35b37 0x556be6c36ee4 0x556be6a07ca1 0x556be6bdf423 0x556be69f82a7 0x556be69fd53a 0x7fdb98f8cd84 0x7fdb99111609 0x7fdb98c7a103
2021-05-14T16:45:41.162-0700 7fdb98a70f00 -1 Falling back to public interface
2021-05-14T16:45:41.506-0700 7fdb98a70f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:45:45,367625052-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:45:45,389069616-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:45:45,470914423-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:45:45,477278962-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:45:47.247+0000 ffff8ed471e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:45:48.087+0000 ffff8ed471e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:45:49,490590378-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:45:49,496964053-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:45:51.272+0000 ffff93ea31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:45:52.104+0000 ffff93ea31e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:45:53,516214215-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:45:53,522697394-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:45:55.381+0000 ffff782fa1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:45:56.209+0000 ffff782fa1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:45:57,720821789-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:45:57,727406715-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:45:59.401+0000 ffffb3ef51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:00.217+0000 ffffb3ef51e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:03.454+0000 ffffa12231e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:04.270+0000 ffffa12231e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:46:05,713967379-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:05,720349996-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:07.351+0000 ffffac64b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:08.199+0000 ffffac64b1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:46:10,061688561-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:10,067974396-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:12.047+0000 ffff891b21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:12.880+0000 ffff891b21e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:46:15,354063701-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:15,360278349-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:17.016+0000 ffff893ba1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:17.856+0000 ffff893ba1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:46:19,926670958-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:19,932889117-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:21.617+0000 ffff75f8f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:22.445+0000 ffff75f8f1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:46:23,944407011-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:23,950803550-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:25.654+0000 ffff8333c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:26.486+0000 ffff8333c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:46:28,260529179-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:28,266863353-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:30.050+0000 ffff822a91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:30.871+0000 ffff822a91e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:46:32,853834906-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:32,860234956-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:34.535+0000 ffff81ecf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:35.383+0000 ffff81ecf1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:46:36,636146185-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:46:36,642674537-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:46:38.360+0000 ffff8903d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:46:39.176+0000 ffff8903d1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93  143      up          osd.2  
                       TOTAL  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:46:40,420042676-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:04,770073869-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:13,926098145-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:23,108513325-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:32,436393621-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:41,562016799-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:41,580252283-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:50,736286377-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:50,754379292-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:59,935993808-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:47:59,954047266-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:48:09,638554605-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:48:09,656756588-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:48:18,693795100-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:48:18,712074901-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:48:18,726830030-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:48:18,735461621-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:48:18,755217076-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3993367
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T16:48:18,771346454-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T16:48:18,812325484-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:48:18,818756694-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '262144', '-O', '262144', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:48:20.641+0000 ffff82c3c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:48:21.450+0000 ffff82c3c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:48:21.450+0000 ffff82c3c010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:48:21.468016+0000 Maintaining 256 concurrent writes of 262144 bytes to objects of size 262144 for up to 20 seconds or 0 objects
2021-05-14T23:48:21.468077+0000 Object prefix: benchmark_data_localhost.localdomain_7
2021-05-14T23:48:21.518064+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:48:21.518064+0000     0       0         0         0         0         0           -           0
2021-05-14T23:48:22.518272+0000     1     255      2903      2648   661.959       662   0.0679347   0.0897884
2021-05-14T23:48:23.518552+0000     2     255      5683      5428   678.384       695   0.0661348   0.0911193
2021-05-14T23:48:24.518764+0000     3     255      8419      8164   680.208       684   0.0703437   0.0918265
2021-05-14T23:48:25.518977+0000     4     255     11166     10911   681.807    686.75   0.0695859   0.0921928
2021-05-14T23:48:26.519170+0000     5     255     13902     13647   682.219       684   0.0921176    0.092607
2021-05-14T23:48:27.519358+0000     6     255     16644     16389   682.744     685.5   0.0993766   0.0926218
2021-05-14T23:48:28.519528+0000     7     255     18948     18693   667.482       576   0.0855093   0.0949867
2021-05-14T23:48:29.519822+0000     8     255     20863     20608    643.87    478.75   0.0971132   0.0950576
2021-05-14T23:48:30.520006+0000     9     255     22369     22114   614.155     376.5    0.193638    0.102396
2021-05-14T23:48:31.520204+0000    10     255     23664     23409   585.108    323.75    0.195866    0.107767
2021-05-14T23:48:32.520383+0000    11     256     25070     24814   563.843    351.25    0.244281    0.112688
2021-05-14T23:48:33.520637+0000    12     255     25466     25211   525.123     99.25    0.836531     0.11683
2021-05-14T23:48:34.520825+0000    13     255     25876     25621   492.612     102.5    0.970793    0.125778
2021-05-14T23:48:35.521010+0000    14     255     26992     26737   477.351       279   0.0650787    0.133089
2021-05-14T23:48:36.521182+0000    15     255     29645     29390   489.736    663.25   0.0879771    0.130122
2021-05-14T23:48:37.521364+0000    16     255     32443     32188   502.838     699.5   0.0891739    0.126768
2021-05-14T23:48:38.521542+0000    17     255     35237     34982    514.34     698.5   0.0794418    0.123837
2021-05-14T23:48:39.521713+0000    18     255     38062     37807   524.995    706.25   0.0697039    0.121437
2021-05-14T23:48:40.521913+0000    19     255     40899     40644   534.685    709.25   0.0630462    0.119251
2021-05-14T23:48:41.522126+0000 min lat: 0.0152334 max lat: 1.31671 avg lat: 0.117205
2021-05-14T23:48:41.522126+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:48:41.522126+0000    20     123     43713     43590   544.768     736.5   0.0166504    0.117205
2021-05-14T23:48:42.522395+0000 Total time run:         20.0548
Total writes made:      43713
Write size:             262144
Object size:            262144
Bandwidth (MB/sec):     544.92
Stddev Bandwidth:       211.663
Max bandwidth (MB/sec): 736.5
Min bandwidth (MB/sec): 99.25
Average IOPS:           2179
Stddev IOPS:            846.65
Max IOPS:               2946
Min IOPS:               397
Average Latency(s):     0.117135
Stddev Latency(s):      0.103499
Max latency(s):         1.31671
Min latency(s):         0.0152334

[1;32mlocalhost.localdomain	[2021-05-14T16:48:43,224663646-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3993367


[1;33mlocalhost.localdomain	[2021-05-14T16:48:43,233837550-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:07,401939902-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.71k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:07,420067307-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:16,434145210-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.71k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:16,452206574-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:25,737269552-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.71k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:25,755284874-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:35,152301197-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.71k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:35,170217952-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:44,791551183-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.71k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:44,809700447-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:44,824247550-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:49:44,832956554-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:49:44,852802309-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=3996998
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T16:49:44,869789624-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T16:49:44,909128362-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:49:44,915777034-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e879b204-a8eb-499a-bb48-317ba5dd448e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e879b204-a8eb-499a-bb48-317ba5dd448e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.8fBRww:/tmp/ceph-asok.8fBRww -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:49:46.404+0000 ffff89eec010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:49:47.228+0000 ffff89eec010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:49:47.228+0000 ffff89eec010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:49:47.250762+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:49:47.250762+0000     0       0         0         0         0         0           -           0
2021-05-14T23:49:48.251050+0000     1     255      6043      5788   1446.35      1447   0.0417916   0.0431127
2021-05-14T23:49:49.251257+0000     2     255     12702     12447   1555.37   1664.75   0.0386501   0.0406022
2021-05-14T23:49:50.251586+0000     3     255     18886     18631   1552.07      1546   0.0430802   0.0407979
2021-05-14T23:49:51.251947+0000     4     255     25430     25175   1572.91      1636    0.048687   0.0402834
2021-05-14T23:49:52.252274+0000     5     255     31365     31110   1554.98   1483.75    0.042789   0.0408557
2021-05-14T23:49:53.252610+0000     6     255     37639     37384   1557.15    1568.5   0.0389881   0.0408418
2021-05-14T23:49:54.252860+0000 Total time run:       6.92123
Total reads made:     43713
Read size:            262144
Object size:          262144
Bandwidth (MB/sec):   1578.95
Average IOPS:         6315
Stddev IOPS:          337.365
Max IOPS:             6659
Min IOPS:             5788
Average Latency(s):   0.040371
Max latency(s):       0.10343
Min latency(s):       0.00335457

[1;32mlocalhost.localdomain	[2021-05-14T16:49:54,931975814-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 3996998


[1;7;39;49m[2021-05-14T16:49:54,938795501-07:00][RUNNING][ROUND 2/4/40] object_size=256KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:49:54,949555386-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:49:54,969326892-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40779\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1747448\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid a7a96117-646c-47a4-af03-3651e3bf0c86\nsetting min_mon_release = octopus\nepoch 0\nfsid a7a96117-646c-47a4-af03-3651e3bf0c86\nlast_changed 2021-05-14T16:50:26.457074-0700\ncreated 2021-05-14T16:50:26.457074-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40779/0,v1:10.10.1.2:40780/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1747448 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 dd6d8396-2409-43c1-b611-3d1a2a2b4f4d\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 7fb61383-b912-4ae3-8883-16c0964d9b7f\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 dd1c85ea-1f14-441d-86af-a6fd81ad5946\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42779\n'
10.10.1.2: b'  w/ user/pass: admin / 7ba4974a-b629-4b0e-89ac-93eef7c56616\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:50:50 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40779
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1747448
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid a7a96117-646c-47a4-af03-3651e3bf0c86
setting min_mon_release = octopus
epoch 0
fsid a7a96117-646c-47a4-af03-3651e3bf0c86
last_changed 2021-05-14T16:50:26.457074-0700
created 2021-05-14T16:50:26.457074-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40779/0,v1:10.10.1.2:40780/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1747448 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 dd6d8396-2409-43c1-b611-3d1a2a2b4f4d
0
start osd.0
add osd1 7fb61383-b912-4ae3-8883-16c0964d9b7f
1
start osd.1
add osd2 dd1c85ea-1f14-441d-86af-a6fd81ad5946
2
start osd.2


restful urls: https://10.10.1.2:42779
  w/ user/pass: admin / 7ba4974a-b629-4b0e-89ac-93eef7c56616


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:49:57.013-0700 7fa89864a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:49:57.013-0700 7fa89864a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:49:57.033-0700 7f45c7c651c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:49:57.033-0700 7f45c7c651c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40779,v1:10.10.1.2:40780] --print /tmp/ceph_monmap.1747448 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1747448 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1747448 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42779 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55fc92480000 @  0x7f7e62dc5680 0x7f7e62de6824 0x7f7e63581187 0x7f7e63589355 0x7f7e63581708 0x7f7e63581877 0x7f7e63582c24 0x7f7e6359aec1 0x7f7e6350d5f3 0x7f7e6356ee97 0x7f7e63576b1a 0x7f7e62c79d84 0x7f7e62d95609 0x7f7e62969103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.JKqNYw9IOc 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new dd6d8396-2409-43c1-b611-3d1a2a2b4f4d -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDRDJ9gD1lyBhAA371VuMBf/9wcLnaAuW+ySg== --osd-uuid dd6d8396-2409-43c1-b611-3d1a2a2b4f4d 
2021-05-14T16:50:41.929-0700 7fa7f1ea0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:50:41.953-0700 7fa7f1ea0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:50:41.953-0700 7fa7f1ea0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55a17f33c000 @  0x7fa7f2869680 0x7fa7f288a824 0x55a174923447 0x55a17492b4b5 0x55a1749239c8 0x55a174923b37 0x55a174924ee4 0x55a1746f5ca1 0x55a1748cd423 0x55a1746e62a7 0x55a1746eb53a 0x7fa7f23bcd84 0x7fa7f2541609 0x7fa7f20aa103
2021-05-14T16:50:42.397-0700 7fa7f1ea0f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7fb61383-b912-4ae3-8883-16c0964d9b7f -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5614429da000 @  0x7fa1982a4680 0x7fa1982c5824 0x56143750c447 0x5614375144b5 0x56143750c9c8 0x56143750cb37 0x56143750dee4 0x5614372deca1 0x5614374b6423 0x5614372cf2a7 0x5614372d453a 0x7fa197df7d84 0x7fa197f7c609 0x7fa197ae5103
2021-05-14T16:50:43.145-0700 7fa1978dbf00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDSDJ9g4JoTLBAALjaY+QC3V0g5l3TcBNK13Q== --osd-uuid 7fb61383-b912-4ae3-8883-16c0964d9b7f 
2021-05-14T16:50:43.505-0700 7fa1978dbf00 -1 osd.0 0 log_to_monitors {default=true}
2021-05-14T16:50:43.521-0700 7f95e6eb2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:50:43.541-0700 7f95e6eb2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:50:43.541-0700 7f95e6eb2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5622871b8000 @  0x7f95e787b680 0x7f95e789c824 0x56227c6db447 0x56227c6e34b5 0x56227c6db9c8 0x56227c6dbb37 0x56227c6dcee4 0x56227c4adca1 0x56227c685423 0x56227c49e2a7 0x56227c4a353a 0x7f95e73ced84 0x7f95e7553609 0x7f95e70bc103
2021-05-14T16:50:43.925-0700 7f95e6eb2f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new dd1c85ea-1f14-441d-86af-a6fd81ad5946 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5611fff7e000 @  0x7f759ea91680 0x7f759eab2824 0x5611f5947447 0x5611f594f4b5 0x5611f59479c8 0x5611f5947b37 0x5611f5948ee4 0x5611f5719ca1 0x5611f58f1423 0x5611f570a2a7 0x5611f570f53a 0x7f759e5e4d84 0x7f759e769609 0x7f759e2d2103
2021-05-14T16:50:44.665-0700 7f759e0c8f00 -1 Falling back to public interface
2021-05-14T16:50:44.997-0700 7f759e0c8f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDUDJ9gP8oXERAADaP2V1SkPV57lLRiom6oTA== --osd-uuid dd1c85ea-1f14-441d-86af-a6fd81ad5946 
2021-05-14T16:50:45.145-0700 7fb6ae7e0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:50:45.165-0700 7fb6ae7e0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:50:45.165-0700 7fb6ae7e0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55f41f7da000 @  0x7fb6af1a9680 0x7fb6af1ca824 0x55f4143cf447 0x55f4143d74b5 0x55f4143cf9c8 0x55f4143cfb37 0x55f4143d0ee4 0x55f4141a1ca1 0x55f414379423 0x55f4141922a7 0x55f41419753a 0x7fb6aecfcd84 0x7fb6aee81609 0x7fb6ae9ea103
2021-05-14T16:50:45.569-0700 7fb6ae7e0f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55c6a1406000 @  0x7fe35eb65680 0x7fe35eb86824 0x55c696bdc447 0x55c696be44b5 0x55c696bdc9c8 0x55c696bdcb37 0x55c696bddee4 0x55c6969aeca1 0x55c696b86423 0x55c69699f2a7 0x55c6969a453a 0x7fe35e6b8d84 0x7fe35e83d609 0x7fe35e3a6103
2021-05-14T16:50:46.349-0700 7fe35e19cf00 -1 Falling back to public interface
2021-05-14T16:50:46.697-0700 7fe35e19cf00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:50:50,479871253-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:50:50,501792327-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:50:50,582680685-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:50:50,589319590-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:50:52.395+0000 ffff79d4b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:50:53.223+0000 ffff78ae91e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:50:54,657900345-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:50:54,664157886-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:50:56.536+0000 ffff8c9ca1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:50:57.384+0000 ffff8c9ca1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:50:59,136961706-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:50:59,143317333-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:00.805+0000 ffffaeae11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:01.637+0000 ffffad87f1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:51:03,026530267-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:03,032984731-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:04.673+0000 ffff843d51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:05.526+0000 ffff843d51e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:08.678+0000 ffff942f61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:09.506+0000 ffff942f61e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:51:10,963303389-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:10,969623745-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:12.639+0000 ffff7886e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:13.499+0000 ffff7886e1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:51:15,594280822-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:15,601089556-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:17.308+0000 ffff8234d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:18.140+0000 ffff8234d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:51:20,062051191-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:20,068277556-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:21.704+0000 ffffb1a791e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:22.557+0000 ffffb1a791e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:51:24,747265143-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:24,753505850-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:26.693+0000 ffff8e1d41e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:27.521+0000 ffff8cf721e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:51:29,868634217-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:29,875048879-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:31.526+0000 ffff92ea91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:32.350+0000 ffff91c471e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:51:34,594584148-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:34,601056750-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:36.267+0000 ffffaba0a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:37.115+0000 ffffaba0a1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:51:38,858080277-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:38,864357110-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:40.640+0000 ffffac35a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:41.448+0000 ffffac35a1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:51:42,730393988-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:51:42,736850672-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:51:44.452+0000 ffff94b4b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:51:45.292+0000 ffff94b4b1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:51:46,662815971-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:10,803789862-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:20,107023166-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:29,244552672-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:38,249865487-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:47,465444917-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:47,483688247-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:57,417491299-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:52:57,438584171-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:06,517912530-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:06,536108916-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:15,785363851-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:15,803659899-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:24,976136689-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:24,994335176-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:25,009115328-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:53:25,017884448-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:53:25,037935347-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4007560
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T16:53:25,054431477-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_write.log.2
[1;30mlocalhost.localdomain	[2021-05-14T16:53:25,095106387-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:53:25,101580234-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '262144', '-O', '262144', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:53:26.622+0000 ffffb8dbe010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:53:27.426+0000 ffffb8dbe010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:53:27.426+0000 ffffb8dbe010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:53:27.450187+0000 Maintaining 256 concurrent writes of 262144 bytes to objects of size 262144 for up to 20 seconds or 0 objects
2021-05-14T23:53:27.450248+0000 Object prefix: benchmark_data_localhost.localdomain_7
2021-05-14T23:53:27.503659+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:53:27.503659+0000     0       0         0         0         0         0           -           0
2021-05-14T23:53:28.503845+0000     1     255      2395      2140   534.966       535     0.11338    0.110432
2021-05-14T23:53:29.504050+0000     2     255      4666      4411   551.301    567.75    0.112203    0.111687
2021-05-14T23:53:30.504241+0000     3     255      6930      6675   556.165       566    0.111939    0.112128
2021-05-14T23:53:31.504423+0000     4     255      9096      8841   552.474     541.5    0.124267    0.113516
2021-05-14T23:53:32.504619+0000     5     255     10251      9996   499.716    288.75    0.317021    0.121287
2021-05-14T23:53:33.504785+0000     6     255     10653     10398   433.178     100.5    0.357429     0.13734
2021-05-14T23:53:34.504949+0000     7     255     11381     11126   397.291       182    0.159664    0.155932
2021-05-14T23:53:35.505127+0000     8     255     12113     11858     370.5       183    0.405186    0.163254
2021-05-14T23:53:36.505283+0000     9     255     12781     12526   347.886       167    0.116152    0.180431
2021-05-14T23:53:37.505463+0000    10     255     14856     14601   364.964    518.75    0.111924    0.174093
2021-05-14T23:53:38.505715+0000    11     255     16678     16423   373.184     455.5   0.0828172     0.17038
2021-05-14T23:53:39.505924+0000    12     255     18055     17800   370.767    344.25    0.159183    0.170823
2021-05-14T23:53:40.506161+0000    13     255     19242     18987   365.068    296.75     0.17005    0.173495
2021-05-14T23:53:41.506574+0000    14     255     21430     21175    378.05       547     0.10996     0.16838
2021-05-14T23:53:42.506822+0000    15     255     23755     23500   391.587    581.25   0.0846161    0.162558
2021-05-14T23:53:43.507025+0000    16     255     26077     25822   403.387     580.5   0.0795041    0.157814
2021-05-14T23:53:44.507212+0000    17     255     28405     28150   413.887       582    0.110784    0.153945
2021-05-14T23:53:45.507393+0000    18     255     30721     30466   423.054       579    0.110702    0.150641
2021-05-14T23:53:46.507568+0000    19     255     33035     32780    431.23     578.5    0.111806    0.147817
2021-05-14T23:53:47.507740+0000 min lat: 0.0261626 max lat: 1.05373 avg lat: 0.145066
2021-05-14T23:53:47.507740+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:53:47.507740+0000    20     125     35357     35232   440.313       613   0.0272965    0.145066
2021-05-14T23:53:48.507991+0000 Total time run:         20.0577
Total writes made:      35357
Write size:             262144
Object size:            262144
Bandwidth (MB/sec):     440.69
Stddev Bandwidth:       173.61
Max bandwidth (MB/sec): 613
Min bandwidth (MB/sec): 100.5
Average IOPS:           1762
Stddev IOPS:            694.439
Max IOPS:               2452
Min IOPS:               402
Average Latency(s):     0.144771
Stddev Latency(s):      0.108286
Max latency(s):         1.05373
Min latency(s):         0.0250702

[1;32mlocalhost.localdomain	[2021-05-14T16:53:49,159546822-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4007560


[1;33mlocalhost.localdomain	[2021-05-14T16:53:49,169047992-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:13,239813800-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 35.36k objects, 8.6 GiB
    usage:   17 GiB used, 283 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:13,257829091-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:22,314086407-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 35.36k objects, 8.6 GiB
    usage:   17 GiB used, 283 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:22,332460574-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:31,496926973-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 35.36k objects, 8.6 GiB
    usage:   17 GiB used, 283 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:31,519873922-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:40,631450118-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 35.36k objects, 8.6 GiB
    usage:   17 GiB used, 283 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:40,649926048-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:49,944359261-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 35.36k objects, 8.6 GiB
    usage:   17 GiB used, 283 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:49,962646368-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:49,977584152-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:54:49,986441817-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:54:50,006788971-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4011056
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T16:54:50,023418099-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T16:54:50,061983708-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:54:50,068398805-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '7b66b567-6abe-468a-b89b-79f3bf2a8a79', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 7b66b567-6abe-468a-b89b-79f3bf2a8a79 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.ypHiGc:/tmp/ceph-asok.ypHiGc -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:54:51.560+0000 ffffb89dc010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:54:52.376+0000 ffffb89dc010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:54:52.376+0000 ffffb89dc010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:54:52.402234+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:54:52.402234+0000     0       0         0         0         0         0           -           0
2021-05-14T23:54:53.402610+0000     1     255      6564      6309   1576.44   1577.25    0.039309   0.0396051
2021-05-14T23:54:54.402797+0000     2     255     12733     12478    1559.2   1542.25   0.0389418   0.0404917
2021-05-14T23:54:55.403128+0000     3     255     18985     18730    1560.3      1563   0.0421411   0.0405971
2021-05-14T23:54:56.403414+0000     4     255     25520     25265   1578.54   1633.75   0.0378411   0.0402211
2021-05-14T23:54:57.403611+0000     5     255     31556     31301   1564.58      1509   0.0417925   0.0406117
2021-05-14T23:54:58.403873+0000 Total time run:       5.61757
Total reads made:     35357
Read size:            262144
Object size:          262144
Bandwidth (MB/sec):   1573.5
Average IOPS:         6294
Stddev IOPS:          184.761
Max IOPS:             6535
Min IOPS:             6036
Average Latency(s):   0.040497
Max latency(s):       0.113372
Min latency(s):       0.00131664

[1;32mlocalhost.localdomain	[2021-05-14T16:54:59,076962601-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4011056


[1;7;39;49m[2021-05-14T16:54:59,083208109-07:00][RUNNING][ROUND 3/4/40] object_size=256KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:54:59,092073124-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T16:54:59,109694117-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40347\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1748567\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 58540791-0f35-44f8-a20b-b4b4260f0ced\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 58540791-0f35-44f8-a20b-b4b4260f0ced\nlast_changed 2021-05-14T16:55:32.422309-0700\ncreated 2021-05-14T16:55:32.422309-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40347/0,v1:10.10.1.2:40348/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1748567 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 adc4d9fe-117b-4711-9b36-9c68faa92bcb\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 fd59ba2d-9eef-4f97-9324-0bf34e6ed2dd\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 200e0de8-b5be-4d10-9cf1-2f57cc57270d\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42347\n  w/ user/pass: admin / 31b7e42d-5723-4377-b678-f30ddb59db97\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 16:55:56 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40347
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1748567
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 58540791-0f35-44f8-a20b-b4b4260f0ced
setting min_mon_release = octopus
epoch 0
fsid 58540791-0f35-44f8-a20b-b4b4260f0ced
last_changed 2021-05-14T16:55:32.422309-0700
created 2021-05-14T16:55:32.422309-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40347/0,v1:10.10.1.2:40348/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1748567 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 adc4d9fe-117b-4711-9b36-9c68faa92bcb
0
start osd.0
add osd1 fd59ba2d-9eef-4f97-9324-0bf34e6ed2dd
1
start osd.1
add osd2 200e0de8-b5be-4d10-9cf1-2f57cc57270d
2
start osd.2


restful urls: https://10.10.1.2:42347
  w/ user/pass: admin / 31b7e42d-5723-4377-b678-f30ddb59db97


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T16:55:01.175-0700 7f9a2d46f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:55:01.175-0700 7f9a2d46f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:55:01.191-0700 7f7cc9cd91c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T16:55:01.191-0700 7f7cc9cd91c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40347,v1:10.10.1.2:40348] --print /tmp/ceph_monmap.1748567 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1748567 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1748567 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42347 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d4bc46e000 @  0x7fe63f64e680 0x7fe63f66f824 0x7fe63fe0a187 0x7fe63fe12355 0x7fe63fe0a708 0x7fe63fe0a877 0x7fe63fe0bc24 0x7fe63fe23ec1 0x7fe63fd965f3 0x7fe63fdf7e97 0x7fe63fdffb1a 0x7fe63f502d84 0x7fe63f61e609 0x7fe63f1f2103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.8ZKgP2cwS4 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new adc4d9fe-117b-4711-9b36-9c68faa92bcb -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQADDp9gXZH9CBAAnrgR+Z8yDh5kUGmcIJ4SSw== --osd-uuid adc4d9fe-117b-4711-9b36-9c68faa92bcb 
2021-05-14T16:55:47.968-0700 7fe00fd1ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:55:47.988-0700 7fe00fd1ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T16:55:47.988-0700 7fe00fd1ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55e805fdc000 @  0x7fe0106e7680 0x7fe010708824 0x55e7fb73e447 0x55e7fb7464b5 0x55e7fb73e9c8 0x55e7fb73eb37 0x55e7fb73fee4 0x55e7fb510ca1 0x55e7fb6e8423 0x55e7fb5012a7 0x55e7fb50653a 0x7fe01023ad84 0x7fe0103bf609 0x7fe00ff28103
2021-05-14T16:55:48.408-0700 7fe00fd1ef00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new fd59ba2d-9eef-4f97-9324-0bf34e6ed2dd -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55f6ee028000 @  0x7f1f62bcc680 0x7f1f62bed824 0x55f6e2d93447 0x55f6e2d9b4b5 0x55f6e2d939c8 0x55f6e2d93b37 0x55f6e2d94ee4 0x55f6e2b65ca1 0x55f6e2d3d423 0x55f6e2b562a7 0x55f6e2b5b53a 0x7f1f6271fd84 0x7f1f628a4609 0x7f1f6240d103
2021-05-14T16:55:49.208-0700 7f1f62203f00 -1 Falling back to public interface
2021-05-14T16:55:49.564-0700 7f1f62203f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAEDp9g8wSpLxAAF8fDFkenVGMxmCgwYVREzw== --osd-uuid fd59ba2d-9eef-4f97-9324-0bf34e6ed2dd 
2021-05-14T16:55:49.644-0700 7fa80fb77f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:55:49.664-0700 7fa80fb77f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T16:55:49.664-0700 7fa80fb77f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x556b624e0000 @  0x7fa810540680 0x7fa810561824 0x556b5827a447 0x556b582824b5 0x556b5827a9c8 0x556b5827ab37 0x556b5827bee4 0x556b5804cca1 0x556b58224423 0x556b5803d2a7 0x556b5804253a 0x7fa810093d84 0x7fa810218609 0x7fa80fd81103
2021-05-14T16:55:50.072-0700 7fa80fb77f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 200e0de8-b5be-4d10-9cf1-2f57cc57270d -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55c0d6da8000 @  0x7f46f70dd680 0x7f46f70fe824 0x55c0caee6447 0x55c0caeee4b5 0x55c0caee69c8 0x55c0caee6b37 0x55c0caee7ee4 0x55c0cacb8ca1 0x55c0cae90423 0x55c0caca92a7 0x55c0cacae53a 0x7f46f6c30d84 0x7f46f6db5609 0x7f46f691e103
2021-05-14T16:55:50.840-0700 7f46f6714f00 -1 Falling back to public interface
2021-05-14T16:55:51.228-0700 7f46f6714f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAGDp9gv6EEGxAAmp1aM9fTxJmrgMQmXFqukg== --osd-uuid 200e0de8-b5be-4d10-9cf1-2f57cc57270d 
2021-05-14T16:55:51.272-0700 7fed0ff26f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:55:51.296-0700 7fed0ff26f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T16:55:51.296-0700 7fed0ff26f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55ec4b442000 @  0x7fed108ef680 0x7fed10910824 0x55ec3f839447 0x55ec3f8414b5 0x55ec3f8399c8 0x55ec3f839b37 0x55ec3f83aee4 0x55ec3f60bca1 0x55ec3f7e3423 0x55ec3f5fc2a7 0x55ec3f60153a 0x7fed10442d84 0x7fed105c7609 0x7fed10130103
2021-05-14T16:55:51.744-0700 7fed0ff26f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x563e0d41c000 @  0x7fdd0ff82680 0x7fdd0ffa3824 0x563e01f45447 0x563e01f4d4b5 0x563e01f459c8 0x563e01f45b37 0x563e01f46ee4 0x563e01d17ca1 0x563e01eef423 0x563e01d082a7 0x563e01d0d53a 0x7fdd0fad5d84 0x7fdd0fc5a609 0x7fdd0f7c3103
2021-05-14T16:55:52.492-0700 7fdd0f5b9f00 -1 Falling back to public interface
2021-05-14T16:55:52.832-0700 7fdd0f5b9f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T16:55:56,613008495-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T16:55:56,634749487-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T16:55:56,717140999-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:55:56,723298164-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:55:58.392+0000 ffffb08321e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:55:59.232+0000 ffffb08321e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T16:56:00,633157060-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:00,639622662-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:02.448+0000 ffff9b0961e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:03.289+0000 ffff9b0961e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T16:56:04,994095141-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:05,000719906-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:06.873+0000 ffffaa3181e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:07.697+0000 ffffa90b61e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T16:56:09,106606721-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:09,114732450-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:10.782+0000 ffffa01251e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:11.634+0000 ffffa01251e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:14.738+0000 ffffa52341e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:15.563+0000 ffffa4a331e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T16:56:16,939475650-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:16,945819567-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:18.615+0000 ffff76bbb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:19.495+0000 ffff759591e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T16:56:21,800227092-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:21,806821762-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:23.456+0000 ffff976f71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:24.276+0000 ffff964951e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T16:56:26,023541848-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:26,030635188-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:27.797+0000 ffffa29331e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:28.621+0000 ffffa29331e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T16:56:30,368428007-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:30,374707623-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:32.041+0000 ffff8b8011e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:32.902+0000 ffff8b8011e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:56:34,714062701-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:34,720165226-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:36.494+0000 ffff955db1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:37.318+0000 ffff955db1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T16:56:39,400381794-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:39,407538310-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:41.099+0000 ffff926991e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:41.959+0000 ffff914371e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T16:56:43,705630128-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:43,711820343-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:45.468+0000 ffff80a081e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:46.304+0000 ffff80a081e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T16:56:47,642220835-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:56:47,648309212-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:56:49.316+0000 ffff987951e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:56:50.177+0000 ffff987951e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.96  143      up          osd.2  
                       TOTAL  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.96/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T16:56:51,690308369-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:57:16,047465502-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:57:25,207464208-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:57:34,351032176-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:57:43,596946075-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:57:52,811464195-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:57:52,830055571-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:01,968730976-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:01,987283810-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:11,191641666-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:11,209790615-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:20,364064110-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:20,384414822-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:29,844582530-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:29,863528341-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:29,878421641-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:58:29,887343329-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:58:29,907740370-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4021580
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T16:58:29,924692983-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_write.log.3
[1;30mlocalhost.localdomain	[2021-05-14T16:58:29,965228180-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:58:29,971689610-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '262144', '-O', '262144', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:58:31.666+0000 ffff824a7010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:58:32.486+0000 ffff824a7010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:58:32.486+0000 ffff824a7010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:58:32.508977+0000 Maintaining 256 concurrent writes of 262144 bytes to objects of size 262144 for up to 20 seconds or 0 objects
2021-05-14T23:58:32.509040+0000 Object prefix: benchmark_data_localhost.localdomain_7
2021-05-14T23:58:32.558888+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:58:32.558888+0000     0       0         0         0         0         0           -           0
2021-05-14T23:58:33.559076+0000     1     255      2667      2412   602.965       603    0.102095   0.0985473
2021-05-14T23:58:34.559265+0000     2     255      5187      4932   616.424       630    0.159254   0.0998299
2021-05-14T23:58:35.559537+0000     3     255      7725      7470   622.392     634.5    0.078053    0.100464
2021-05-14T23:58:36.559904+0000     4     255     10267     10012   625.612     635.5    0.109008    0.100429
2021-05-14T23:58:37.560141+0000     5     255     12857     12602   629.959     647.5   0.0888362    0.100329
2021-05-14T23:58:38.560383+0000     6     255     15382     15127   630.148    631.25   0.0779747    0.100198
2021-05-14T23:58:39.560575+0000     7     255     17940     17685   631.467     639.5   0.0703015    0.100341
2021-05-14T23:58:40.560808+0000     8     255     19214     18959   592.336     318.5    0.131262    0.106423
2021-05-14T23:58:41.560975+0000     9     255     20268     20013   555.796     263.5      0.1347     0.11327
2021-05-14T23:58:42.561153+0000    10     255     21482     21227   530.562     303.5     0.10279    0.119488
2021-05-14T23:58:43.561325+0000    11     255     23023     22768   517.346    385.25    0.102773    0.122633
2021-05-14T23:58:44.561500+0000    12     255     25642     25387   528.786    654.75   0.0951534    0.120353
2021-05-14T23:58:45.561686+0000    13     255     28097     27842   535.313    613.75    0.136619    0.118712
2021-05-14T23:58:46.561904+0000    14     255     30754     30499   544.513    664.25   0.0941594    0.116971
2021-05-14T23:58:47.562140+0000    15     255     33286     33031   550.402       633   0.0824402    0.115678
2021-05-14T23:58:48.562329+0000    16     255     35862     35607   556.244       644   0.0971903     0.11457
2021-05-14T23:58:49.562517+0000    17     255     38338     38083   559.929       619     0.10201    0.113827
2021-05-14T23:58:50.562777+0000    18     255     40871     40616   563.993    633.25    0.046866    0.113082
2021-05-14T23:58:51.563068+0000    19     255     43441     43186   568.116     642.5    0.102017    0.112236
2021-05-14T23:58:52.563261+0000 min lat: 0.0214044 max lat: 0.679279 avg lat: 0.111534
2021-05-14T23:58:52.563261+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:58:52.563261+0000    20     112     45939     45827   572.716    660.25   0.0808056    0.111534
2021-05-14T23:58:53.563536+0000 Total time run:         20.0406
Total writes made:      45939
Write size:             262144
Object size:            262144
Bandwidth (MB/sec):     573.075
Stddev Bandwidth:       133.208
Max bandwidth (MB/sec): 664.25
Min bandwidth (MB/sec): 263.5
Average IOPS:           2292
Stddev IOPS:            532.832
Max IOPS:               2657
Min IOPS:               1054
Average Latency(s):     0.11141
Stddev Latency(s):      0.0568331
Max latency(s):         0.679279
Min latency(s):         0.0083775

[1;32mlocalhost.localdomain	[2021-05-14T16:58:54,252826684-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4021580


[1;33mlocalhost.localdomain	[2021-05-14T16:58:54,262390887-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:18,480056878-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.94k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:18,499002568-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:27,854280014-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.94k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:27,873157171-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:36,935177764-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.94k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:36,954036798-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:46,142111847-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.94k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:46,161121417-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:55,661188279-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.94k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:55,680057755-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:55,695594183-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T16:59:55,704548606-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T16:59:55,725134932-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4025241
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T16:59:55,741952745-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T16:59:55,781831755-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T16:59:55,788051433-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '1865d8a1-1d7e-4dd9-85fb-de1548e35999', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 1865d8a1-1d7e-4dd9-85fb-de1548e35999 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.EqIsjl:/tmp/ceph-asok.EqIsjl -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-14T23:59:57.341+0000 ffff90cef010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:59:58.153+0000 ffff90cef010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T23:59:58.153+0000 ffff90cef010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-14T23:59:58.176277+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-14T23:59:58.176277+0000     0       0         0         0         0         0           -           0
2021-05-14T23:59:59.176489+0000     1     255      6152      5897   1473.73   1474.25   0.0425758   0.0422864
2021-05-15T00:00:00.176808+0000     2     255     12772     12517    1564.1      1655    0.038327   0.0403735
2021-05-15T00:00:01.176991+0000     3     256     18942     18686   1556.72   1542.25   0.0431823    0.040674
2021-05-15T00:00:02.177200+0000     4     256     24959     24703   1543.53   1504.25   0.0426031   0.0411006
2021-05-15T00:00:03.177529+0000     5     255     31207     30952   1547.17   1562.25   0.0385188    0.041077
2021-05-15T00:00:04.177828+0000     6     255     37797     37542   1563.81    1647.5   0.0384057   0.0406697
2021-05-15T00:00:05.178039+0000     7     255     43918     43663   1558.97   1530.25   0.0418225   0.0408045
2021-05-15T00:00:06.178274+0000 Total time run:       7.35267
Total reads made:     45939
Read size:            262144
Object size:          262144
Bandwidth (MB/sec):   1561.98
Average IOPS:         6247
Stddev IOPS:          274.93
Max IOPS:             6620
Min IOPS:             5897
Average Latency(s):   0.0408104
Max latency(s):       0.093411
Min latency(s):       0.00342089

[1;32mlocalhost.localdomain	[2021-05-14T17:00:06,859605696-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4025241


[1;7;39;49m[2021-05-14T17:00:06,865779392-07:00][RUNNING][ROUND 4/4/40] object_size=256KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:00:06,874788319-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:00:06,892281998-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40897\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1749688\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid fff4fe4f-32df-4521-974e-7a2c3ef9f965\nsetting min_mon_release = octopus\nepoch 0\nfsid fff4fe4f-32df-4521-974e-7a2c3ef9f965\nlast_changed 2021-05-14T17:00:42.780462-0700\ncreated 2021-05-14T17:00:42.780462-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40897/0,v1:10.10.1.2:40898/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1749688 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 03e5a502-4428-480f-8d54-d00965d4188e\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 e9cbe06b-723c-49d1-8ea9-396603b7d8a5\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 d067bb07-61c9-4f95-9221-57281ebed8d5\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42897\n'
10.10.1.2: b'  w/ user/pass: admin / c15d358b-73e9-44d4-9006-9a221908f715\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:01:06 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40897
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1749688
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid fff4fe4f-32df-4521-974e-7a2c3ef9f965
setting min_mon_release = octopus
epoch 0
fsid fff4fe4f-32df-4521-974e-7a2c3ef9f965
last_changed 2021-05-14T17:00:42.780462-0700
created 2021-05-14T17:00:42.780462-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40897/0,v1:10.10.1.2:40898/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1749688 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 03e5a502-4428-480f-8d54-d00965d4188e
0
start osd.0
add osd1 e9cbe06b-723c-49d1-8ea9-396603b7d8a5
1
start osd.1
add osd2 d067bb07-61c9-4f95-9221-57281ebed8d5
2
start osd.2


restful urls: https://10.10.1.2:42897
  w/ user/pass: admin / c15d358b-73e9-44d4-9006-9a221908f715


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:00:09.058-0700 7f67641111c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:00:09.058-0700 7f67641111c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:00:09.078-0700 7fe41d8901c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:00:09.078-0700 7fe41d8901c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40897,v1:10.10.1.2:40898] --print /tmp/ceph_monmap.1749688 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1749688 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1749688 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42897 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a5ac63e000 @  0x7f0293241680 0x7f0293262824 0x7f02939fd187 0x7f0293a05355 0x7f02939fd708 0x7f02939fd877 0x7f02939fec24 0x7f0293a16ec1 0x7f02939895f3 0x7f02939eae97 0x7f02939f2b1a 0x7f02930f5d84 0x7f0293211609 0x7f0292de5103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.p4XOfEc6ay 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 03e5a502-4428-480f-8d54-d00965d4188e -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQA4D59gSh3iNxAAapmp+4wsWU1gtQjeQ233CQ== --osd-uuid 03e5a502-4428-480f-8d54-d00965d4188e 
2021-05-14T17:00:57.743-0700 7f30575cff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:00:57.763-0700 7f30575cff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:00:57.763-0700 7f30575cff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x558bbbcb4000 @  0x7f3057f98680 0x7f3057fb9824 0x558bb094c447 0x558bb09544b5 0x558bb094c9c8 0x558bb094cb37 0x558bb094dee4 0x558bb071eca1 0x558bb08f6423 0x558bb070f2a7 0x558bb071453a 0x7f3057aebd84 0x7f3057c70609 0x7f30577d9103
2021-05-14T17:00:58.167-0700 7f30575cff00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new e9cbe06b-723c-49d1-8ea9-396603b7d8a5 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x563037556000 @  0x7ffa1a820680 0x7ffa1a841824 0x56302bdd9447 0x56302bde14b5 0x56302bdd99c8 0x56302bdd9b37 0x56302bddaee4 0x56302bbabca1 0x56302bd83423 0x56302bb9c2a7 0x56302bba153a 0x7ffa1a373d84 0x7ffa1a4f8609 0x7ffa1a061103
2021-05-14T17:00:58.991-0700 7ffa19e57f00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQA6D59gI9yaIxAAUV3OA4/iHg5o7nZOpgFlOw== --osd-uuid e9cbe06b-723c-49d1-8ea9-396603b7d8a5 
2021-05-14T17:00:59.387-0700 7f4e190e6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:00:59.407-0700 7f4e190e6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:00:59.407-0700 7f4e190e6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:00:59.411-0700 7ffa19e57f00 -1 osd.0 0 log_to_monitors {default=true}
tcmalloc: large alloc 1074077696 bytes == 0x55e10e034000 @  0x7f4e19aaf680 0x7f4e19ad0824 0x55e102c78447 0x55e102c804b5 0x55e102c789c8 0x55e102c78b37 0x55e102c79ee4 0x55e102a4aca1 0x55e102c22423 0x55e102a3b2a7 0x55e102a4053a 0x7f4e19602d84 0x7f4e19787609 0x7f4e192f0103
2021-05-14T17:00:59.795-0700 7f4e190e6f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d067bb07-61c9-4f95-9221-57281ebed8d5 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55b329306000 @  0x7f078367d680 0x7f078369e824 0x55b31f33a447 0x55b31f3424b5 0x55b31f33a9c8 0x55b31f33ab37 0x55b31f33bee4 0x55b31f10cca1 0x55b31f2e4423 0x55b31f0fd2a7 0x55b31f10253a 0x7f07831d0d84 0x7f0783355609 0x7f0782ebe103
2021-05-14T17:01:00.595-0700 7f0782cb4f00 -1 Falling back to public interface
2021-05-14T17:01:00.943-0700 7f0782cb4f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQA8D59g3k7/DBAAb9P74XV3RF3t6ZYkws0s7g== --osd-uuid d067bb07-61c9-4f95-9221-57281ebed8d5 
2021-05-14T17:01:01.015-0700 7f4824a34f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:01:01.039-0700 7f4824a34f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:01:01.039-0700 7f4824a34f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5646b7a58000 @  0x7f48253fd680 0x7f482541e824 0x5646abe06447 0x5646abe0e4b5 0x5646abe069c8 0x5646abe06b37 0x5646abe07ee4 0x5646abbd8ca1 0x5646abdb0423 0x5646abbc92a7 0x5646abbce53a 0x7f4824f50d84 0x7f48250d5609 0x7f4824c3e103
2021-05-14T17:01:01.443-0700 7f4824a34f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55c9c4390000 @  0x7f7c52acd680 0x7f7c52aee824 0x55c9b9326447 0x55c9b932e4b5 0x55c9b93269c8 0x55c9b9326b37 0x55c9b9327ee4 0x55c9b90f8ca1 0x55c9b92d0423 0x55c9b90e92a7 0x55c9b90ee53a 0x7f7c52620d84 0x7f7c527a5609 0x7f7c5230e103
2021-05-14T17:01:02.163-0700 7f7c52104f00 -1 Falling back to public interface
2021-05-14T17:01:02.499-0700 7f7c52104f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:01:06,393828110-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:01:06,415726035-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:01:06,497354403-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:06,503599405-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:08.305+0000 ffff971421e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:09.137+0000 ffff971421e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:01:10,509586875-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:10,515833018-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:12.202+0000 ffffb3a101e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:13.062+0000 ffffb3a101e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:01:14,457692038-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:14,463747752-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:16.138+0000 ffff87e901e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:16.966+0000 ffff87e901e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:01:18,383261560-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:18,389286039-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:20.359+0000 ffffac6fb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:21.223+0000 ffffac6fb1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:24.288+0000 ffff9915b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:25.120+0000 ffff9915b1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:01:26,701032509-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:26,707299099-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:28.448+0000 ffff89de21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:29.329+0000 ffff89de21e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:01:31,726547940-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:31,733086587-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:33.449+0000 ffff80b8b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:34.281+0000 ffff7b59e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:01:36,373119634-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:36,380098157-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:38.118+0000 ffffa88841e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:39.018+0000 ffffa88841e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:01:40,842762189-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:40,849156722-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:42.487+0000 ffffae09f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:43.319+0000 fffface3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:01:45,310068674-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:45,316370580-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:47.076+0000 ffffac7811e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:47.920+0000 ffffab51f1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:01:49,794690465-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:49,801073416-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:51.596+0000 ffff8fc1e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:52.425+0000 ffff8fc1e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:01:54,380532958-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:54,386803389-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:56.053+0000 ffffa01921e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:01:56.889+0000 ffffa01921e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:01:58,234974066-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:01:58,241231895-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:01:59.938+0000 ffff84ad61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:02:00.790+0000 ffff84ad61e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  200 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:02:02,055676004-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:02:26,461180796-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:02:35,585637341-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:02:44,820394551-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:02:54,451540347-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:03,520926824-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   235 KiB used, 300 GiB / 300 GiB avail
    pgs:     1.042% pgs not active
             190 active+clean
             2   peering
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:03,540087211-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:12,717712431-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:12,736874274-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:22,154939653-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:22,173807205-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:31,637228757-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:31,656325547-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:40,996544964-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:41,015658678-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:41,031624912-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:03:41,040589519-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:03:41,061478202-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4035864
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T17:03:41,078802589-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T17:03:41,119800106-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:03:41,126295455-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '262144', '-O', '262144', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:03:42.631+0000 ffff9da18010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:03:43.440+0000 ffff9da18010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:03:43.440+0000 ffff9da18010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:03:43.460530+0000 Maintaining 256 concurrent writes of 262144 bytes to objects of size 262144 for up to 20 seconds or 0 objects
2021-05-15T00:03:43.460600+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:03:43.510539+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:03:43.510539+0000     0       0         0         0         0         0           -           0
2021-05-15T00:03:44.510741+0000     1     255      2970      2715   678.708    678.75   0.0679717   0.0878453
2021-05-15T00:03:45.510954+0000     2     255      5779      5524   690.405    702.25   0.0879636   0.0898067
2021-05-15T00:03:46.511146+0000     3     255      8628      8373   697.641    712.25   0.0650033   0.0897475
2021-05-15T00:03:47.511369+0000     4     255     11439     11184    698.88    702.75   0.0673144   0.0899695
2021-05-15T00:03:48.511565+0000     5     255     12392     12137   606.743    238.25    0.566524   0.0981999
2021-05-15T00:03:49.511784+0000     6     255     12756     12501   520.779        91   0.0826296    0.114255
2021-05-15T00:03:50.511976+0000     7     255     14406     14151   505.299     412.5   0.0586451    0.125593
2021-05-15T00:03:51.512168+0000     8     255     17249     16994   530.964    710.75   0.0664082    0.119483
2021-05-15T00:03:52.512379+0000     9     255     20073     19818   550.396       706    0.135094    0.115394
2021-05-15T00:03:53.512626+0000    10     255     22900     22645   566.015    706.75     0.13291    0.112303
2021-05-15T00:03:54.512820+0000    11     255     24315     24060   546.712    353.75    0.598665    0.115101
2021-05-15T00:03:55.512998+0000    12     255     25052     24797   516.504    184.25    0.144824    0.122538
2021-05-15T00:03:56.513171+0000    13     255     26588     26333   506.307       384    0.190828    0.125591
2021-05-15T00:03:57.513343+0000    14     255     29187     28932   516.545    649.75    0.186611    0.122647
2021-05-15T00:03:58.513520+0000    15     255     31887     31632     527.1       675    0.108897    0.120745
2021-05-15T00:03:59.513768+0000    16     255     34817     34562   539.927     732.5   0.0920966    0.118047
2021-05-15T00:04:00.514008+0000    17     255     37408     37153   546.261    647.75    0.131766    0.116416
2021-05-15T00:04:01.514195+0000    18     255     40301     40046   556.086    723.25   0.0704815    0.114619
2021-05-15T00:04:02.514427+0000    19     255     43152     42897   564.323    712.75    0.088344    0.113037
2021-05-15T00:04:03.514658+0000 min lat: 0.00531334 max lat: 1.45014 avg lat: 0.111396
2021-05-15T00:04:03.514658+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:04:03.514658+0000    20     121     45984     45863   573.173     741.5  0.00773156    0.111396
2021-05-15T00:04:04.514909+0000 Total time run:         20.0578
Total writes made:      45984
Write size:             262144
Object size:            262144
Bandwidth (MB/sec):     573.144
Stddev Bandwidth:       210.456
Max bandwidth (MB/sec): 741.5
Min bandwidth (MB/sec): 91
Average IOPS:           2292
Stddev IOPS:            841.825
Max IOPS:               2966
Min IOPS:               364
Average Latency(s):     0.111372
Stddev Latency(s):      0.0993314
Max latency(s):         1.45014
Min latency(s):         0.00531334

[1;32mlocalhost.localdomain	[2021-05-14T17:04:05,172399498-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4035864


[1;33mlocalhost.localdomain	[2021-05-14T17:04:05,181797365-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:29,364451118-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.98k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:29,383387936-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:39,066400788-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.98k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:39,086926723-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:48,217462467-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.98k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:48,236506028-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:57,359012517-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.98k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:04:57,377498627-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:05:06,660384974-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 45.98k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:05:06,678979222-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:05:06,694277555-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:05:06,703111700-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:05:06,723968201-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4039488
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T17:05:06,740942052-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T17:05:06,780712461-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:05:06,787448721-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c74e1aa9-a148-45d4-b99d-9f2e1eea2ddb --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.64guaU:/tmp/ceph-asok.64guaU -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:05:08.362+0000 ffff9751b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:05:09.166+0000 ffff9751b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:05:09.166+0000 ffff9751b010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:05:09.194777+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:05:09.194777+0000     0      17        17         0         0         0           -           0
2021-05-15T00:05:10.195024+0000     1     256      6227      5971    1491.2   1492.75   0.0387216   0.0418614
2021-05-15T00:05:11.195329+0000     2     255     12772     12517   1563.57    1636.5   0.0414499   0.0403382
2021-05-15T00:05:12.195586+0000     3     255     19365     19110   1591.65   1648.25     0.03847   0.0398091
2021-05-15T00:05:13.195780+0000     4     255     25306     25051   1564.99   1485.25   0.0420398   0.0405411
2021-05-15T00:05:14.196039+0000     5     255     31758     31503    1574.5      1613   0.0383173   0.0403606
2021-05-15T00:05:15.196329+0000     6     255     37807     37552   1564.06   1512.25   0.0429889   0.0406461
2021-05-15T00:05:16.196635+0000     7     255     43875     43620   1557.27      1517   0.0411867   0.0408513
2021-05-15T00:05:17.196884+0000 Total time run:       7.40319
Total reads made:     45984
Read size:            262144
Object size:          262144
Bandwidth (MB/sec):   1552.84
Average IOPS:         6211
Stddev IOPS:          285.92
Max IOPS:             6593
Min IOPS:             5941
Average Latency(s):   0.041044
Max latency(s):       0.11214
Min latency(s):       0.00517152

[1;32mlocalhost.localdomain	[2021-05-14T17:05:17,887380899-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4039488


[1;7;39;49m[2021-05-14T17:05:17,893785272-07:00][RUNNING][ROUND 5/4/40] object_size=256KB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:05:17,902887948-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:05:17,920680504-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40572\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1750807\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid cab40d70-bc9e-43f1-a3de-88d1fa279f22\nsetting min_mon_release = octopus\nepoch 0\nfsid cab40d70-bc9e-43f1-a3de-88d1fa279f22\nlast_changed 2021-05-14T17:05:53.305508-0700\ncreated 2021-05-14T17:05:53.305508-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40572/0,v1:10.10.1.2:40573/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1750807 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 e73719c5-960a-440a-a1e4-bae480062dfa\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 ad466311-91d3-4f27-b80c-fa5ec8d0b158\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 acac8cb5-c152-4a84-9d89-641b0e58c8cc\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42572\n  w/ user/pass: admin / 5c092ca0-01be-4c20-b143-fc4e7ec76b25\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:06:17 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40572
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1750807
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid cab40d70-bc9e-43f1-a3de-88d1fa279f22
setting min_mon_release = octopus
epoch 0
fsid cab40d70-bc9e-43f1-a3de-88d1fa279f22
last_changed 2021-05-14T17:05:53.305508-0700
created 2021-05-14T17:05:53.305508-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40572/0,v1:10.10.1.2:40573/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1750807 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 e73719c5-960a-440a-a1e4-bae480062dfa
0
start osd.0
add osd1 ad466311-91d3-4f27-b80c-fa5ec8d0b158
1
start osd.1
add osd2 acac8cb5-c152-4a84-9d89-641b0e58c8cc
2
start osd.2


restful urls: https://10.10.1.2:42572
  w/ user/pass: admin / 5c092ca0-01be-4c20-b143-fc4e7ec76b25


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:05:19.937-0700 7fbc191571c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:05:19.937-0700 7fbc191571c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:05:19.957-0700 7f6f8eb291c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:05:19.957-0700 7f6f8eb291c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40572,v1:10.10.1.2:40573] --print /tmp/ceph_monmap.1750807 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1750807 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1750807 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42572 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a2c6cae000 @  0x7fe6517c7680 0x7fe6517e8824 0x7fe651f83187 0x7fe651f8b355 0x7fe651f83708 0x7fe651f83877 0x7fe651f84c24 0x7fe651f9cec1 0x7fe651f0f5f3 0x7fe651f70e97 0x7fe651f78b1a 0x7fe65167bd84 0x7fe651797609 0x7fe65136b103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.gfjSmrPpuD 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new e73719c5-960a-440a-a1e4-bae480062dfa -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBwEJ9gKnKRDhAAUb0zuKTN0KnBgh9MMkvJSg== --osd-uuid e73719c5-960a-440a-a1e4-bae480062dfa 
2021-05-14T17:06:09.046-0700 7fadd2580f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:06:09.066-0700 7fadd2580f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:06:09.066-0700 7fadd2580f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55cf224bc000 @  0x7fadd2f49680 0x7fadd2f6a824 0x55cf169af447 0x55cf169b74b5 0x55cf169af9c8 0x55cf169afb37 0x55cf169b0ee4 0x55cf16781ca1 0x55cf16959423 0x55cf167722a7 0x55cf1677753a 0x7fadd2a9cd84 0x7fadd2c21609 0x7fadd278a103
2021-05-14T17:06:09.470-0700 7fadd2580f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new ad466311-91d3-4f27-b80c-fa5ec8d0b158 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55b6e409a000 @  0x7f4620eb3680 0x7f4620ed4824 0x55b6d8bda447 0x55b6d8be24b5 0x55b6d8bda9c8 0x55b6d8bdab37 0x55b6d8bdbee4 0x55b6d89acca1 0x55b6d8b84423 0x55b6d899d2a7 0x55b6d89a253a 0x7f4620a06d84 0x7f4620b8b609 0x7f46206f4103
2021-05-14T17:06:10.230-0700 7f46204eaf00 -1 Falling back to public interface
2021-05-14T17:06:10.582-0700 7f46204eaf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBxEJ9gBIlrMRAAIJD0yZTIAMHWaK0rHkhxyw== --osd-uuid ad466311-91d3-4f27-b80c-fa5ec8d0b158 
2021-05-14T17:06:10.638-0700 7fccfbe72f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:06:10.658-0700 7fccfbe72f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:06:10.658-0700 7fccfbe72f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55fa7e28e000 @  0x7fccfc83b680 0x7fccfc85c824 0x55fa72476447 0x55fa7247e4b5 0x55fa724769c8 0x55fa72476b37 0x55fa72477ee4 0x55fa72248ca1 0x55fa72420423 0x55fa722392a7 0x55fa7223e53a 0x7fccfc38ed84 0x7fccfc513609 0x7fccfc07c103
2021-05-14T17:06:11.050-0700 7fccfbe72f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new acac8cb5-c152-4a84-9d89-641b0e58c8cc -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55b69acf4000 @  0x7fd17f9d3680 0x7fd17f9f4824 0x55b690328447 0x55b6903304b5 0x55b6903289c8 0x55b690328b37 0x55b690329ee4 0x55b6900faca1 0x55b6902d2423 0x55b6900eb2a7 0x55b6900f053a 0x7fd17f526d84 0x7fd17f6ab609 0x7fd17f214103
2021-05-14T17:06:11.790-0700 7fd17f00af00 -1 Falling back to public interface
2021-05-14T17:06:12.138-0700 7fd17f00af00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBzEJ9grBupGBAAZw1LiLv0leyA1Y3DUVl2zw== --osd-uuid acac8cb5-c152-4a84-9d89-641b0e58c8cc 
2021-05-14T17:06:12.194-0700 7f843988af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:06:12.218-0700 7f843988af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:06:12.218-0700 7f843988af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5640afea0000 @  0x7f843a253680 0x7f843a274824 0x5640a4e8e447 0x5640a4e964b5 0x5640a4e8e9c8 0x5640a4e8eb37 0x5640a4e8fee4 0x5640a4c60ca1 0x5640a4e38423 0x5640a4c512a7 0x5640a4c5653a 0x7f8439da6d84 0x7f8439f2b609 0x7f8439a94103
2021-05-14T17:06:12.594-0700 7f843988af00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55bdb93be000 @  0x7f3833ee7680 0x7f3833f08824 0x55bdaf26e447 0x55bdaf2764b5 0x55bdaf26e9c8 0x55bdaf26eb37 0x55bdaf26fee4 0x55bdaf040ca1 0x55bdaf218423 0x55bdaf0312a7 0x55bdaf03653a 0x7f3833a3ad84 0x7f3833bbf609 0x7f3833728103
2021-05-14T17:06:13.310-0700 7f383351ef00 -1 Falling back to public interface
2021-05-14T17:06:13.646-0700 7f383351ef00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:06:17,594957932-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:06:17,616912351-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:06:17,710625495-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:17,716769888-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:19.446+0000 ffff769281e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:20.286+0000 ffff769281e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:06:21,718617167-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:21,725108180-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:23.519+0000 ffff95d4f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:24.351+0000 ffff95d4f1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:06:26,048519190-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:26,055097428-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:27.732+0000 ffff7c0c31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:28.568+0000 ffff7ae611e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:06:30,120098958-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:30,126851795-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:31.836+0000 ffff77c641e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:32.713+0000 ffff77c641e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:35.829+0000 ffffaf46a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:36.657+0000 ffffaf46a1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:06:38,082872180-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:38,089134118-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:39.758+0000 ffff9e5e91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:40.626+0000 ffff9e5e91e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:06:42,331295017-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:42,337622801-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:44.075+0000 ffffb0f611e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:44.899+0000 ffffb0f611e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:06:47,411589714-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:47,418129245-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:49.091+0000 ffff92aad1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:49.948+0000 ffff9184b1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:06:52,347700443-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:52,353910308-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:54.152+0000 ffff9586b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:06:54.988+0000 ffff9586b1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:06:57,637586181-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:06:57,644006906-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:06:59.313+0000 ffffb2c5c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:07:00.145+0000 ffffb19fa1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:07:02,583939558-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:07:02,589969827-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:07:04.310+0000 ffffa06c91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:07:05.158+0000 ffffa06c91e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:07:06,956216576-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:07:06,962540400-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:07:08.791+0000 ffff79d431e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:07:09.619+0000 ffff79d431e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 22 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:07:11,134587465-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:07:11,140772725-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:07:12.815+0000 ffff7a2161e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:07:13.676+0000 ffff7a2161e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  200 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:07:15,001155406-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:07:39,140111715-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:07:48,332319702-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:07:57,983866057-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:07,126570997-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:16,415691042-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:16,434837608-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:25,550260939-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:25,569207821-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:34,653317434-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:34,672308903-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:43,956969168-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:43,976122365-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:53,106301272-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:53,125576185-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:53,141559128-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:08:53,151029891-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:08:53,172374408-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4050311
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T17:08:53,189970698-07:00] INFO: > Run rados bench[0m
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_write.log.5
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
[1;30mlocalhost.localdomain	[2021-05-14T17:08:53,233797438-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:08:53,240243697-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '262144', '-O', '262144', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- rados bench 20 write --pool bench_rados -b 262144 -O 262144 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:08:54.717+0000 ffff911a1010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:08:55.549+0000 ffff911a1010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:08:55.549+0000 ffff911a1010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:08:55.569141+0000 Maintaining 256 concurrent writes of 262144 bytes to objects of size 262144 for up to 20 seconds or 0 objects
2021-05-15T00:08:55.569202+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:08:55.618863+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:08:55.618863+0000     0       0         0         0         0         0           -           0
2021-05-15T00:08:56.619045+0000     1     255      2416      2161   540.223    540.25    0.157083    0.108886
2021-05-15T00:08:57.619232+0000     2     255      4664      4409    551.06       562    0.174993     0.11083
2021-05-15T00:08:58.619408+0000     3     255      6948      6693   557.673       571   0.0854964    0.111568
2021-05-15T00:08:59.619608+0000     4     255      9185      8930    558.04    559.25    0.168591    0.112316
2021-05-15T00:09:00.619837+0000     5     255     11435     11180   558.906     562.5    0.111623    0.112787
2021-05-15T00:09:01.620105+0000     6     255     13510     13255    552.19    518.75    0.261782    0.113801
2021-05-15T00:09:02.620313+0000     7     255     15621     15366   548.682    527.75    0.114885    0.115376
2021-05-15T00:09:03.620498+0000     8     255     16569     16314   509.717       237    0.188222    0.123364
2021-05-15T00:09:04.620696+0000     9     255     18561     18306   508.404       498   0.0941309    0.124876
2021-05-15T00:09:05.620901+0000    10     255     20757     20502   512.452       549    0.123474    0.123308
2021-05-15T00:09:06.621086+0000    11     255     23043     22788   517.811     571.5    0.112579    0.122739
2021-05-15T00:09:07.621261+0000    12     255     25332     25077   522.339    572.25    0.112929    0.121754
2021-05-15T00:09:08.621514+0000    13     255     27617     27362    526.09    571.25    0.111744    0.120951
2021-05-15T00:09:09.621712+0000    14     255     29883     29628   528.969     566.5   0.0874973    0.120261
2021-05-15T00:09:10.621897+0000    15     255     32143     31888   531.364       565   0.0837205    0.119776
2021-05-15T00:09:11.622083+0000    16     255     34405     34150   533.491     565.5    0.162026    0.119349
2021-05-15T00:09:12.622285+0000    17     255     36691     36436    535.72     571.5    0.169659    0.118891
2021-05-15T00:09:13.622497+0000    18     255     38991     38736   537.895       575    0.161101    0.118448
2021-05-15T00:09:14.622681+0000    19     255     41291     41036   539.843       575    0.112879    0.118065
2021-05-15T00:09:15.622856+0000 min lat: 0.0220018 max lat: 0.532329 avg lat: 0.117533
2021-05-15T00:09:15.622856+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:09:15.622856+0000    20     121     43586     43465   543.208    607.25   0.0311651    0.117533
2021-05-15T00:09:16.623120+0000 Total time run:         20.0544
Total writes made:      43586
Write size:             262144
Object size:            262144
Bandwidth (MB/sec):     543.347
Stddev Bandwidth:       75.8493
Max bandwidth (MB/sec): 607.25
Min bandwidth (MB/sec): 237
Average IOPS:           2173
Stddev IOPS:            303.397
Max IOPS:               2429
Min IOPS:               948
Average Latency(s):     0.117465
Stddev Latency(s):      0.0440047
Max latency(s):         0.532329
Min latency(s):         0.0152947

[1;32mlocalhost.localdomain	[2021-05-14T17:09:17,293211524-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4050311


[1;33mlocalhost.localdomain	[2021-05-14T17:09:17,303102104-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:09:41,451952891-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.59k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:09:41,471486327-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:09:50,896271961-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.59k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:09:50,915770486-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:09:59,859276440-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.59k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:09:59,878520732-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:10:09,048037449-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.59k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:10:09,069328586-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:10:18,276202437-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 43.59k objects, 11 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:10:18,295579741-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:10:18,311571881-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:10:18,320723178-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:10:18,342142693-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4053822
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_256KB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T17:10:18,359285079-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_256KB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T17:10:18,399406227-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:10:18,405676506-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '418625f7-5313-421a-a6d4-ca94583c6763', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 418625f7-5313-421a-a6d4-ca94583c6763 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.sU3IbU:/tmp/ceph-asok.sU3IbU -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:10:19.912+0000 ffffa9d21010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:10:20.740+0000 ffffa9d21010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:10:20.740+0000 ffffa9d21010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:10:20.764732+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:10:20.764732+0000     0       0         0         0         0         0           -           0
2021-05-15T00:10:21.764995+0000     1     255      6372      6117   1528.62   1529.25    0.039075   0.0408542
2021-05-15T00:10:22.765333+0000     2     255     12843     12588   1572.91   1617.75   0.0455949   0.0400894
2021-05-15T00:10:23.765608+0000     3     255     18951     18696   1557.47      1527   0.0416735   0.0406654
2021-05-15T00:10:24.765851+0000     4     255     25482     25227   1576.19   1632.75   0.0423081   0.0402584
2021-05-15T00:10:25.766142+0000     5     255     31749     31494   1574.21   1566.75   0.0393064   0.0403666
2021-05-15T00:10:26.766435+0000     6     255     38022     37767   1573.14   1568.25   0.0379943   0.0404309
2021-05-15T00:10:27.766717+0000 Total time run:       6.9465
Total reads made:     43586
Read size:            262144
Object size:          262144
Bandwidth (MB/sec):   1568.63
Average IOPS:         6274
Stddev IOPS:          175.836
Max IOPS:             6531
Min IOPS:             6108
Average Latency(s):   0.0406301
Max latency(s):       0.115716
Min latency(s):       0.00325161

[1;32mlocalhost.localdomain	[2021-05-14T17:10:28,446564945-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4053822


[1;7;39;49m[2021-05-14T17:10:28,456215888-07:00][RUNNING][ROUND 1/5/40] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:10:28,464983495-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:10:28,482126782-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40465\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1751933\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 54f89bc1-a58d-4ce0-991e-1518a55fea11\nsetting min_mon_release = octopus\nepoch 0\nfsid 54f89bc1-a58d-4ce0-991e-1518a55fea11\nlast_changed 2021-05-14T17:11:02.043051-0700\ncreated 2021-05-14T17:11:02.043051-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40465/0,v1:10.10.1.2:40466/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1751933 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 2492bb1b-f8e9-4171-b554-ef9ee18c0b73\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 d7852c19-da80-46a2-91e7-7945ba27cdd0\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 919fa446-618b-4bd2-a041-c00fba3850cb\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42465\n  w/ user/pass: admin / 730e5697-549d-4621-8a5c-a99aff82a822\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:11:25 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40465
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1751933
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 54f89bc1-a58d-4ce0-991e-1518a55fea11
setting min_mon_release = octopus
epoch 0
fsid 54f89bc1-a58d-4ce0-991e-1518a55fea11
last_changed 2021-05-14T17:11:02.043051-0700
created 2021-05-14T17:11:02.043051-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40465/0,v1:10.10.1.2:40466/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1751933 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 2492bb1b-f8e9-4171-b554-ef9ee18c0b73
0
start osd.0
add osd1 d7852c19-da80-46a2-91e7-7945ba27cdd0
1
start osd.1
add osd2 919fa446-618b-4bd2-a041-c00fba3850cb
2
start osd.2


restful urls: https://10.10.1.2:42465
  w/ user/pass: admin / 730e5697-549d-4621-8a5c-a99aff82a822


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:10:30.516-0700 7fa57f6cf1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:10:30.516-0700 7fa57f6cf1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:10:30.536-0700 7f02924fa1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:10:30.536-0700 7f02924fa1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd ceph-mon still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40465,v1:10.10.1.2:40466] --print /tmp/ceph_monmap.1751933 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1751933 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1751933 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42465 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x562896da6000 @  0x7f3ee02b9680 0x7f3ee02da824 0x7f3ee0a75187 0x7f3ee0a7d355 0x7f3ee0a75708 0x7f3ee0a75877 0x7f3ee0a76c24 0x7f3ee0a8eec1 0x7f3ee0a015f3 0x7f3ee0a62e97 0x7f3ee0a6ab1a 0x7f3ee016dd84 0x7f3ee0289609 0x7f3edfe5d103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.JL9q1RxkZg 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 2492bb1b-f8e9-4171-b554-ef9ee18c0b73 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCkEZ9gTPHwGhAA6wFFfarcxMqzykbdIACXYQ== --osd-uuid 2492bb1b-f8e9-4171-b554-ef9ee18c0b73 
2021-05-14T17:11:17.260-0700 7f680ed5bf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:11:17.280-0700 7f680ed5bf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:11:17.280-0700 7f680ed5bf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55cfdc8b0000 @  0x7f680f724680 0x7f680f745824 0x55cfd1a31447 0x55cfd1a394b5 0x55cfd1a319c8 0x55cfd1a31b37 0x55cfd1a32ee4 0x55cfd1803ca1 0x55cfd19db423 0x55cfd17f42a7 0x55cfd17f953a 0x7f680f277d84 0x7f680f3fc609 0x7f680ef65103
2021-05-14T17:11:17.708-0700 7f680ed5bf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d7852c19-da80-46a2-91e7-7945ba27cdd0 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5581cde84000 @  0x7ff8a29b3680 0x7ff8a29d4824 0x5581c368b447 0x5581c36934b5 0x5581c368b9c8 0x5581c368bb37 0x5581c368cee4 0x5581c345dca1 0x5581c3635423 0x5581c344e2a7 0x5581c345353a 0x7ff8a2506d84 0x7ff8a268b609 0x7ff8a21f4103
2021-05-14T17:11:18.544-0700 7ff8a1feaf00 -1 Falling back to public interface
2021-05-14T17:11:18.900-0700 7ff8a1feaf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCmEZ9go651CBAAuzsnA1KxqrQlE0Jr+5oyOw== --osd-uuid d7852c19-da80-46a2-91e7-7945ba27cdd0 
2021-05-14T17:11:18.968-0700 7fee904d2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:11:18.988-0700 7fee904d2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:11:18.988-0700 7fee904d2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55606e38c000 @  0x7fee90e9b680 0x7fee90ebc824 0x556063aa7447 0x556063aaf4b5 0x556063aa79c8 0x556063aa7b37 0x556063aa8ee4 0x556063879ca1 0x556063a51423 0x55606386a2a7 0x55606386f53a 0x7fee909eed84 0x7fee90b73609 0x7fee906dc103
2021-05-14T17:11:19.372-0700 7fee904d2f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 919fa446-618b-4bd2-a041-c00fba3850cb -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55afd65d6000 @  0x7f6093b0f680 0x7f6093b30824 0x55afcbf68447 0x55afcbf704b5 0x55afcbf689c8 0x55afcbf68b37 0x55afcbf69ee4 0x55afcbd3aca1 0x55afcbf12423 0x55afcbd2b2a7 0x55afcbd3053a 0x7f6093662d84 0x7f60937e7609 0x7f6093350103
2021-05-14T17:11:20.112-0700 7f6093146f00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCnEZ9geLbSKxAASFqhqFmS8BAMEiEOvjCM2w== --osd-uuid 919fa446-618b-4bd2-a041-c00fba3850cb 
2021-05-14T17:11:20.528-0700 7f6f21f0cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:11:20.544-0700 7f6093146f00 -1 osd.1 0 log_to_monitors {default=true}
2021-05-14T17:11:20.548-0700 7f6f21f0cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:11:20.548-0700 7f6f21f0cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56146b8ae000 @  0x7f6f228d5680 0x7f6f228f6824 0x561461020447 0x5614610284b5 0x5614610209c8 0x561461020b37 0x561461021ee4 0x561460df2ca1 0x561460fca423 0x561460de32a7 0x561460de853a 0x7f6f22428d84 0x7f6f225ad609 0x7f6f22116103
2021-05-14T17:11:20.940-0700 7f6f21f0cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a52a186000 @  0x7f56ee2ef680 0x7f56ee310824 0x55a51e4a4447 0x55a51e4ac4b5 0x55a51e4a49c8 0x55a51e4a4b37 0x55a51e4a5ee4 0x55a51e276ca1 0x55a51e44e423 0x55a51e2672a7 0x55a51e26c53a 0x7f56ede42d84 0x7f56edfc7609 0x7f56edb30103
2021-05-14T17:11:21.632-0700 7f56ed926f00 -1 Falling back to public interface
2021-05-14T17:11:21.980-0700 7f56ed926f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:11:25,854480833-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:11:25,877299141-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:11:25,959760361-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:25,965832891-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:27.851+0000 ffff8cb791e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:28.707+0000 ffff8cb791e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:11:30,211337551-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:30,218465407-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:32.024+0000 ffff8d53a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:32.852+0000 ffff8d53a1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:11:34,348081541-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:34,354151686-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:35.985+0000 ffff7a4571e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:36.841+0000 ffff7a4571e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:11:38,243426605-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:38,249745987-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:39.913+0000 ffff7ad9d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:40.749+0000 ffff7ad9d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:44.398+0000 ffff76fdc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:45.234+0000 ffff76fdc1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:11:46,660617483-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:46,666973427-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:48.319+0000 ffffb2d4d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:49.159+0000 ffffb2d4d1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:11:51,449600296-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:51,456076335-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:53.083+0000 ffffa5ad31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:53.944+0000 ffffa48711e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:11:55,853595668-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:11:55,859936414-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:11:57.796+0000 ffff79a991e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:11:58.624+0000 ffff79a991e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:12:00,177435035-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:12:00,183642198-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:12:01.901+0000 ffff93c871e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:12:02.753+0000 ffff93c871e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:12:04,642731525-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:12:04,649155265-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:12:06.354+0000 ffff97eff1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:12:07.174+0000 ffff97eff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:12:09,215675330-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:12:09,221893535-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:12:10.947+0000 ffff77e0e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:12:11.787+0000 ffff77e0e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:12:13,452639136-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:12:13,459022820-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:12:15.127+0000 ffff8ba621e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:12:16.003+0000 ffff8ba621e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:12:17,278311666-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:12:17,284747813-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:12:18.988+0000 ffff7c6711e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:12:19.804+0000 ffff7b40f1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.96  143      up          osd.2  
                       TOTAL  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.96/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:12:21,190849819-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:12:45,222622508-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:12:54,676574867-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:03,822257034-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:12,948062710-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:22,085872610-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:22,105063956-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:31,386013003-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:31,405425682-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:40,632389672-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:40,651666068-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:49,795566887-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:49,815134363-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:59,199952013-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:59,219427148-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:59,235232820-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:13:59,244417767-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:13:59,265875702-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4064457
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T17:13:59,283204824-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 1 -O 1 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T17:13:59,323466904-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:13:59,329903336-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '1', '-O', '1', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- rados bench 20 write --pool bench_rados -b 1 -O 1 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:14:00.837+0000 ffffb1be3010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:14:01.678+0000 ffffb1be3010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:14:01.678+0000 ffffb1be3010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:14:01.695592+0000 Maintaining 256 concurrent writes of 1 bytes to objects of size 1 for up to 20 seconds or 0 objects
2021-05-15T00:14:01.695637+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:14:01.697025+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:14:01.697025+0000     0       0         0         0         0         0           -           0
2021-05-15T00:14:02.697186+0000     1     256     13087     12831  0.012236 0.0122366  0.00126709   0.0184142
2021-05-15T00:14:03.697352+0000     2     255     25089     24834 0.0118405  0.011447  0.00116309   0.0197795
2021-05-15T00:14:04.697497+0000     3     255     36527     36272 0.0115292 0.0109081  0.00107136   0.0204779
2021-05-15T00:14:05.697646+0000     4     256     47729     47473  0.011317 0.0106821  0.00142706    0.021071
2021-05-15T00:14:06.697791+0000     5     256     59226     58970 0.0112462 0.0109644  0.00156835   0.0213311
2021-05-15T00:14:07.697932+0000     6     255     71366     71111 0.0113013 0.0115786    0.001766   0.0213222
2021-05-15T00:14:08.698119+0000     7     255     82927     82672 0.0112616 0.0110254  0.00462736   0.0214146
2021-05-15T00:14:09.698280+0000     8     256     94008     93752 0.0111745 0.0105667  0.00156295    0.021602
2021-05-15T00:14:10.698470+0000     9     255    105750    105495  0.011177  0.011199  0.00261502   0.0216362
2021-05-15T00:14:11.698629+0000    10     255    117618    117363 0.0111909 0.0113182  0.00145588   0.0216213
2021-05-15T00:14:12.698813+0000    11     255    128573    128318 0.0111232 0.0104475  0.00135968   0.0217157
2021-05-15T00:14:13.698984+0000    12     256    139950    139694 0.0111002  0.010849   0.0014168   0.0218312
2021-05-15T00:14:14.699160+0000    13     255    150964    150709 0.0110542 0.0105047  0.00134443   0.0218688
2021-05-15T00:14:15.699310+0000    14     255    162807    162552 0.0110713 0.0112944   0.0154703   0.0219861
2021-05-15T00:14:16.699456+0000    15     255    174986    174731 0.0111074 0.0116148   0.0013003   0.0218557
2021-05-15T00:14:17.699601+0000    16     255    186753    186498 0.0111144 0.0112219   0.0495688   0.0219144
2021-05-15T00:14:18.699747+0000    17     256    199048    198792 0.0111502 0.0117245  0.00537835   0.0217786
2021-05-15T00:14:19.699915+0000    18     256    209231    208975 0.0110702 0.00971127  0.00147424   0.0219829
2021-05-15T00:14:20.700059+0000    19     256    220546    220290 0.0110554 0.0107908  0.00253491   0.0220346
2021-05-15T00:14:21.700208+0000 min lat: 0.000715998 max lat: 0.314841 avg lat: 0.0220499
2021-05-15T00:14:21.700208+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:14:21.700208+0000    20     186    231535    231349 0.0110299 0.0105467   0.0784483   0.0220499
2021-05-15T00:14:22.700451+0000 Total time run:         20.0469
Total writes made:      231535
Write size:             1
Object size:            1
Bandwidth (MB/sec):     0.0110146
Stddev Bandwidth:       0.000562227
Max bandwidth (MB/sec): 0.0122366
Min bandwidth (MB/sec): 0.00971127
Average IOPS:           11549
Stddev IOPS:            589.538
Max IOPS:               12831
Min IOPS:               10183
Average Latency(s):     0.0221206
Stddev Latency(s):      0.0529832
Max latency(s):         0.314841
Min latency(s):         0.000715998

[1;32mlocalhost.localdomain	[2021-05-14T17:14:23,372794219-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4064457


[1;33mlocalhost.localdomain	[2021-05-14T17:14:23,382842985-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:14:47,473496530-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 231.54k objects, 226 KiB
    usage:   684 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:14:47,493911756-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:14:56,669739223-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 231.54k objects, 226 KiB
    usage:   684 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:14:56,689984320-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:06,173577887-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 231.54k objects, 226 KiB
    usage:   684 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:06,193541626-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:15,428765547-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 231.54k objects, 226 KiB
    usage:   684 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:15,448616721-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:24,510667009-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 231.54k objects, 226 KiB
    usage:   684 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:24,530464354-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:24,546702414-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:15:24,555766681-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:15:24,577392929-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4068011
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T17:15:24,595219986-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T17:15:24,635378382-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:15:24,641657498-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '39589cc9-bf58-42c4-b416-511b7bda14f7', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 39589cc9-bf58-42c4-b416-511b7bda14f7 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.Y50B6Y:/tmp/ceph-asok.Y50B6Y -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:15:26.148+0000 ffff8b872010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:15:26.992+0000 ffff8b872010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:15:26.992+0000 ffff8b872010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:15:27.017127+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:15:27.017127+0000     0       0         0         0         0         0           -           0
2021-05-15T00:15:28.017290+0000     1     255     36603     36348 0.0346531 0.0346642  0.00620625  0.00699386
2021-05-15T00:15:29.017452+0000     2     255     73496     73241 0.0349156 0.0351839  0.00512681  0.00696435
2021-05-15T00:15:30.017615+0000     3     255    108196    107941 0.0343061 0.0330925  0.00454516  0.00709274
2021-05-15T00:15:31.017803+0000     4     255    145304    145049 0.0345752 0.0353889  0.00453754  0.00704258
2021-05-15T00:15:32.018001+0000     5     255    181063    180808 0.0344793 0.0341024  0.00671408  0.00706748
2021-05-15T00:15:33.018156+0000     6     255    217213    216958 0.0344777 0.0344753   0.0128518  0.00706831
2021-05-15T00:15:34.018388+0000 Total time run:       6.41624
Total reads made:     231535
Read size:            1
Object size:          1
Bandwidth (MB/sec):   0.0344141
Average IOPS:         36085
Stddev IOPS:          867.622
Max IOPS:             37108
Min IOPS:             34700
Average Latency(s):   0.00708099
Max latency(s):       0.0510087
Min latency(s):       0.000287074

[1;32mlocalhost.localdomain	[2021-05-14T17:15:34,672239972-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4068011


[1;7;39;49m[2021-05-14T17:15:34,679003895-07:00][RUNNING][ROUND 2/5/40] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:15:34,688044848-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:15:34,705866640-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash


[1;7;39;49m[2021-05-14T17:27:49,123015609-07:00][RUNNING][ROUND 1/1/20] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:27:49,128289612-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:27:49,146673098-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40188\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1766931\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 56367b77-0326-4935-b5b0-2f8575530dec\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 56367b77-0326-4935-b5b0-2f8575530dec\nlast_changed 2021-05-14T17:27:52.798041-0700\ncreated 2021-05-14T17:27:52.798041-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40188/0,v1:10.10.1.2:40189/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1766931 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 08db951d-040c-4b38-aaeb-e2f3786292a0\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 7f057b80-afd2-41be-92d4-cf93ac9a71c5\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 461da3ae-e2ca-453e-9770-ed40e25bbefc\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42188\n  w/ user/pass: admin / ce5fba0a-7a06-4b04-8d89-2e0358347f14\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:28:16 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40188
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1766931
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 56367b77-0326-4935-b5b0-2f8575530dec
setting min_mon_release = octopus
epoch 0
fsid 56367b77-0326-4935-b5b0-2f8575530dec
last_changed 2021-05-14T17:27:52.798041-0700
created 2021-05-14T17:27:52.798041-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40188/0,v1:10.10.1.2:40189/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1766931 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 08db951d-040c-4b38-aaeb-e2f3786292a0
0
start osd.0
add osd1 7f057b80-afd2-41be-92d4-cf93ac9a71c5
1
start osd.1
add osd2 461da3ae-e2ca-453e-9770-ed40e25bbefc
2
start osd.2


restful urls: https://10.10.1.2:42188
  w/ user/pass: admin / ce5fba0a-7a06-4b04-8d89-2e0358347f14


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: global_init: unable to open config file from search list /mnt/sda8/ceph/build/ceph.conf
dirname: missing operand
Try 'dirname --help' for more information.
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40188,v1:10.10.1.2:40189] --print /tmp/ceph_monmap.1766931 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1766931 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1766931 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42188 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d716dac000 @  0x7f84fa147680 0x7f84fa168824 0x7f84fa903187 0x7f84fa90b355 0x7f84fa903708 0x7f84fa903877 0x7f84fa904c24 0x7f84fa91cec1 0x7f84fa88f5f3 0x7f84fa8f0e97 0x7f84fa8f8b1a 0x7f84f9ffbd84 0x7f84fa117609 0x7f84f9ceb103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.4vkcG4hMhd 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 08db951d-040c-4b38-aaeb-e2f3786292a0 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCWFZ9gjFHtJRAA3kwoLdgoHVR3kqMljK/tPg== --osd-uuid 08db951d-040c-4b38-aaeb-e2f3786292a0 
2021-05-14T17:28:07.414-0700 7f50dd94cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:28:07.434-0700 7f50dd94cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:28:07.434-0700 7f50dd94cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5638ce1b2000 @  0x7f50de315680 0x7f50de336824 0x5638c2a49447 0x5638c2a514b5 0x5638c2a499c8 0x5638c2a49b37 0x5638c2a4aee4 0x5638c281bca1 0x5638c29f3423 0x5638c280c2a7 0x5638c281153a 0x7f50dde68d84 0x7f50ddfed609 0x7f50ddb56103
2021-05-14T17:28:07.878-0700 7f50dd94cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7f057b80-afd2-41be-92d4-cf93ac9a71c5 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x558f38eba000 @  0x7fd2e9d46680 0x7fd2e9d67824 0x558f2eb98447 0x558f2eba04b5 0x558f2eb989c8 0x558f2eb98b37 0x558f2eb99ee4 0x558f2e96aca1 0x558f2eb42423 0x558f2e95b2a7 0x558f2e96053a 0x7fd2e9899d84 0x7fd2e9a1e609 0x7fd2e9587103
2021-05-14T17:28:08.634-0700 7fd2e937df00 -1 Falling back to public interface
2021-05-14T17:28:08.978-0700 7fd2e937df00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCYFZ9grQ+XDhAAFHEw6bSkxFwB4+iQW/TpHA== --osd-uuid 7f057b80-afd2-41be-92d4-cf93ac9a71c5 
2021-05-14T17:28:09.034-0700 7f80998cff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:28:09.054-0700 7f80998cff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:28:09.054-0700 7f80998cff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55b0fe442000 @  0x7f809a298680 0x7f809a2b9824 0x55b0f31d8447 0x55b0f31e04b5 0x55b0f31d89c8 0x55b0f31d8b37 0x55b0f31d9ee4 0x55b0f2faaca1 0x55b0f3182423 0x55b0f2f9b2a7 0x55b0f2fa053a 0x7f8099debd84 0x7f8099f70609 0x7f8099ad9103
2021-05-14T17:28:09.450-0700 7f80998cff00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 461da3ae-e2ca-453e-9770-ed40e25bbefc -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x563f36f1c000 @  0x7f3ce05cb680 0x7f3ce05ec824 0x563f2b3bc447 0x563f2b3c44b5 0x563f2b3bc9c8 0x563f2b3bcb37 0x563f2b3bdee4 0x563f2b18eca1 0x563f2b366423 0x563f2b17f2a7 0x563f2b18453a 0x7f3ce011ed84 0x7f3ce02a3609 0x7f3cdfe0c103
2021-05-14T17:28:10.250-0700 7f3cdfc02f00 -1 Falling back to public interface
2021-05-14T17:28:10.626-0700 7f3cdfc02f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCZFZ9gdoNPNBAA9gK6ApM/ko/ETgN42gR5KA== --osd-uuid 461da3ae-e2ca-453e-9770-ed40e25bbefc 
2021-05-14T17:28:10.670-0700 7fe85a5bcf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:28:10.690-0700 7fe85a5bcf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:28:10.690-0700 7fe85a5bcf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5632f80ce000 @  0x7fe85af85680 0x7fe85afa6824 0x5632edeb5447 0x5632edebd4b5 0x5632edeb59c8 0x5632edeb5b37 0x5632edeb6ee4 0x5632edc87ca1 0x5632ede5f423 0x5632edc782a7 0x5632edc7d53a 0x7fe85aad8d84 0x7fe85ac5d609 0x7fe85a7c6103
2021-05-14T17:28:11.154-0700 7fe85a5bcf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55a4d0b2e000 @  0x7f7061b2e680 0x7f7061b4f824 0x55a4c565f447 0x55a4c56674b5 0x55a4c565f9c8 0x55a4c565fb37 0x55a4c5660ee4 0x55a4c5431ca1 0x55a4c5609423 0x55a4c54222a7 0x55a4c542753a 0x7f7061681d84 0x7f7061806609 0x7f706136f103
2021-05-14T17:28:11.930-0700 7f7061165f00 -1 Falling back to public interface
2021-05-14T17:28:12.270-0700 7f7061165f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:28:16,035509976-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:28:16,053435674-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:28:16,163368833-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:16,170243249-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:18.060+0000 ffffae9101e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:18.888+0000 ffffae9101e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:28:20,336906092-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:20,343131332-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:22.045+0000 ffff76c241e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:22.881+0000 ffff76c241e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:28:24,283840233-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:24,290091908-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:26.053+0000 ffff7af331e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:26.926+0000 ffff7af331e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:28:28,347217837-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:28,353339155-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:30.230+0000 ffff918df1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:31.058+0000 ffff8bfff1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:34.327+0000 ffffa222b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:35.163+0000 ffffa222b1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:28:36,583321267-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:36,590543833-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:38.384+0000 ffffb278b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:39.224+0000 ffffb278b1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:28:41,609878965-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:41,616011415-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:43.292+0000 ffff7b4ea1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:44.153+0000 ffff7b4ea1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:28:46,041566000-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:46,047867663-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:47.921+0000 ffff823601e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:48.769+0000 ffff823601e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:28:50,648346454-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:50,654721585-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:52.262+0000 ffffa74d31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:53.090+0000 ffffa62711e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:28:55,267125151-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:55,273570419-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:28:57.083+0000 ffff87b3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:28:57.971+0000 ffff87b3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:28:59,610713325-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:28:59,616997031-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:29:01.484+0000 ffff8ccc91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:29:02.308+0000 ffff8ccc91e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:29:03,891099598-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:29:03,897752501-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:29:05.592+0000 ffff8b61c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:29:06.432+0000 ffff8b61c1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:29:07,792053233-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:29:07,798254214-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:29:09.645+0000 ffffac6141e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:29:10.505+0000 ffffac6141e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  185 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.02  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.02  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.96  143      up          osd.2  
                       TOTAL  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.96/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:29:11,827279472-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:29:35,956149655-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:29:44,942791835-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:29:54,027728404-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:03,149317533-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:12,304041402-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:12,315166312-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:21,427568745-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:21,441569953-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:30,874578583-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:30,885512692-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:40,024330233-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:40,035526946-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:49,176818185-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:49,187973207-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:49,196228300-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:30:49,201157139-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:30:49,212737362-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4098636
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T17:30:49,222491868-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T17:30:49,260677791-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:30:49,267051883-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '1048576', '-O', '1048576', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:30:50.882+0000 ffff936ad010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:30:51.726+0000 ffff936ad010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:30:51.726+0000 ffff936ad010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:30:51.750697+0000 Maintaining 256 concurrent writes of 1048576 bytes to objects of size 1048576 for up to 20 seconds or 0 objects
2021-05-15T00:30:51.750779+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:30:51.963267+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:30:51.963267+0000     0       0         0         0         0         0           -           0
2021-05-15T00:30:52.963470+0000     1     255       724       469   468.972       469    0.361215     0.36443
2021-05-15T00:30:53.963657+0000     2     255      1438      1183   591.427       714    0.357415    0.362095
2021-05-15T00:30:54.963864+0000     3     255      2133      1878   625.905       695     0.38815    0.363648
2021-05-15T00:30:55.964087+0000     4     255      2853      2598    649.39       720    0.358092    0.361318
2021-05-15T00:30:56.964348+0000     5     255      3566      3311   662.076       713    0.358789    0.360824
2021-05-15T00:30:57.964567+0000     6     255      4276      4021   670.037       710    0.357844    0.361217
2021-05-15T00:30:58.964755+0000     7     255      4980      4725    674.87       704    0.371017     0.36094
2021-05-15T00:30:59.964971+0000     8     255      5376      5121       640       396    0.509605    0.379998
2021-05-15T00:31:00.965248+0000     9     255      6003      5748   638.536       627     0.38751    0.384697
2021-05-15T00:31:01.965570+0000    10     255      6638      6383   638.162       635    0.362188     0.38772
2021-05-15T00:31:02.965896+0000    11     255      7350      7095   644.854       712    0.360521    0.384796
2021-05-15T00:31:03.966150+0000    12     255      8067      7812   650.851       717    0.357411    0.382577
2021-05-15T00:31:04.966374+0000    13     255      8769      8514   654.774       702    0.360984    0.380871
2021-05-15T00:31:05.966568+0000    14     255      9485      9230   659.137       716    0.358642    0.379109
2021-05-15T00:31:06.966749+0000    15     255     10200      9945   662.852       715    0.357969    0.377721
2021-05-15T00:31:07.966937+0000    16     255     10920     10665   666.416       720    0.343534    0.376318
2021-05-15T00:31:08.967137+0000    17     255     11627     11372   668.795       707    0.357054     0.37528
2021-05-15T00:31:09.967330+0000    18     255     12341     12086   671.298       714    0.357528    0.374421
2021-05-15T00:31:10.967578+0000    19     255     13048     12793   673.168       707    0.362982    0.373596
2021-05-15T00:31:11.967840+0000 min lat: 0.0199956 max lat: 0.800535 avg lat: 0.369959
2021-05-15T00:31:11.967840+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:31:11.967840+0000    20      29     13761     13732   686.448       939   0.0420765    0.369959
2021-05-15T00:31:12.968132+0000 Total time run:         20.0418
Total writes made:      13761
Write size:             1048576
Object size:            1048576
Bandwidth (MB/sec):     686.616
Stddev Bandwidth:       105.476
Max bandwidth (MB/sec): 939
Min bandwidth (MB/sec): 396
Average IOPS:           686
Stddev IOPS:            105.476
Max IOPS:               939
Min IOPS:               396
Average Latency(s):     0.369298
Stddev Latency(s):      0.0624053
Max latency(s):         0.800535
Min latency(s):         0.0170816

[1;32mlocalhost.localdomain	[2021-05-14T17:31:13,673077827-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4098636


[1;33mlocalhost.localdomain	[2021-05-14T17:31:13,678295856-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:31:37,751094680-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 13.76k objects, 13 GiB
    usage:   27 GiB used, 273 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:31:37,762525616-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:31:46,923078077-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 13.76k objects, 13 GiB
    usage:   27 GiB used, 273 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:31:46,934626407-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:31:56,187015106-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 13.76k objects, 13 GiB
    usage:   27 GiB used, 273 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:31:56,198533657-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:32:05,594784802-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 13.76k objects, 13 GiB
    usage:   27 GiB used, 273 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:32:05,607942485-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:32:14,701841269-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 13.76k objects, 13 GiB
    usage:   27 GiB used, 273 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:32:14,713486802-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:32:14,721834345-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:32:14,726999536-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:32:14,738732879-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4102181
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T17:32:14,750234088-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T17:32:14,788039247-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:32:14,794468971-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'dab6406b-75ca-4724-b4d6-80f6286f72df', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid dab6406b-75ca-4724-b4d6-80f6286f72df --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jZSkAC:/tmp/ceph-asok.jZSkAC -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:32:16.593+0000 ffffaf323010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:32:17.425+0000 ffffaf323010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:32:17.425+0000 ffffaf323010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:32:17.447738+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:32:17.447738+0000     0       0         0         0         0         0           -           0
2021-05-15T00:32:18.447945+0000     1     255      1219       964   963.653       964    0.239895    0.223654
2021-05-15T00:32:19.448605+0000     2     255      2246      1991   994.992      1027    0.246408    0.236315
2021-05-15T00:32:20.449048+0000     3     255      3242      2987   995.181       996    0.246201    0.243118
2021-05-15T00:32:21.449302+0000     4     255      4253      3998   999.071      1011    0.252973    0.245216
2021-05-15T00:32:22.449643+0000     5     255      5236      4981    995.79       983    0.180498    0.247048
2021-05-15T00:32:23.450075+0000     6     255      6254      5999   999.419      1018    0.191085    0.247839
2021-05-15T00:32:24.450377+0000     7     255      7245      6990   998.173       991     0.25591    0.249913
2021-05-15T00:32:25.450746+0000     8     255      8221      7966   995.357       976    0.201648     0.25064
2021-05-15T00:32:26.451284+0000     9     255      9215      8960   995.147       994    0.192915    0.251698
2021-05-15T00:32:27.451960+0000    10     255     10166      9911   990.667       951    0.392454    0.253276
2021-05-15T00:32:28.452196+0000    11     255     11129     10874   988.131       963    0.202798    0.254157
2021-05-15T00:32:29.452684+0000    12     255     12133     11878   989.413      1004    0.192522    0.254264
2021-05-15T00:32:30.452876+0000    13     255     13110     12855   988.444       977    0.219216    0.254796
2021-05-15T00:32:31.453151+0000 Total time run:       13.8205
Total reads made:     13761
Read size:            1048576
Object size:          1048576
Bandwidth (MB/sec):   995.696
Average IOPS:         995
Stddev IOPS:          22.6673
Max IOPS:             1027
Min IOPS:             951
Average Latency(s):   0.253954
Max latency(s):       0.550573
Min latency(s):       0.0714457

[1;32mlocalhost.localdomain	[2021-05-14T17:32:32,131052543-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4102181


[1;7;39;49m[2021-05-14T17:32:32,135391755-07:00][RUNNING][ROUND 2/1/20] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:32:32,141806027-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:32:32,157442835-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40549\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1771628\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e28bd435-0b5d-44bc-9eea-0f8252572763\nsetting min_mon_release = octopus\nepoch 0\nfsid e28bd435-0b5d-44bc-9eea-0f8252572763\nlast_changed 2021-05-14T17:33:03.935264-0700\ncreated 2021-05-14T17:33:03.935264-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40549/0,v1:10.10.1.2:40550/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1771628 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 352f3de7-1fa8-49d8-8088-6a65b6f7eb50\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 9627f5c9-5fb9-47ee-a260-a637c7fa94f6\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 97b9dfd4-42e2-436a-b3c2-75a2cf12d13b\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42549\n  w/ user/pass: admin / ea5501a9-fabe-49bb-8abc-f0afa2a17a15\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:33:27 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40549
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1771628
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e28bd435-0b5d-44bc-9eea-0f8252572763
setting min_mon_release = octopus
epoch 0
fsid e28bd435-0b5d-44bc-9eea-0f8252572763
last_changed 2021-05-14T17:33:03.935264-0700
created 2021-05-14T17:33:03.935264-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40549/0,v1:10.10.1.2:40550/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1771628 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 352f3de7-1fa8-49d8-8088-6a65b6f7eb50
0
start osd.0
add osd1 9627f5c9-5fb9-47ee-a260-a637c7fa94f6
1
start osd.1
add osd2 97b9dfd4-42e2-436a-b3c2-75a2cf12d13b
2
start osd.2


restful urls: https://10.10.1.2:42549
  w/ user/pass: admin / ea5501a9-fabe-49bb-8abc-f0afa2a17a15


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:32:34.177-0700 7f40a1abe1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:32:34.177-0700 7f40a1abe1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:32:34.197-0700 7f865b5761c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:32:34.197-0700 7f865b5761c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40549,v1:10.10.1.2:40550] --print /tmp/ceph_monmap.1771628 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1771628 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1771628 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42549 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55e7395f8000 @  0x7f126ca45680 0x7f126ca66824 0x7f126d201187 0x7f126d209355 0x7f126d201708 0x7f126d201877 0x7f126d202c24 0x7f126d21aec1 0x7f126d18d5f3 0x7f126d1eee97 0x7f126d1f6b1a 0x7f126c8f9d84 0x7f126ca15609 0x7f126c5e9103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.FxiQ79Qm20 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 352f3de7-1fa8-49d8-8088-6a65b6f7eb50 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDNFp9g7ZpfOxAAZgqoc73QC9Hjo3S+++Ie4w== --osd-uuid 352f3de7-1fa8-49d8-8088-6a65b6f7eb50 
2021-05-14T17:33:18.805-0700 7f7d3ab2df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:33:18.825-0700 7f7d3ab2df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:33:18.825-0700 7f7d3ab2df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55b2a7ab8000 @  0x7f7d3b4f6680 0x7f7d3b517824 0x55b29c88b447 0x55b29c8934b5 0x55b29c88b9c8 0x55b29c88bb37 0x55b29c88cee4 0x55b29c65dca1 0x55b29c835423 0x55b29c64e2a7 0x55b29c65353a 0x7f7d3b049d84 0x7f7d3b1ce609 0x7f7d3ad37103
2021-05-14T17:33:19.233-0700 7f7d3ab2df00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 9627f5c9-5fb9-47ee-a260-a637c7fa94f6 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55cdebf52000 @  0x7f296affd680 0x7f296b01e824 0x55cde0ebe447 0x55cde0ec64b5 0x55cde0ebe9c8 0x55cde0ebeb37 0x55cde0ebfee4 0x55cde0c90ca1 0x55cde0e68423 0x55cde0c812a7 0x55cde0c8653a 0x7f296ab50d84 0x7f296acd5609 0x7f296a83e103
2021-05-14T17:33:20.049-0700 7f296a634f00 -1 Falling back to public interface
2021-05-14T17:33:20.401-0700 7f296a634f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDPFp9gQTXqJhAAKiyUGrgkw7gBYx74e6V0eQ== --osd-uuid 9627f5c9-5fb9-47ee-a260-a637c7fa94f6 
2021-05-14T17:33:20.437-0700 7feb2ac44f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:33:20.457-0700 7feb2ac44f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:33:20.457-0700 7feb2ac44f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55b0efbec000 @  0x7feb2b60d680 0x7feb2b62e824 0x55b0e5935447 0x55b0e593d4b5 0x55b0e59359c8 0x55b0e5935b37 0x55b0e5936ee4 0x55b0e5707ca1 0x55b0e58df423 0x55b0e56f82a7 0x55b0e56fd53a 0x7feb2b160d84 0x7feb2b2e5609 0x7feb2ae4e103
2021-05-14T17:33:20.833-0700 7feb2ac44f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 97b9dfd4-42e2-436a-b3c2-75a2cf12d13b -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56259457e000 @  0x7f30fd838680 0x7f30fd859824 0x562589dfb447 0x562589e034b5 0x562589dfb9c8 0x562589dfbb37 0x562589dfcee4 0x562589bcdca1 0x562589da5423 0x562589bbe2a7 0x562589bc353a 0x7f30fd38bd84 0x7f30fd510609 0x7f30fd079103
2021-05-14T17:33:21.569-0700 7f30fce6ff00 -1 Falling back to public interface
2021-05-14T17:33:21.921-0700 7f30fce6ff00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDRFp9gwH7TChAA88g78C/xdpmWYWto9u1ENg== --osd-uuid 97b9dfd4-42e2-436a-b3c2-75a2cf12d13b 
2021-05-14T17:33:21.985-0700 7f53d51f4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:33:22.005-0700 7f53d51f4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:33:22.005-0700 7f53d51f4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x564af8c10000 @  0x7f53d5bbd680 0x7f53d5bde824 0x564aed042447 0x564aed04a4b5 0x564aed0429c8 0x564aed042b37 0x564aed043ee4 0x564aece14ca1 0x564aecfec423 0x564aece052a7 0x564aece0a53a 0x7f53d5710d84 0x7f53d5895609 0x7f53d53fe103
2021-05-14T17:33:22.421-0700 7f53d51f4f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5626b9b2e000 @  0x7f2da2a5a680 0x7f2da2a7b824 0x5626ae23e447 0x5626ae2464b5 0x5626ae23e9c8 0x5626ae23eb37 0x5626ae23fee4 0x5626ae010ca1 0x5626ae1e8423 0x5626ae0012a7 0x5626ae00653a 0x7f2da25add84 0x7f2da2732609 0x7f2da229b103
2021-05-14T17:33:23.141-0700 7f2da2091f00 -1 Falling back to public interface
2021-05-14T17:33:23.481-0700 7f2da2091f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:33:27,304087052-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:33:27,326123974-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:33:27,415814822-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:27,422852765-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:29.145+0000 ffff919cc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:29.985+0000 ffff919cc1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:33:31,398221680-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:31,404674720-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:33.073+0000 ffffa23c31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:33.902+0000 ffffa23c31e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:33:35,353969754-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:35,360157669-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:37.022+0000 ffff83e101e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:37.882+0000 ffff83e101e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:33:39,282151717-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:39,288329401-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:40.999+0000 ffff9a58a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:41.827+0000 ffff9a58a1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:45.043+0000 ffff9bab71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:45.888+0000 ffff9bab71e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:33:47,311961044-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:47,318622290-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:49.156+0000 ffffa78b51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:49.992+0000 ffffa78b51e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:33:52,096580216-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:52,102683922-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:53.749+0000 ffff76a401e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:54.613+0000 ffff76a401e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:33:57,019632467-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:33:57,026015131-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:33:58.782+0000 ffff79f561e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:33:59.602+0000 ffff79f561e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:34:02,039279843-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:34:02,045917940-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:34:03.671+0000 ffff960e11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:34:04.507+0000 ffff94e7f1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:34:06,486680736-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:34:06,493063655-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:34:08.327+0000 ffff965e61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:34:09.180+0000 ffff965e61e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:34:10,902709893-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:34:10,909040243-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:34:12.572+0000 ffffb26341e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:34:13.400+0000 ffffb13d21e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:34:15,125161450-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:34:15,131320426-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:34:16.793+0000 ffff99be51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:34:17.637+0000 ffff99be51e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:34:18,895862855-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:34:18,901876127-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:34:20.721+0000 ffffb3a0b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:34:21.554+0000 ffffb3a0b1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93  143      up          osd.2  
                       TOTAL  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:34:22,878417063-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:34:46,879881353-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:34:56,034824753-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:06,087183415-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:15,742446190-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:24,753676280-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:24,767591196-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:33,816842160-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:33,830580196-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:43,628814394-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:43,642847350-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:52,881195339-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:35:52,895008718-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:36:02,046245244-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:36:02,060234933-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:36:02,071076655-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:36:02,077382358-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:36:02,091478205-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4112971
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T17:36:02,103691174-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_write.log.2
[1;30mlocalhost.localdomain	[2021-05-14T17:36:02,142691180-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:36:02,148944614-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '1048576', '-O', '1048576', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:36:04.007+0000 ffff805ae010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:36:04.819+0000 ffff805ae010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:36:04.819+0000 ffff805ae010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:36:04.838775+0000 Maintaining 256 concurrent writes of 1048576 bytes to objects of size 1048576 for up to 20 seconds or 0 objects
2021-05-15T00:36:04.838853+0000 Object prefix: benchmark_data_localhost.localdomain_7
2021-05-15T00:36:05.046665+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:36:05.046665+0000     0       0         0         0         0         0           -           0
2021-05-15T00:36:06.046868+0000     1     255       622       367   366.976       367    0.429667    0.425957
2021-05-15T00:36:07.047082+0000     2     255      1220       965   482.433       598    0.432288    0.427077
2021-05-15T00:36:08.047305+0000     3     255      1824      1569   522.913       604    0.426774    0.426183
2021-05-15T00:36:09.047525+0000     4     255      2425      2170   542.402       601    0.379853    0.426915
2021-05-15T00:36:10.047783+0000     5     255      3030      2775   554.891       605     0.42643    0.425418
2021-05-15T00:36:11.048058+0000     6     255      3638      3383   563.715       608    0.414988    0.425041
2021-05-15T00:36:12.048398+0000     7     255      4239      3984   569.013       601    0.428267    0.424646
2021-05-15T00:36:13.048631+0000     8     255      4840      4585   572.994       601    0.425825    0.424991
2021-05-15T00:36:14.048818+0000     9     255      5394      5139   570.872       554     0.50123    0.425167
2021-05-15T00:36:15.049010+0000    10     255      5914      5659   565.775       520    0.541906     0.43044
2021-05-15T00:36:16.049201+0000    11     255      6420      6165   560.332       506    0.427304    0.440956
2021-05-15T00:36:17.049385+0000    12     255      6871      6616   551.215       451    0.680257    0.444235
2021-05-15T00:36:18.049577+0000    13     255      7482      7227   555.804       611    0.423877    0.446791
2021-05-15T00:36:19.049768+0000    14     255      8081      7826   558.882       599    0.429511    0.445146
2021-05-15T00:36:20.050006+0000    15     255      8684      8429   561.813       603    0.428431    0.443873
2021-05-15T00:36:21.050243+0000    16     255      9289      9034   564.504       605    0.420258    0.442543
2021-05-15T00:36:22.050512+0000    17     255      9890      9635   566.641       601    0.430425    0.441372
2021-05-15T00:36:23.050714+0000    18     255     10489     10234   568.432       599    0.428617    0.440602
2021-05-15T00:36:24.050915+0000    19     255     11088     10833   570.035       599     0.42762    0.439851
2021-05-15T00:36:25.051115+0000 min lat: 0.0233066 max lat: 0.733388 avg lat: 0.435182
2021-05-15T00:36:25.051115+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:36:25.051115+0000    20      32     11691     11659   582.824       826   0.0233066    0.435182
2021-05-15T00:36:26.051440+0000 Total time run:         20.0467
Total writes made:      11691
Write size:             1048576
Object size:            1048576
Bandwidth (MB/sec):     583.188
Stddev Bandwidth:       85.6477
Max bandwidth (MB/sec): 826
Min bandwidth (MB/sec): 367
Average IOPS:           583
Stddev IOPS:            85.6477
Max IOPS:               826
Min IOPS:               367
Average Latency(s):     0.434161
Stddev Latency(s):      0.0630143
Max latency(s):         0.733388
Min latency(s):         0.0199739

[1;32mlocalhost.localdomain	[2021-05-14T17:36:26,776333851-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4112971


[1;33mlocalhost.localdomain	[2021-05-14T17:36:26,783292480-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:36:51,051238470-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.69k objects, 11 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:36:51,065124433-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:00,587796043-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.69k objects, 11 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:00,601621967-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:09,764696821-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.69k objects, 11 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:09,778287835-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:18,922415816-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.69k objects, 11 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:18,936241546-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:28,296376281-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.69k objects, 11 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:28,310986209-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:28,322034353-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:37:28,328860405-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:37:28,343778920-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4116531
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T17:37:28,356191005-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T17:37:28,397541213-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:37:28,404682529-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '28def380-88b7-4d1d-910e-d3b42349a32e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 28def380-88b7-4d1d-910e-d3b42349a32e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.cxPBXS:/tmp/ceph-asok.cxPBXS -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:37:29.906+0000 ffffb53b2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:37:30.734+0000 ffffb53b2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:37:30.734+0000 ffffb53b2010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:37:30.757048+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:37:30.757048+0000     0       0         0         0         0         0           -           0
2021-05-15T00:37:31.757254+0000     1     255      1177       922   921.689       922    0.268862     0.22863
2021-05-15T00:37:32.757473+0000     2     255      2199      1944    971.73      1022    0.222359    0.240305
2021-05-15T00:37:33.757711+0000     3     255      3213      2958   985.739      1014    0.215069    0.244233
2021-05-15T00:37:34.757947+0000     4     255      4223      3968   991.745      1010    0.379053    0.246098
2021-05-15T00:37:35.758580+0000     5     255      5195      4940   987.672       972    0.199668    0.249384
2021-05-15T00:37:36.758828+0000     6     255      6203      5948   991.018      1008    0.197961    0.250156
2021-05-15T00:37:37.759741+0000     7     255      7178      6923   988.601       975    0.191768    0.251675
2021-05-15T00:37:38.764162+0000     8     255      8154      7899   986.482       976    0.207202    0.252649
2021-05-15T00:37:39.764378+0000     9     255      9155      8900    988.07      1001    0.367536    0.253493
2021-05-15T00:37:40.764637+0000    10     255     10180      9925   991.734      1025      0.1883    0.252956
2021-05-15T00:37:41.764916+0000    11     255     11177     10922   992.188       997    0.174284     0.25329
2021-05-15T00:37:42.765215+0000 Total time run:       11.6963
Total reads made:     11691
Read size:            1048576
Object size:          1048576
Bandwidth (MB/sec):   999.546
Average IOPS:         999
Stddev IOPS:          29.9915
Max IOPS:             1025
Min IOPS:             922
Average Latency(s):   0.252847
Max latency(s):       0.483763
Min latency(s):       0.102066

[1;32mlocalhost.localdomain	[2021-05-14T17:37:43,482304574-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4116531


[1;7;39;49m[2021-05-14T17:37:43,486510328-07:00][RUNNING][ROUND 3/1/20] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:37:43,492977535-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:37:43,508466042-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40060\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1776236\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 0045b33f-9032-4fa9-91f6-b7d1477a2b72\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 0045b33f-9032-4fa9-91f6-b7d1477a2b72\nlast_changed 2021-05-14T17:38:16.597060-0700\ncreated 2021-05-14T17:38:16.597060-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40060/0,v1:10.10.1.2:40061/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1776236 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 c6f27433-5ec4-409d-a349-0a9aed82540f\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 46649861-433f-4bd1-94bc-cf99b164d4e7\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 a48c68c1-11b4-4819-9dd8-be275067f7e8\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42060\n  w/ user/pass: admin / 66e1bf33-b3fa-423c-abec-711c3eff10bf\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:38:40 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40060
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1776236
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 0045b33f-9032-4fa9-91f6-b7d1477a2b72
setting min_mon_release = octopus
epoch 0
fsid 0045b33f-9032-4fa9-91f6-b7d1477a2b72
last_changed 2021-05-14T17:38:16.597060-0700
created 2021-05-14T17:38:16.597060-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40060/0,v1:10.10.1.2:40061/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1776236 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 c6f27433-5ec4-409d-a349-0a9aed82540f
0
start osd.0
add osd1 46649861-433f-4bd1-94bc-cf99b164d4e7
1
start osd.1
add osd2 a48c68c1-11b4-4819-9dd8-be275067f7e8
2
start osd.2


restful urls: https://10.10.1.2:42060
  w/ user/pass: admin / 66e1bf33-b3fa-423c-abec-711c3eff10bf


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:37:45.564-0700 7f04172971c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:37:45.564-0700 7f04172971c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:37:45.584-0700 7ff5c701f1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:37:45.584-0700 7ff5c701f1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40060,v1:10.10.1.2:40061] --print /tmp/ceph_monmap.1776236 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1776236 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1776236 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42060 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55659731e000 @  0x7fd6c2a9f680 0x7fd6c2ac0824 0x7fd6c325b187 0x7fd6c3263355 0x7fd6c325b708 0x7fd6c325b877 0x7fd6c325cc24 0x7fd6c3274ec1 0x7fd6c31e75f3 0x7fd6c3248e97 0x7fd6c3250b1a 0x7fd6c2953d84 0x7fd6c2a6f609 0x7fd6c2643103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.rdHEcstIYM 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new c6f27433-5ec4-409d-a349-0a9aed82540f -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAGGJ9g3RmeNRAAFLLv1r9pev6kUnWPH6F7bg== --osd-uuid c6f27433-5ec4-409d-a349-0a9aed82540f 
2021-05-14T17:38:31.692-0700 7f3e3f750f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:38:31.712-0700 7f3e3f750f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:38:31.712-0700 7f3e3f750f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x556683082000 @  0x7f3e40119680 0x7f3e4013a824 0x5566789b9447 0x5566789c14b5 0x5566789b99c8 0x5566789b9b37 0x5566789baee4 0x55667878bca1 0x556678963423 0x55667877c2a7 0x55667878153a 0x7f3e3fc6cd84 0x7f3e3fdf1609 0x7f3e3f95a103
2021-05-14T17:38:32.124-0700 7f3e3f750f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 46649861-433f-4bd1-94bc-cf99b164d4e7 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x560d6d016000 @  0x7f611167e680 0x7f611169f824 0x560d62ee8447 0x560d62ef04b5 0x560d62ee89c8 0x560d62ee8b37 0x560d62ee9ee4 0x560d62cbaca1 0x560d62e92423 0x560d62cab2a7 0x560d62cb053a 0x7f61111d1d84 0x7f6111356609 0x7f6110ebf103
2021-05-14T17:38:32.880-0700 7f6110cb5f00 -1 Falling back to public interface
2021-05-14T17:38:33.232-0700 7f6110cb5f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAIGJ9g/RbbHBAAKDflZSIHowAgxvqdXCMjng== --osd-uuid 46649861-433f-4bd1-94bc-cf99b164d4e7 
2021-05-14T17:38:33.264-0700 7f3568cfff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:38:33.284-0700 7f3568cfff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:38:33.284-0700 7f3568cfff00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x555ca8696000 @  0x7f35696c8680 0x7f35696e9824 0x555c9d8a7447 0x555c9d8af4b5 0x555c9d8a79c8 0x555c9d8a7b37 0x555c9d8a8ee4 0x555c9d679ca1 0x555c9d851423 0x555c9d66a2a7 0x555c9d66f53a 0x7f356921bd84 0x7f35693a0609 0x7f3568f09103
2021-05-14T17:38:33.660-0700 7f3568cfff00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new a48c68c1-11b4-4819-9dd8-be275067f7e8 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55d69a28e000 @  0x7f16560b9680 0x7f16560da824 0x55d69023c447 0x55d6902444b5 0x55d69023c9c8 0x55d69023cb37 0x55d69023dee4 0x55d69000eca1 0x55d6901e6423 0x55d68ffff2a7 0x55d69000453a 0x7f1655c0cd84 0x7f1655d91609 0x7f16558fa103
2021-05-14T17:38:34.348-0700 7f16556f0f00 -1 Falling back to public interface
2021-05-14T17:38:34.700-0700 7f16556f0f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAJGJ9gRJsIOhAAXOD6kw1G3J4J9HYQZ6FlWQ== --osd-uuid a48c68c1-11b4-4819-9dd8-be275067f7e8 
2021-05-14T17:38:34.752-0700 7fd4b5ec2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:38:34.776-0700 7fd4b5ec2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:38:34.776-0700 7fd4b5ec2f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55e87b870000 @  0x7fd4b688b680 0x7fd4b68ac824 0x55e8700c3447 0x55e8700cb4b5 0x55e8700c39c8 0x55e8700c3b37 0x55e8700c4ee4 0x55e86fe95ca1 0x55e87006d423 0x55e86fe862a7 0x55e86fe8b53a 0x7fd4b63ded84 0x7fd4b6563609 0x7fd4b60cc103
2021-05-14T17:38:35.168-0700 7fd4b5ec2f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5645e7074000 @  0x7fe9ab583680 0x7fe9ab5a4824 0x5645dcf31447 0x5645dcf394b5 0x5645dcf319c8 0x5645dcf31b37 0x5645dcf32ee4 0x5645dcd03ca1 0x5645dcedb423 0x5645dccf42a7 0x5645dccf953a 0x7fe9ab0d6d84 0x7fe9ab25b609 0x7fe9aadc4103
2021-05-14T17:38:35.928-0700 7fe9aabbaf00 -1 Falling back to public interface
2021-05-14T17:38:36.356-0700 7fe9aabbaf00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:38:40,157245220-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:38:40,176200937-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:38:40,256912568-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:38:40,263263596-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:38:41.974+0000 ffff9007f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:38:42.814+0000 ffff8ee1d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:38:44,213621452-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:38:44,219876464-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:38:47.935+0000 ffff783991e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:38:48.787+0000 ffff783991e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:38:50,431268197-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:38:50,439221482-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:38:52.151+0000 ffffa85be1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:38:52.976+0000 ffffa85be1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:38:54,319458247-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:38:54,325913828-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:38:55.976+0000 ffffad1bf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:38:56.844+0000 ffffad1bf1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:00.029+0000 ffffb05551e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:00.861+0000 ffffb05551e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 3          default
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:39:02,224776418-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:02,231225218-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:03.885+0000 ffff9a8e61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:04.754+0000 ffff9a8e61e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:39:06,754091989-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:06,760474763-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:08.598+0000 ffffb1f0e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:09.430+0000 ffffb1f0e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:39:11,210167772-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:11,216644912-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:12.911+0000 ffff9de7d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:13.755+0000 ffff9de7d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:39:15,955866140-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:15,961941932-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:17.652+0000 ffff9eb271e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:18.480+0000 ffff9eb271e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:39:20,747313605-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:20,754202235-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:22.469+0000 ffff954431e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:23.317+0000 ffff954431e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:39:25,772448300-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:25,779077910-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:27.429+0000 ffffabc611e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:28.258+0000 ffffabc611e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:39:29,727789669-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:29,733900671-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:31.726+0000 ffff96c641e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:32.546+0000 ffff96c641e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:39:34,158342135-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:39:34,164490734-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:39:35.859+0000 ffffb05781e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:39:36.707+0000 ffffaf3161e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  190 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:39:38,020581920-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:02,173287775-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:11,487581352-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:20,516924932-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:29,676880903-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:38,836790500-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:38,851030951-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:48,300835226-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:48,319274785-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:57,374204320-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:40:57,388040287-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:41:06,393926055-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:41:06,407668241-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:41:15,695105334-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:41:15,709457134-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:41:15,720441836-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:41:15,727057241-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:41:15,741270237-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4127297
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T17:41:15,753784660-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_write.log.3
[1;30mlocalhost.localdomain	[2021-05-14T17:41:15,792542129-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:41:15,798971487-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '1048576', '-O', '1048576', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:41:17.304+0000 ffff93d44010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:41:18.112+0000 ffff93d44010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:41:18.112+0000 ffff93d44010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:41:18.134052+0000 Maintaining 256 concurrent writes of 1048576 bytes to objects of size 1048576 for up to 20 seconds or 0 objects
2021-05-15T00:41:18.134130+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:41:18.347400+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:41:18.347400+0000     0       0         0         0         0         0           -           0
2021-05-15T00:41:19.347630+0000     1     255       718       463   462.954       463    0.378784    0.363461
2021-05-15T00:41:20.347839+0000     2     255      1401      1146   572.912       683    0.373315    0.370343
2021-05-15T00:41:21.348044+0000     3     255      2088      1833   610.896       687     0.36785    0.371982
2021-05-15T00:41:22.348272+0000     4     255      2798      2543   635.632       710    0.347629    0.369805
2021-05-15T00:41:23.348496+0000     5     255      3509      3254   650.675       711    0.357218    0.367668
2021-05-15T00:41:24.348837+0000     6     255      4117      3862   643.527       608    0.500832    0.368639
2021-05-15T00:41:25.349049+0000     7     255      4628      4373   624.579       511    0.592914    0.378411
2021-05-15T00:41:26.349226+0000     8     255      4939      4684   585.376       311    0.695701    0.406428
2021-05-15T00:41:27.349423+0000     9     255      5445      5190   576.545       506    0.398105     0.42698
2021-05-15T00:41:28.349651+0000    10     255      5840      5585   558.382       395     0.66524    0.434682
2021-05-15T00:41:29.349830+0000    11     255      6526      6271   569.972       686      0.3572    0.435681
2021-05-15T00:41:30.350034+0000    12     255      7247      6992   582.545       721    0.353272     0.42734
2021-05-15T00:41:31.350298+0000    13     255      7964      7709   592.874       717    0.348242    0.420916
2021-05-15T00:41:32.350581+0000    14     255      8672      8417   601.083       708    0.354807    0.415843
2021-05-15T00:41:33.350796+0000    15     255      9383      9128   608.401       711    0.366563    0.411253
2021-05-15T00:41:34.351048+0000    16     255     10106      9851   615.552       723    0.361244    0.407275
2021-05-15T00:41:35.351283+0000    17     255     10824     10569   621.569       718    0.357037    0.403746
2021-05-15T00:41:36.351482+0000    18     255     11545     11290   627.085       721    0.356707    0.400696
2021-05-15T00:41:37.351702+0000    19     255     12265     12010   631.967       720    0.361308    0.397957
2021-05-15T00:41:38.351879+0000 min lat: 0.0292336 max lat: 0.966651 avg lat: 0.392226
2021-05-15T00:41:38.351879+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:41:38.351879+0000    20      29     12981     12952   647.459       942   0.0812678    0.392226
2021-05-15T00:41:39.352179+0000 Total time run:         20.0411
Total writes made:      12981
Write size:             1048576
Object size:            1048576
Bandwidth (MB/sec):     647.719
Stddev Bandwidth:       143.172
Max bandwidth (MB/sec): 942
Min bandwidth (MB/sec): 311
Average IOPS:           647
Stddev IOPS:            143.172
Max IOPS:               942
Min IOPS:               311
Average Latency(s):     0.391467
Stddev Latency(s):      0.105856
Max latency(s):         0.966651
Min latency(s):         0.0239477

[1;32mlocalhost.localdomain	[2021-05-14T17:41:40,047170551-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4127297


[1;33mlocalhost.localdomain	[2021-05-14T17:41:40,053971943-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:04,172518985-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 12.98k objects, 13 GiB
    usage:   25 GiB used, 275 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:04,186596810-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:13,338437301-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 12.98k objects, 13 GiB
    usage:   25 GiB used, 275 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:13,352350848-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:22,773383111-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 12.98k objects, 13 GiB
    usage:   25 GiB used, 275 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:22,787486200-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:31,970526476-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 12.98k objects, 13 GiB
    usage:   25 GiB used, 275 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:31,984730442-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:41,263331623-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 12.98k objects, 13 GiB
    usage:   25 GiB used, 275 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:41,277713175-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:41,288637103-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:42:41,295398619-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:42:41,310129910-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4130841
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T17:42:41,322978501-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T17:42:41,361687366-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:42:41,368519994-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'aef06ad9-62fa-441f-9cfc-348b55b9872a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid aef06ad9-62fa-441f-9cfc-348b55b9872a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.uvbTFs:/tmp/ceph-asok.uvbTFs -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:42:42.827+0000 ffff8f9ce010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:42:43.651+0000 ffff8f9ce010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:42:43.651+0000 ffff8f9ce010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:42:43.676924+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:42:43.676924+0000     0       0         0         0         0         0           -           0
2021-05-15T00:42:44.677486+0000     1     255      1203       948   947.316       948    0.243573    0.226909
2021-05-15T00:42:45.677958+0000     2     255      2227      1972   985.412      1024    0.239353    0.237642
2021-05-15T00:42:46.678214+0000     3     255      3222      2967   988.522       995    0.253175    0.243344
2021-05-15T00:42:47.678501+0000     4     255      4240      3985   995.818      1018    0.211705    0.245188
2021-05-15T00:42:48.678803+0000     5     255      5230      4975   994.594       990    0.199818    0.247407
2021-05-15T00:42:49.679032+0000     6     255      6216      5961   993.125       986    0.190051    0.249357
2021-05-15T00:42:50.679420+0000     7     255      7168      6913   987.197       952    0.200109    0.252052
2021-05-15T00:42:51.680032+0000     8     255      8147      7892   986.097       979    0.379909    0.253111
2021-05-15T00:42:52.680338+0000     9     255      9126      8871   985.275       979    0.199653    0.254121
2021-05-15T00:42:53.680579+0000    10     255     10100      9845   984.125       974    0.193518    0.254361
2021-05-15T00:42:54.680823+0000    11     255     11057     10802   981.638       957    0.200627    0.255743
2021-05-15T00:42:55.681085+0000    12     255     12031     11776    980.98       974     0.18839     0.25635
2021-05-15T00:42:56.684989+0000    13     176     12981     12805   984.377      1029    0.131097    0.256801
2021-05-15T00:42:57.685251+0000 Total time run:       13.163
Total reads made:     12981
Read size:            1048576
Object size:          1048576
Bandwidth (MB/sec):   986.172
Average IOPS:         986
Stddev IOPS:          26.1852
Max IOPS:             1029
Min IOPS:             948
Average Latency(s):   0.255922
Max latency(s):       0.577096
Min latency(s):       0.0733244

[1;32mlocalhost.localdomain	[2021-05-14T17:42:58,362851506-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4130841


[1;7;39;49m[2021-05-14T17:42:58,367166615-07:00][RUNNING][ROUND 4/1/20] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:42:58,373816871-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:42:58,389566611-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40633\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1782868\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 4e63200f-a68e-4b30-9571-6d2ca0c37cfd\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 4e63200f-a68e-4b30-9571-6d2ca0c37cfd\nlast_changed 2021-05-14T17:43:31.673776-0700\ncreated 2021-05-14T17:43:31.673776-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40633/0,v1:10.10.1.2:40634/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1782868 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 3daa3691-33e1-494a-bd5b-c6db3ebcef3e\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 c661d8d2-4c04-48df-bdae-64d41166953d\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 7b140121-9917-483d-bdc8-c7841c269182\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42633\n  w/ user/pass: admin / fefcb64b-1d5e-4ab5-a658-224047e68fda\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:43:53 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40633
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1782868
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 4e63200f-a68e-4b30-9571-6d2ca0c37cfd
setting min_mon_release = octopus
epoch 0
fsid 4e63200f-a68e-4b30-9571-6d2ca0c37cfd
last_changed 2021-05-14T17:43:31.673776-0700
created 2021-05-14T17:43:31.673776-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40633/0,v1:10.10.1.2:40634/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1782868 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 3daa3691-33e1-494a-bd5b-c6db3ebcef3e
0
start osd.0
add osd1 c661d8d2-4c04-48df-bdae-64d41166953d
1
start osd.1
add osd2 7b140121-9917-483d-bdc8-c7841c269182
2
start osd.2


restful urls: https://10.10.1.2:42633
  w/ user/pass: admin / fefcb64b-1d5e-4ab5-a658-224047e68fda


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:43:00.507-0700 7f6902d381c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:43:00.507-0700 7f6902d381c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:43:00.523-0700 7fdf275771c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:43:00.527-0700 7fdf275771c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40633,v1:10.10.1.2:40634] --print /tmp/ceph_monmap.1782868 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1782868 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1782868 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42633 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5601c132a000 @  0x7f7b382dd680 0x7f7b382fe824 0x7f7b38a99187 0x7f7b38aa1355 0x7f7b38a99708 0x7f7b38a99877 0x7f7b38a9ac24 0x7f7b38ab2ec1 0x7f7b38a255f3 0x7f7b38a86e97 0x7f7b38a8eb1a 0x7f7b38191d84 0x7f7b382ad609 0x7f7b37e81103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.kA3d1u0EmP 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 3daa3691-33e1-494a-bd5b-c6db3ebcef3e -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBAGZ9gKOpoFhAA4nFuEDZ5FSst2IIFCORmUQ== --osd-uuid 3daa3691-33e1-494a-bd5b-c6db3ebcef3e 
2021-05-14T17:43:45.199-0700 7f844fd1af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:43:45.223-0700 7f844fd1af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:43:45.223-0700 7f844fd1af00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55df9dad6000 @  0x7f84506e3680 0x7f8450704824 0x55df92ec5447 0x55df92ecd4b5 0x55df92ec59c8 0x55df92ec5b37 0x55df92ec6ee4 0x55df92c97ca1 0x55df92e6f423 0x55df92c882a7 0x55df92c8d53a 0x7f8450236d84 0x7f84503bb609 0x7f844ff24103
2021-05-14T17:43:45.651-0700 7f844fd1af00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new c661d8d2-4c04-48df-bdae-64d41166953d -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x560bcc642000 @  0x7fe757f3e680 0x7fe757f5f824 0x560bc2042447 0x560bc204a4b5 0x560bc20429c8 0x560bc2042b37 0x560bc2043ee4 0x560bc1e14ca1 0x560bc1fec423 0x560bc1e052a7 0x560bc1e0a53a 0x7fe757a91d84 0x7fe757c16609 0x7fe75777f103
2021-05-14T17:43:46.407-0700 7fe757575f00 -1 Falling back to public interface
2021-05-14T17:43:46.763-0700 7fe757575f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBBGZ9got9BOxAAVJPkSOadv54k+CJkKaWuoQ== --osd-uuid c661d8d2-4c04-48df-bdae-64d41166953d 
2021-05-14T17:43:46.815-0700 7feaff917f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:43:46.839-0700 7feaff917f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:43:46.839-0700 7feaff917f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x565088850000 @  0x7feb002e0680 0x7feb00301824 0x56507e583447 0x56507e58b4b5 0x56507e5839c8 0x56507e583b37 0x56507e584ee4 0x56507e355ca1 0x56507e52d423 0x56507e3462a7 0x56507e34b53a 0x7feaffe33d84 0x7feafffb8609 0x7feaffb21103
2021-05-14T17:43:47.227-0700 7feaff917f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7b140121-9917-483d-bdc8-c7841c269182 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5652f2ea0000 @  0x7f2d166ba680 0x7f2d166db824 0x5652e7686447 0x5652e768e4b5 0x5652e76869c8 0x5652e7686b37 0x5652e7687ee4 0x5652e7458ca1 0x5652e7630423 0x5652e74492a7 0x5652e744e53a 0x7f2d1620dd84 0x7f2d16392609 0x7f2d15efb103
2021-05-14T17:43:48.039-0700 7f2d15cf1f00 -1 Falling back to public interface
2021-05-14T17:43:48.391-0700 7f2d15cf1f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBDGZ9gCuxOJxAAw7eOzxyBKvTa12e16JwhWw== --osd-uuid 7b140121-9917-483d-bdc8-c7841c269182 
2021-05-14T17:43:48.451-0700 7f8bf50e8f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:43:48.471-0700 7f8bf50e8f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:43:48.471-0700 7f8bf50e8f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55ef8a9f8000 @  0x7f8bf5ab1680 0x7f8bf5ad2824 0x55ef7ed56447 0x55ef7ed5e4b5 0x55ef7ed569c8 0x55ef7ed56b37 0x55ef7ed57ee4 0x55ef7eb28ca1 0x55ef7ed00423 0x55ef7eb192a7 0x55ef7eb1e53a 0x7f8bf5604d84 0x7f8bf5789609 0x7f8bf52f2103
2021-05-14T17:43:48.859-0700 7f8bf50e8f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55879eae4000 @  0x7fcf61799680 0x7fcf617ba824 0x55879377c447 0x5587937844b5 0x55879377c9c8 0x55879377cb37 0x55879377dee4 0x55879354eca1 0x558793726423 0x55879353f2a7 0x55879354453a 0x7fcf612ecd84 0x7fcf61471609 0x7fcf60fda103
2021-05-14T17:43:49.743-0700 7fcf60dd0f00 -1 Falling back to public interface
2021-05-14T17:43:50.079-0700 7fcf60dd0f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:43:53,801060792-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:43:53,821366088-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:43:53,908326095-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:43:53,915523765-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:43:55.631+0000 ffff939b01e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:43:56.459+0000 ffff9274e1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:43:57,873594429-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:43:57,879668153-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:43:59.648+0000 ffffa145f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:00.476+0000 ffffa145f1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:44:01,898664789-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:01,905148638-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:03.580+0000 ffff7d1a11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:04.417+0000 ffff7d1a11e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:44:05,897437325-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:05,903553761-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:07.585+0000 ffffaa3731e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:08.417+0000 ffffaa3731e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:11.774+0000 ffff9df051e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:12.590+0000 ffff9df051e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:44:14,027912922-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:14,033994687-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:15.682+0000 ffffae3201e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:16.527+0000 ffffae3201e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:44:18,667567734-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:18,673593299-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:20.311+0000 ffffb26431e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:21.155+0000 ffffb13e11e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:44:23,064845848-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:23,071196789-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:24.812+0000 ffff9c0c11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:25.668+0000 ffff9ae5f1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:44:27,597150436-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:27,603489796-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:29.393+0000 ffff7f0081e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:30.213+0000 ffff7f0081e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:44:32,235017247-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:32,241220939-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:33.882+0000 ffff8354f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:34.742+0000 ffff822ed1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:44:36,694494378-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:36,701105058-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:38.454+0000 ffff8f1341e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:39.283+0000 ffff8f1341e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:44:41,186743137-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:41,193150233-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:43.039+0000 ffffa04411e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:43.891+0000 ffffa04411e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 23 lfor 0/0/23 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:44:45,171560217-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:44:45,177725607-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:44:46.800+0000 ffff973551e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:44:47.632+0000 ffff973551e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  190 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  190 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   69 KiB   0 B   0 B   0 B  100 GiB     0  1.09   90      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93   89      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   62 KiB   0 B   0 B   0 B  100 GiB     0  0.98   80      up          osd.2  
                       TOTAL  300 GiB  192 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.09  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:44:48,871934445-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:12,999334794-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:22,161587176-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:31,602960371-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:40,750949422-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:49,922797545-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   241 KiB used, 300 GiB / 300 GiB avail
    pgs:     1.042% pgs not active
             190 active+clean
             2   peering
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:49,937186661-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:59,498447487-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:45:59,512503697-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:08,747698037-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:08,763516326-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:17,824331292-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:17,838747743-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:26,967392495-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:26,981968424-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:26,992902541-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:46:26,999517498-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:46:27,014414151-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4141576
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T17:46:27,026813208-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T17:46:27,065406488-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:46:27,071803953-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '1048576', '-O', '1048576', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:46:28.585+0000 ffff900ce010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:46:29.409+0000 ffff900ce010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:46:29.409+0000 ffff900ce010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:46:29.426877+0000 Maintaining 256 concurrent writes of 1048576 bytes to objects of size 1048576 for up to 20 seconds or 0 objects
2021-05-15T00:46:29.426952+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:46:29.642805+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:46:29.642805+0000     0       0         0         0         0         0           -           0
2021-05-15T00:46:30.643002+0000     1     255       618       363   362.973       363    0.430422    0.429335
2021-05-15T00:46:31.643198+0000     2     255      1211       956   477.935       593    0.431793    0.430762
2021-05-15T00:46:32.643434+0000     3     255      1808      1553   517.579       597     0.42482    0.430292
2021-05-15T00:46:33.643665+0000     4     255      2404      2149   537.151       596    0.428931    0.430826
2021-05-15T00:46:34.643898+0000     5     255      3009      2754   550.693       605    0.417422    0.429591
2021-05-15T00:46:35.644121+0000     6     255      3591      3336   555.889       582    0.441094    0.429373
2021-05-15T00:46:36.644350+0000     7     255      4183      3928   561.029       592    0.429294    0.430895
2021-05-15T00:46:37.644575+0000     8     255      4631      4376   546.887       448    0.652277    0.441847
2021-05-15T00:46:38.644772+0000     9     255      5189      4934    548.11       558    0.491365    0.445151
2021-05-15T00:46:39.644979+0000    10     255      5627      5372    537.09       438    0.517242    0.446422
2021-05-15T00:46:40.645156+0000    11     255      6088      5833   530.165       461    0.435351    0.463862
2021-05-15T00:46:41.645350+0000    12     255      6467      6212   517.562       379    0.664699     0.47762
2021-05-15T00:46:42.645557+0000    13     255      7067      6812   523.894       600     0.42467    0.473925
2021-05-15T00:46:43.645746+0000    14     255      7672      7417   529.679       605    0.420842    0.469869
2021-05-15T00:46:44.645938+0000    15     255      8278      8023   534.759       606    0.423061    0.466342
2021-05-15T00:46:45.646148+0000    16     255      8850      8595   537.079       572     0.47287    0.465156
2021-05-15T00:46:46.646381+0000    17     255      9451      9196   540.831       601    0.427091    0.462542
2021-05-15T00:46:47.646622+0000    18     255     10053      9798   544.222       602    0.423381    0.460202
2021-05-15T00:46:48.646893+0000    19     255     10655     10400   547.254       602    0.426827    0.458138
2021-05-15T00:46:49.647064+0000 min lat: 0.026546 max lat: 0.880902 avg lat: 0.451895
2021-05-15T00:46:49.647064+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:46:49.647064+0000    20      32     11261     11229   561.334       829    0.026546    0.451895
2021-05-15T00:46:50.647325+0000 Total time run:         20.047
Total writes made:      11261
Write size:             1048576
Object size:            1048576
Bandwidth (MB/sec):     561.73
Stddev Bandwidth:       102.47
Max bandwidth (MB/sec): 829
Min bandwidth (MB/sec): 363
Average IOPS:           561
Stddev IOPS:            102.47
Max IOPS:               829
Min IOPS:               363
Average Latency(s):     0.450784
Stddev Latency(s):      0.08976
Max latency(s):         0.880902
Min latency(s):         0.026546

[1;32mlocalhost.localdomain	[2021-05-14T17:46:51,324919919-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4141576


[1;33mlocalhost.localdomain	[2021-05-14T17:46:51,332536192-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:15,434231926-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.26k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:15,448840515-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:24,713627794-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.26k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:24,728114818-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:33,936464520-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.26k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:33,951103850-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:43,000403753-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.26k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:43,015177671-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:52,103014503-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 11.26k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:52,117668850-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:52,128986239-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:47:52,135753172-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:47:52,151005536-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4145086
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T17:47:52,163525350-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T17:47:52,201981419-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:47:52,208547738-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '452c55e0-b578-4325-8b0a-a0b1c32c1ad8', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 452c55e0-b578-4325-8b0a-a0b1c32c1ad8 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.4Lee4x:/tmp/ceph-asok.4Lee4x -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:47:54.056+0000 ffffbecb2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:47:54.896+0000 ffffbecb2010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:47:54.896+0000 ffffbecb2010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:47:54.920191+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:47:54.920191+0000     0       0         0         0         0         0           -           0
2021-05-15T00:47:55.920370+0000     1     255      1187       932   931.688       932    0.253347    0.229803
2021-05-15T00:47:56.922788+0000     2     255      2194      1939   968.167      1007    0.249037    0.240149
2021-05-15T00:47:57.923425+0000     3     255      3165      2910   968.905       971    0.258446      0.2485
2021-05-15T00:47:58.923852+0000     4     255      4164      3909   976.318       999    0.199832    0.249798
2021-05-15T00:47:59.924117+0000     5     255      5162      4907   980.599       998    0.254065    0.252009
2021-05-15T00:48:00.924737+0000     6     255      6109      5854   974.903       947    0.269454    0.254234
2021-05-15T00:48:01.924990+0000     7     255      7048      6793   969.742       939    0.395958     0.25652
2021-05-15T00:48:02.925205+0000     8     255      8003      7748   967.875       955    0.203099    0.257791
2021-05-15T00:48:03.925438+0000     9     255      8948      8693   965.309       945     0.19279     0.25916
2021-05-15T00:48:04.925861+0000    10     255      9842      9587   958.142       894    0.432997    0.261352
2021-05-15T00:48:05.926423+0000    11     255     10802     10547   958.262       960    0.396843     0.26219
2021-05-15T00:48:06.926678+0000 Total time run:       11.6583
Total reads made:     11261
Read size:            1048576
Object size:          1048576
Bandwidth (MB/sec):   965.918
Average IOPS:         965
Stddev IOPS:          33.5852
Max IOPS:             1007
Min IOPS:             894
Average Latency(s):   0.261077
Max latency(s):       0.604184
Min latency(s):       0.0669504

[1;32mlocalhost.localdomain	[2021-05-14T17:48:07,664300517-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4145086


[1;7;39;49m[2021-05-14T17:48:07,669100345-07:00][RUNNING][ROUND 5/1/20] object_size=1MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:48:07,675795611-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:48:07,691690925-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40924\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1786896\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e25fcfab-01f9-42c0-ae6e-d368f19ad011\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid e25fcfab-01f9-42c0-ae6e-d368f19ad011\nlast_changed 2021-05-14T17:48:39.921009-0700\ncreated 2021-05-14T17:48:39.921009-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40924/0,v1:10.10.1.2:40925/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1786896 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 46bf02e9-4930-41bf-bc88-24f6c7ee8c78\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 96929bb9-ecb5-4952-8eba-6c75e6890efa\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 7f49e3c0-6c61-4537-9c9c-d51c0f5fa08a\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42924\n  w/ user/pass: admin / 7dcf5916-b73d-40d6-bef4-aa038c981019\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:49:02 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40924
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1786896
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid e25fcfab-01f9-42c0-ae6e-d368f19ad011
setting min_mon_release = octopus
epoch 0
fsid e25fcfab-01f9-42c0-ae6e-d368f19ad011
last_changed 2021-05-14T17:48:39.921009-0700
created 2021-05-14T17:48:39.921009-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40924/0,v1:10.10.1.2:40925/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1786896 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 46bf02e9-4930-41bf-bc88-24f6c7ee8c78
0
start osd.0
add osd1 96929bb9-ecb5-4952-8eba-6c75e6890efa
1
start osd.1
add osd2 7f49e3c0-6c61-4537-9c9c-d51c0f5fa08a
2
start osd.2


restful urls: https://10.10.1.2:42924
  w/ user/pass: admin / 7dcf5916-b73d-40d6-bef4-aa038c981019


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:48:09.826-0700 7fc0f69871c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:48:09.826-0700 7fc0f69871c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:48:09.846-0700 7fa6f4b0c1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:48:09.846-0700 7fa6f4b0c1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40924,v1:10.10.1.2:40925] --print /tmp/ceph_monmap.1786896 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1786896 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1786896 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42924 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55e7896f4000 @  0x7f2aa49d7680 0x7f2aa49f8824 0x7f2aa5193187 0x7f2aa519b355 0x7f2aa5193708 0x7f2aa5193877 0x7f2aa5194c24 0x7f2aa51acec1 0x7f2aa511f5f3 0x7f2aa5180e97 0x7f2aa5188b1a 0x7f2aa488bd84 0x7f2aa49a7609 0x7f2aa457b103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.qAyLyIswmw 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 46bf02e9-4930-41bf-bc88-24f6c7ee8c78 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQB0Gp9gjf9dKRAAKbP9bDHiFXk3XRWt9YTgZg== --osd-uuid 46bf02e9-4930-41bf-bc88-24f6c7ee8c78 
2021-05-14T17:48:53.550-0700 7fcdc0248f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:48:53.570-0700 7fcdc0248f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:48:53.570-0700 7fcdc0248f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55e020e06000 @  0x7fcdc0c11680 0x7fcdc0c32824 0x55e016860447 0x55e0168684b5 0x55e0168609c8 0x55e016860b37 0x55e016861ee4 0x55e016632ca1 0x55e01680a423 0x55e0166232a7 0x55e01662853a 0x7fcdc0764d84 0x7fcdc08e9609 0x7fcdc0452103
2021-05-14T17:48:54.050-0700 7fcdc0248f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 96929bb9-ecb5-4952-8eba-6c75e6890efa -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x562e87bdc000 @  0x7f4d6e13c680 0x7f4d6e15d824 0x562e7d285447 0x562e7d28d4b5 0x562e7d2859c8 0x562e7d285b37 0x562e7d286ee4 0x562e7d057ca1 0x562e7d22f423 0x562e7d0482a7 0x562e7d04d53a 0x7f4d6dc8fd84 0x7f4d6de14609 0x7f4d6d97d103
2021-05-14T17:48:54.894-0700 7f4d6d773f00 -1 Falling back to public interface
2021-05-14T17:48:55.290-0700 7f4d6d773f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQB2Gp9gzS2DGhAAxko95En5Q/eMjmv7Web+MQ== --osd-uuid 96929bb9-ecb5-4952-8eba-6c75e6890efa 
2021-05-14T17:48:55.314-0700 7f74b5a94f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:48:55.334-0700 7f74b5a94f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:48:55.334-0700 7f74b5a94f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5615e8e4a000 @  0x7f74b645d680 0x7f74b647e824 0x5615dda76447 0x5615dda7e4b5 0x5615dda769c8 0x5615dda76b37 0x5615dda77ee4 0x5615dd848ca1 0x5615dda20423 0x5615dd8392a7 0x5615dd83e53a 0x7f74b5fb0d84 0x7f74b6135609 0x7f74b5c9e103
2021-05-14T17:48:55.818-0700 7f74b5a94f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7f49e3c0-6c61-4537-9c9c-d51c0f5fa08a -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x560e731ce000 @  0x7f332a640680 0x7f332a661824 0x560e6821f447 0x560e682274b5 0x560e6821f9c8 0x560e6821fb37 0x560e68220ee4 0x560e67ff1ca1 0x560e681c9423 0x560e67fe22a7 0x560e67fe753a 0x7f332a193d84 0x7f332a318609 0x7f3329e81103
2021-05-14T17:48:56.686-0700 7f3329c77f00 -1 Falling back to public interface
2021-05-14T17:48:57.050-0700 7f3329c77f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQB4Gp9g73E0EBAArBkSbZBGt2hZhBa4Y6tKNQ== --osd-uuid 7f49e3c0-6c61-4537-9c9c-d51c0f5fa08a 
2021-05-14T17:48:57.090-0700 7f61b633ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:48:57.114-0700 7f61b633ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:48:57.114-0700 7f61b633ef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x557ab5d12000 @  0x7f61b6d07680 0x7f61b6d28824 0x557aab09f447 0x557aab0a74b5 0x557aab09f9c8 0x557aab09fb37 0x557aab0a0ee4 0x557aaae71ca1 0x557aab049423 0x557aaae622a7 0x557aaae6753a 0x7f61b685ad84 0x7f61b69df609 0x7f61b6548103
2021-05-14T17:48:57.566-0700 7f61b633ef00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5650bd440000 @  0x7f0380d60680 0x7f0380d81824 0x5650b2602447 0x5650b260a4b5 0x5650b26029c8 0x5650b2602b37 0x5650b2603ee4 0x5650b23d4ca1 0x5650b25ac423 0x5650b23c52a7 0x5650b23ca53a 0x7f03808b3d84 0x7f0380a38609 0x7f03805a1103
2021-05-14T17:48:58.370-0700 7f0380397f00 -1 Falling back to public interface
2021-05-14T17:48:58.726-0700 7f0380397f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:49:02,416726008-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:49:02,436107737-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:49:02,518590027-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:02,524924827-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:04.200+0000 ffff930821e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:05.052+0000 ffff930821e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:49:06,433098406-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:06,439134625-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:10.205+0000 ffffaa6681e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:11.029+0000 ffffaa6681e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:49:12,686065109-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:12,692398094-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:14.525+0000 ffff998461e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:15.378+0000 ffff998461e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:49:16,736097885-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:16,743223665-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:18.386+0000 ffff8d0a41e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:19.206+0000 ffff8d0a41e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:22.419+0000 ffffafaee1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:23.259+0000 ffffafaee1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 3          default
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:49:24,624812475-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:24,631160207-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:26.283+0000 ffffb3bdc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:27.140+0000 ffffb3bdc1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:49:28,947858237-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:28,954173218-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:30.700+0000 ffff8b8fb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:31.548+0000 ffff8a6991e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:49:33,387588202-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:33,393909095-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:35.077+0000 ffff9f3c61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:35.917+0000 ffff9f3c61e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:49:38,185748111-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:38,192162469-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:39.842+0000 ffffaa20e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:40.678+0000 ffffaa20e1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:49:43,111139863-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:43,117667116-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:44.983+0000 ffff8986f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:45.827+0000 ffff83fff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:49:48,074350662-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:48,080799842-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:49.743+0000 ffffa84671e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:50.576+0000 ffffa84671e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:49:52,747336738-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:52,753608902-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:54.732+0000 ffffa9a331e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:55.572+0000 ffffa3fff1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 22 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:49:57,105158991-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:49:57,111518005-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:49:58.761+0000 ffffa9e3f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:49:59.581+0000 ffffa9e3f1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  205 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  205 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   73 KiB   0 B   0 B   0 B  100 GiB     0  1.07  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  0.97  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  207 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.07  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:50:00,824897727-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:50:24,904280303-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:50:34,175751230-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:50:43,160851823-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:50:52,311151415-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:02,047702990-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:02,064153505-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:11,088451177-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:11,103048366-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:20,093192691-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:20,107745503-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:29,378899893-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:29,393886504-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:38,749564267-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:38,764125345-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:38,775512872-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:51:38,782261038-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:51:38,797477503-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4155918
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T17:51:38,810587159-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_write.log.5
[1;30mlocalhost.localdomain	[2021-05-14T17:51:38,850253384-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:51:38,856705834-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '1048576', '-O', '1048576', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- rados bench 20 write --pool bench_rados -b 1048576 -O 1048576 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:51:40.410+0000 ffff8d48a010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:51:41.218+0000 ffff8d48a010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:51:41.218+0000 ffff8d48a010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:51:41.240676+0000 Maintaining 256 concurrent writes of 1048576 bytes to objects of size 1048576 for up to 20 seconds or 0 objects
2021-05-15T00:51:41.240755+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T00:51:41.449652+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:51:41.449652+0000     0       0         0         0         0         0           -           0
2021-05-15T00:51:42.449935+0000     1     255      1032       777   776.893       777    0.245972    0.246486
2021-05-15T00:51:43.450346+0000     2     255      1992      1737   868.262       960    0.279934    0.257262
2021-05-15T00:51:44.450662+0000     3     255      2941      2686   895.075       949    0.251145    0.262765
2021-05-15T00:51:45.450922+0000     4     255      3893      3638   909.244       952    0.267313    0.262764
2021-05-15T00:51:46.451260+0000     5     255      4660      4405   880.742       767    0.481268    0.264557
2021-05-15T00:51:47.451440+0000     6     255      4874      4619   769.623       214     1.19003    0.291686
2021-05-15T00:51:48.451617+0000     7     255      5114      4859   693.963       240     1.02811    0.341382
2021-05-15T00:51:49.451827+0000     8     255      5845      5590   698.573       731    0.247378    0.355185
2021-05-15T00:51:50.452096+0000     9     255      6182      5927   658.387       337     0.80035    0.361749
2021-05-15T00:51:51.452276+0000    10     255      6509      6254   625.245       327    0.741854     0.38487
2021-05-15T00:51:52.452528+0000    11     255      7131      6876   624.936       622    0.252995    0.400319
2021-05-15T00:51:53.452801+0000    12     255      8175      7920   659.835      1044    0.249198    0.380125
2021-05-15T00:51:54.453119+0000    13     255      9161      8906   684.902       986    0.283159    0.366524
2021-05-15T00:51:55.453681+0000    14     255     10170      9915   708.018      1009    0.243006    0.355368
2021-05-15T00:51:56.454163+0000    15     255     11160     10905   726.788       990    0.281321    0.345946
2021-05-15T00:51:57.454731+0000    16     255     12171     11916    744.52      1011    0.272705    0.338341
2021-05-15T00:51:58.454975+0000    17     255     13169     12914   759.416       998    0.265129    0.332007
2021-05-15T00:51:59.455298+0000    18     255     14164     13909   772.486       995    0.238936    0.326792
2021-05-15T00:52:00.456034+0000    19     255     15186     14931   785.584      1022    0.240529    0.321815
2021-05-15T00:52:01.456548+0000 min lat: 0.0216037 max lat: 1.62838 avg lat: 0.314821
2021-05-15T00:52:01.456548+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:52:01.456548+0000    20      30     16194     16164   807.927      1233   0.0235882    0.314821
2021-05-15T00:52:02.457014+0000 Total time run:         20.0264
Total writes made:      16194
Write size:             1048576
Object size:            1048576
Bandwidth (MB/sec):     808.634
Stddev Bandwidth:       302.198
Max bandwidth (MB/sec): 1233
Min bandwidth (MB/sec): 214
Average IOPS:           808
Stddev IOPS:            302.198
Max IOPS:               1233
Min IOPS:               214
Average Latency(s):     0.314287
Stddev Latency(s):      0.192839
Max latency(s):         1.62838
Min latency(s):         0.0145221

[1;32mlocalhost.localdomain	[2021-05-14T17:52:03,154135490-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4155918


[1;33mlocalhost.localdomain	[2021-05-14T17:52:03,161120742-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:27,806605344-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 16.20k objects, 16 GiB
    usage:   32 GiB used, 268 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:27,821362251-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:36,892729626-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 16.20k objects, 16 GiB
    usage:   32 GiB used, 268 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:36,907370579-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:46,120724305-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 16.20k objects, 16 GiB
    usage:   32 GiB used, 268 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:46,135308758-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:55,370107625-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 16.20k objects, 16 GiB
    usage:   32 GiB used, 268 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:52:55,384851750-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:53:04,615703445-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 16.20k objects, 16 GiB
    usage:   32 GiB used, 268 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:53:04,632373704-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:53:04,647385085-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:53:04,656284318-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:53:04,673177304-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4159501
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_1MB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T17:53:04,686922919-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_1MB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T17:53:04,726007121-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:53:04,732924201-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cab743d9-99c6-4934-be75-f21fcc6f0538', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cab743d9-99c6-4934-be75-f21fcc6f0538 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.bieaBd:/tmp/ceph-asok.bieaBd -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:53:06.193+0000 ffffb9c26010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:53:07.017+0000 ffffb9c26010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:53:07.017+0000 ffffb9c26010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:53:07.041232+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:53:07.041232+0000     0       0         0         0         0         0           -           0
2021-05-15T00:53:08.041403+0000     1     255      1183       928   927.703       928    0.258567    0.228901
2021-05-15T00:53:09.041647+0000     2     255      2157      1902   950.732       974     0.25317    0.246196
2021-05-15T00:53:10.041900+0000     3     255      3130      2875   958.073       973     0.26409    0.251448
2021-05-15T00:53:11.042129+0000     4     255      4117      3862   965.248       987     0.25709    0.253583
2021-05-15T00:53:12.042429+0000     5     255      5049      4794   958.542       932    0.265266    0.257448
2021-05-15T00:53:13.042852+0000     6     255      6020      5765    960.55       971    0.194555    0.257766
2021-05-15T00:53:14.043080+0000     7     255      6961      6706   957.727       941    0.211296    0.259586
2021-05-15T00:53:15.043324+0000     8     255      7922      7667   958.107       961    0.412707    0.260096
2021-05-15T00:53:16.043709+0000     9     256      8856      8600   955.277       933    0.207286    0.261809
2021-05-15T00:53:17.043944+0000    10     255      9826      9571   956.826       971    0.211955    0.261967
2021-05-15T00:53:18.044304+0000    11     255     10789     10534   957.356       963    0.265286    0.262756
2021-05-15T00:53:19.044578+0000    12     255     11714     11459   954.639       925    0.274971     0.26373
2021-05-15T00:53:20.044803+0000    13     255     12669     12414    954.65       955    0.264404    0.264165
2021-05-15T00:53:21.045480+0000    14     255     13617     13362   954.129       948    0.271574     0.26442
2021-05-15T00:53:22.046427+0000    15     255     14551     14296   952.727       934    0.275765    0.265012
2021-05-15T00:53:23.046670+0000    16     255     15498     15243   952.355       947    0.266143    0.265336
2021-05-15T00:53:24.046946+0000 Total time run:       16.8734
Total reads made:     16194
Read size:            1048576
Object size:          1048576
Bandwidth (MB/sec):   959.733
Average IOPS:         959
Stddev IOPS:          19.3691
Max IOPS:             987
Min IOPS:             925
Average Latency(s):   0.264042
Max latency(s):       0.543953
Min latency(s):       0.071185

[1;32mlocalhost.localdomain	[2021-05-14T17:53:24,791866710-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4159501


[1;7;39;49m[2021-05-14T17:53:24,799218309-07:00][RUNNING][ROUND 1/2/20] object_size=4MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:53:24,806064711-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:53:24,822100572-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40537\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1792964\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 3faae442-b457-4db3-a67d-66e47eb7f0ed\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 3faae442-b457-4db3-a67d-66e47eb7f0ed\nlast_changed 2021-05-14T17:53:57.778428-0700\ncreated 2021-05-14T17:53:57.778428-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40537/0,v1:10.10.1.2:40538/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1792964 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 75052f68-f8cd-4925-84c4-5b2de447ca8b\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 d72c4eff-0c44-428d-a72d-6501b3a8a013\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 d1f4c35e-5151-4a3c-ac97-a217330250d1\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42537\n  w/ user/pass: admin / 15d48c79-79d0-4f13-a3b3-48f52736e6a3\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:54:20 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40537
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1792964
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 3faae442-b457-4db3-a67d-66e47eb7f0ed
setting min_mon_release = octopus
epoch 0
fsid 3faae442-b457-4db3-a67d-66e47eb7f0ed
last_changed 2021-05-14T17:53:57.778428-0700
created 2021-05-14T17:53:57.778428-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40537/0,v1:10.10.1.2:40538/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1792964 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 75052f68-f8cd-4925-84c4-5b2de447ca8b
0
start osd.0
add osd1 d72c4eff-0c44-428d-a72d-6501b3a8a013
1
start osd.1
add osd2 d1f4c35e-5151-4a3c-ac97-a217330250d1
2
start osd.2


restful urls: https://10.10.1.2:42537
  w/ user/pass: admin / 15d48c79-79d0-4f13-a3b3-48f52736e6a3


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:53:26.977-0700 7f2dc3f061c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:53:26.977-0700 7f2dc3f061c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:53:26.997-0700 7fcf7ec6e1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:53:26.997-0700 7fcf7ec6e1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40537,v1:10.10.1.2:40538] --print /tmp/ceph_monmap.1792964 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1792964 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1792964 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42537 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x555debdc4000 @  0x7f39bf7bf680 0x7f39bf7e0824 0x7f39bff7b187 0x7f39bff83355 0x7f39bff7b708 0x7f39bff7b877 0x7f39bff7cc24 0x7f39bff94ec1 0x7f39bff075f3 0x7f39bff68e97 0x7f39bff70b1a 0x7f39bf673d84 0x7f39bf78f609 0x7f39bf363103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.pap8wBLQwl 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 75052f68-f8cd-4925-84c4-5b2de447ca8b -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCyG59gSLdeLxAAH53DK1bQOk5G7/Dg0pRiig== --osd-uuid 75052f68-f8cd-4925-84c4-5b2de447ca8b 
2021-05-14T17:54:11.646-0700 7f32b544df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:54:11.670-0700 7f32b544df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:54:11.670-0700 7f32b544df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55f08245e000 @  0x7f32b5e16680 0x7f32b5e37824 0x55f077c5e447 0x55f077c664b5 0x55f077c5e9c8 0x55f077c5eb37 0x55f077c5fee4 0x55f077a30ca1 0x55f077c08423 0x55f077a212a7 0x55f077a2653a 0x7f32b5969d84 0x7f32b5aee609 0x7f32b5657103
2021-05-14T17:54:12.126-0700 7f32b544df00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d72c4eff-0c44-428d-a72d-6501b3a8a013 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55ffefa08000 @  0x7fa4b745a680 0x7fa4b747b824 0x55ffe54ec447 0x55ffe54f44b5 0x55ffe54ec9c8 0x55ffe54ecb37 0x55ffe54edee4 0x55ffe52beca1 0x55ffe5496423 0x55ffe52af2a7 0x55ffe52b453a 0x7fa4b6fadd84 0x7fa4b7132609 0x7fa4b6c9b103
2021-05-14T17:54:12.958-0700 7fa4b6a91f00 -1 Falling back to public interface
2021-05-14T17:54:13.358-0700 7fa4b6a91f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQC0G59g1hdnHhAAFMFxPDsZ+XU5QG6uabcThg== --osd-uuid d72c4eff-0c44-428d-a72d-6501b3a8a013 
2021-05-14T17:54:13.402-0700 7f8601733f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:54:13.422-0700 7f8601733f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:54:13.422-0700 7f8601733f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x562e2e13c000 @  0x7f86020fc680 0x7f860211d824 0x562e22903447 0x562e2290b4b5 0x562e229039c8 0x562e22903b37 0x562e22904ee4 0x562e226d5ca1 0x562e228ad423 0x562e226c62a7 0x562e226cb53a 0x7f8601c4fd84 0x7f8601dd4609 0x7f860193d103
2021-05-14T17:54:13.914-0700 7f8601733f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new d1f4c35e-5151-4a3c-ac97-a217330250d1 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55b494516000 @  0x7fbbfc21e680 0x7fbbfc23f824 0x55b48a4ca447 0x55b48a4d24b5 0x55b48a4ca9c8 0x55b48a4cab37 0x55b48a4cbee4 0x55b48a29cca1 0x55b48a474423 0x55b48a28d2a7 0x55b48a29253a 0x7fbbfbd71d84 0x7fbbfbef6609 0x7fbbfba5f103
2021-05-14T17:54:14.858-0700 7fbbfb855f00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQC2G59gysIKGRAA3pEyxJ4czgbS5ZuFZxt2Vg== --osd-uuid d1f4c35e-5151-4a3c-ac97-a217330250d1 
2021-05-14T17:54:15.246-0700 7f58d9c5cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:54:15.266-0700 7f58d9c5cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:54:15.266-0700 7f58d9c5cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:54:15.278-0700 7fbbfb855f00 -1 osd.1 0 log_to_monitors {default=true}
tcmalloc: large alloc 1074077696 bytes == 0x55babfdbe000 @  0x7f58da625680 0x7f58da646824 0x55bab45a8447 0x55bab45b04b5 0x55bab45a89c8 0x55bab45a8b37 0x55bab45a9ee4 0x55bab437aca1 0x55bab4552423 0x55bab436b2a7 0x55bab437053a 0x7f58da178d84 0x7f58da2fd609 0x7f58d9e66103
2021-05-14T17:54:15.730-0700 7f58d9c5cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x560c082f2000 @  0x7fb49af97680 0x7fb49afb8824 0x560bfd4df447 0x560bfd4e74b5 0x560bfd4df9c8 0x560bfd4dfb37 0x560bfd4e0ee4 0x560bfd2b1ca1 0x560bfd489423 0x560bfd2a22a7 0x560bfd2a753a 0x7fb49aaead84 0x7fb49ac6f609 0x7fb49a7d8103
2021-05-14T17:54:16.530-0700 7fb49a5cef00 -1 Falling back to public interface
2021-05-14T17:54:16.922-0700 7fb49a5cef00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:54:20,712531863-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:54:20,731893761-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:54:20,814499159-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:20,820682239-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:22.638+0000 ffff76a6e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:23.470+0000 ffff76a6e1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:54:24,929940935-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:24,936127886-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:26.783+0000 ffffa26dd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:27.627+0000 ffffa26dd1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:54:28,924928351-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:28,931163370-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:30.623+0000 ffff7fa1c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:31.447+0000 ffff7fa1c1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:54:32,875331435-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:32,882436527-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:34.528+0000 ffffae6bf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:35.372+0000 ffffae6bf1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:38.461+0000 ffff76a511e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:39.289+0000 ffff757ef1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:54:40,668559604-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:40,675011365-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:42.313+0000 ffff7eaf71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:43.213+0000 ffff7eaf71e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T17:54:45,458911399-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:45,465294688-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:47.194+0000 ffff7debc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:48.022+0000 ffff7debc1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T17:54:50,040074065-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:50,046525166-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:51.711+0000 ffffa9f641e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:52.539+0000 ffffa9f641e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T17:54:54,550190601-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:54,556664581-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:54:56.176+0000 ffff773561e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:54:57.032+0000 ffff773561e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:54:58,805741084-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:54:58,811977183-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:55:00.632+0000 ffff98aaa1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:55:01.461+0000 ffff98aaa1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T17:55:03,155373930-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:55:03,161891942-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:55:04.881+0000 ffffafcdc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:55:05.733+0000 ffffafcdc1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T17:55:07,866442270-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:55:07,872748326-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:55:09.510+0000 ffffaec261e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:55:10.338+0000 ffffaec261e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 23 lfor 0/0/23 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T17:55:11,721664945-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:55:11,727765556-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:55:13.447+0000 ffffa78971e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:55:14.287+0000 ffffa78971e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.06   89      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.95   90      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   62 KiB   0 B   0 B   0 B  100 GiB     0  0.99   80      up          osd.2  
                       TOTAL  300 GiB  188 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.95/1.06  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T17:55:15,586348419-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:55:40,203637582-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:55:49,517812974-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:55:58,758845327-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:07,803789729-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:16,999764113-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:17,014767018-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:26,378633227-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:26,393232789-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:35,574505172-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:35,589128857-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:44,744036977-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:44,758986308-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:54,155963831-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:54,170786420-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:54,182478501-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:56:54,189630941-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:56:54,205678069-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4170237
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T17:56:54,219299299-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T17:56:54,258022347-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:56:54,264276344-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4194304', '-O', '4194304', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:56:55.856+0000 ffff96832010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:56:56.688+0000 ffff96832010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:56:56.688+0000 ffff96832010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:56:56.712630+0000 Maintaining 256 concurrent writes of 4194304 bytes to objects of size 4194304 for up to 20 seconds or 0 objects
2021-05-15T00:56:56.712725+0000 Object prefix: benchmark_data_localhost.localdomain_7
2021-05-15T00:56:57.687872+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:56:57.687872+0000     0       0         0         0         0         0           -           0
2021-05-15T00:56:58.688170+0000     1     184       184         0         0         0           -           0
2021-05-15T00:56:59.688586+0000     2     255       359       104    207.94       208     1.45924     1.44488
2021-05-15T00:57:00.688909+0000     3     255       529       274   365.223       680     1.48779     1.45631
2021-05-15T00:57:01.689202+0000     4     255       708       453   452.865       716       1.483     1.47236
2021-05-15T00:57:02.689490+0000     5     255       895       640   511.848       748      1.3542     1.45371
2021-05-15T00:57:03.689701+0000     6     255      1077       822   547.845       728     1.39604     1.43645
2021-05-15T00:57:04.689945+0000     7     255      1267      1012   578.126       760     1.39122     1.42506
2021-05-15T00:57:05.690251+0000     8     255      1407      1152   575.838       560     1.61469     1.42329
2021-05-15T00:57:06.690554+0000     9     255      1555      1300   577.614       592     1.82501     1.46565
2021-05-15T00:57:07.690970+0000    10     255      1641      1386   554.236       344     2.20296     1.50355
2021-05-15T00:57:08.691174+0000    11     255      1736      1481    538.39       380     2.39991     1.55125
2021-05-15T00:57:09.691367+0000    12     255      1833      1578   525.853       388     2.70819     1.61018
2021-05-15T00:57:10.691569+0000    13     255      1988      1733   533.085       620     2.03359     1.68413
2021-05-15T00:57:11.691800+0000    14     255      2177      1922   548.994       756     1.36535     1.68331
2021-05-15T00:57:12.692089+0000    15     255      2365      2110   562.514       752     1.36034     1.65525
2021-05-15T00:57:13.692407+0000    16     255      2560      2305   576.092       780     1.32755     1.62838
2021-05-15T00:57:14.692653+0000    17     255      2751      2496   587.134       764     1.33444     1.60555
2021-05-15T00:57:15.692987+0000    18     255      2936      2681   595.613       740     1.34547     1.58825
2021-05-15T00:57:16.693246+0000    19     255      3125      2870   604.044       756     1.37308     1.57374
2021-05-15T00:57:17.693622+0000 min lat: 1.28852 max lat: 2.83339 avg lat: 1.56106
2021-05-15T00:57:17.693622+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:57:17.693622+0000    20     255      3309      3054   610.629       736     1.37551     1.56106
2021-05-15T00:57:18.693952+0000 Total time run:         20.0367
Total writes made:      3310
Write size:             4194304
Object size:            4194304
Bandwidth (MB/sec):     660.787
Stddev Bandwidth:       220.945
Max bandwidth (MB/sec): 780
Min bandwidth (MB/sec): 0
Average IOPS:           165
Stddev IOPS:            55.2362
Max IOPS:               195
Min IOPS:               0
Average Latency(s):     1.49476
Stddev Latency(s):      0.425677
Max latency(s):         2.83339
Min latency(s):         0.0398826

[1;32mlocalhost.localdomain	[2021-05-14T17:57:19,475006014-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4170237


[1;33mlocalhost.localdomain	[2021-05-14T17:57:19,482770394-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:57:43,579733862-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.31k objects, 13 GiB
    usage:   26 GiB used, 274 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:57:43,594871010-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:57:53,172552411-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.31k objects, 13 GiB
    usage:   26 GiB used, 274 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:57:53,187559367-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:02,307729607-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.31k objects, 13 GiB
    usage:   26 GiB used, 274 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:02,322916474-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:11,455564391-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.31k objects, 13 GiB
    usage:   26 GiB used, 274 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:11,471052990-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:22,850279650-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.31k objects, 13 GiB
    usage:   26 GiB used, 274 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:22,865405201-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:22,877175115-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:58:22,884168168-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T17:58:22,900207226-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4173889
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T17:58:22,913483637-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_seq.log.1
[1;30mlocalhost.localdomain	[2021-05-14T17:58:22,952312003-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:58:22,958641268-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'b80adf9a-3c02-42b4-9bdf-963637464279', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid b80adf9a-3c02-42b4-9bdf-963637464279 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.UicBqy:/tmp/ceph-asok.UicBqy -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:58:24.451+0000 ffffa51ee010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:58:25.279+0000 ffffa51ee010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:58:25.279+0000 ffffa51ee010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T00:58:25.308177+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T00:58:25.308177+0000     0       0         0         0         0         0           -           0
2021-05-15T00:58:26.308472+0000     1     255       343        88   351.838       352    0.822034    0.755302
2021-05-15T00:58:27.308726+0000     2     255       572       317   633.773       916     1.10723    0.936539
2021-05-15T00:58:28.308999+0000     3     255       810       555   739.756       952     1.07022     1.00087
2021-05-15T00:58:29.309259+0000     4     255      1042       787   786.754       928     1.09874     1.02581
2021-05-15T00:58:30.311782+0000     5     255      1267      1012    808.99       900     1.13277     1.04467
2021-05-15T00:58:31.312059+0000     6     255      1499      1244   828.774       928     1.10487     1.06127
2021-05-15T00:58:32.314119+0000     7     255      1730      1475   842.122       924     1.10558     1.06623
2021-05-15T00:58:33.314440+0000     8     255      1964      1709   853.814       936     1.08655     1.07136
2021-05-15T00:58:34.315579+0000     9     255      2196      1941   861.942       928     1.11549     1.07469
2021-05-15T00:58:35.315853+0000    10     255      2429      2174   868.919       932     1.08913     1.07858
2021-05-15T00:58:36.316200+0000    11     255      2662      2407   874.622       932     1.09276     1.07923
2021-05-15T00:58:37.316699+0000    12     255      2893      2638   878.697       924     1.09718     1.07963
2021-05-15T00:58:38.316944+0000    13     255      3101      2846   875.091       832     1.23578     1.08606
2021-05-15T00:58:39.378343+0000    14     213      3310      3097   880.434      1004     1.07903     1.09599
2021-05-15T00:58:40.378610+0000 Total time run:       14.3775
Total reads made:     3310
Read size:            4194304
Object size:          4194304
Bandwidth (MB/sec):   920.884
Average IOPS:         230
Stddev IOPS:          39.3665
Max IOPS:             251
Min IOPS:             88
Average Latency(s):   1.07332
Max latency(s):       1.24641
Min latency(s):       0.388351

[1;32mlocalhost.localdomain	[2021-05-14T17:58:41,165212956-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4173889


[1;7;39;49m[2021-05-14T17:58:41,170090649-07:00][RUNNING][ROUND 2/2/20] object_size=4MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T17:58:41,177037134-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T17:58:41,193487877-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40597\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1797688\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 100545cb-30f6-4736-858c-90464e852560\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 100545cb-30f6-4736-858c-90464e852560\nlast_changed 2021-05-14T17:59:14.456689-0700\ncreated 2021-05-14T17:59:14.456689-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40597/0,v1:10.10.1.2:40598/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1797688 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 52d65b16-6405-4e0d-bf35-d975d5617d6b\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 1bfc8a53-650b-4ea7-8f3a-68cdd51b55db\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 df8e0f5c-6c9d-41d1-bfa0-079d50bf8fd5\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42597\n  w/ user/pass: admin / dcd55cd3-b686-411c-90fc-d2936c3ce0d3\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 17:59:38 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40597
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1797688
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 100545cb-30f6-4736-858c-90464e852560
setting min_mon_release = octopus
epoch 0
fsid 100545cb-30f6-4736-858c-90464e852560
last_changed 2021-05-14T17:59:14.456689-0700
created 2021-05-14T17:59:14.456689-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40597/0,v1:10.10.1.2:40598/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1797688 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 52d65b16-6405-4e0d-bf35-d975d5617d6b
0
start osd.0
add osd1 1bfc8a53-650b-4ea7-8f3a-68cdd51b55db
1
start osd.1
add osd2 df8e0f5c-6c9d-41d1-bfa0-079d50bf8fd5
2
start osd.2


restful urls: https://10.10.1.2:42597
  w/ user/pass: admin / dcd55cd3-b686-411c-90fc-d2936c3ce0d3


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T17:58:43.353-0700 7f66328d01c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:58:43.353-0700 7f66328d01c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:58:43.373-0700 7fac7cf3a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T17:58:43.373-0700 7fac7cf3a1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40597,v1:10.10.1.2:40598] --print /tmp/ceph_monmap.1797688 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1797688 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1797688 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42597 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55b9d712a000 @  0x7f51a9069680 0x7f51a908a824 0x7f51a9825187 0x7f51a982d355 0x7f51a9825708 0x7f51a9825877 0x7f51a9826c24 0x7f51a983eec1 0x7f51a97b15f3 0x7f51a9812e97 0x7f51a981ab1a 0x7f51a8f1dd84 0x7f51a9039609 0x7f51a8c0d103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.3AyfeN4Czo 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 52d65b16-6405-4e0d-bf35-d975d5617d6b -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDwHJ9gSEViKBAAiColdLLbCuKvxqswhN2TGw== --osd-uuid 52d65b16-6405-4e0d-bf35-d975d5617d6b 
2021-05-14T17:59:29.509-0700 7f6bafb5cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:59:29.529-0700 7f6bafb5cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T17:59:29.529-0700 7f6bafb5cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5632ca0ec000 @  0x7f6bb0525680 0x7f6bb0546824 0x5632bec39447 0x5632bec414b5 0x5632bec399c8 0x5632bec39b37 0x5632bec3aee4 0x5632bea0bca1 0x5632bebe3423 0x5632be9fc2a7 0x5632bea0153a 0x7f6bb0078d84 0x7f6bb01fd609 0x7f6bafd66103
2021-05-14T17:59:30.001-0700 7f6bafb5cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 1bfc8a53-650b-4ea7-8f3a-68cdd51b55db -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55e52e5ec000 @  0x7fb8af334680 0x7fb8af355824 0x55e52444e447 0x55e5244564b5 0x55e52444e9c8 0x55e52444eb37 0x55e52444fee4 0x55e524220ca1 0x55e5243f8423 0x55e5242112a7 0x55e52421653a 0x7fb8aee87d84 0x7fb8af00c609 0x7fb8aeb75103
2021-05-14T17:59:30.825-0700 7fb8ae96bf00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDyHJ9gYQlBGRAAfKFXtUtCM7aibY8/9iBXaw== --osd-uuid 1bfc8a53-650b-4ea7-8f3a-68cdd51b55db 
2021-05-14T17:59:31.209-0700 7fda047b0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:59:31.221-0700 7fb8ae96bf00 -1 osd.0 0 log_to_monitors {default=true}
2021-05-14T17:59:31.229-0700 7fda047b0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T17:59:31.229-0700 7fda047b0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5622b4a54000 @  0x7fda05179680 0x7fda0519a824 0x5622a9742447 0x5622a974a4b5 0x5622a97429c8 0x5622a9742b37 0x5622a9743ee4 0x5622a9514ca1 0x5622a96ec423 0x5622a95052a7 0x5622a950a53a 0x7fda04cccd84 0x7fda04e51609 0x7fda049ba103
2021-05-14T17:59:31.621-0700 7fda047b0f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new df8e0f5c-6c9d-41d1-bfa0-079d50bf8fd5 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x564d6adf8000 @  0x7efe9053f680 0x7efe90560824 0x564d5fee4447 0x564d5feec4b5 0x564d5fee49c8 0x564d5fee4b37 0x564d5fee5ee4 0x564d5fcb6ca1 0x564d5fe8e423 0x564d5fca72a7 0x564d5fcac53a 0x7efe90092d84 0x7efe90217609 0x7efe8fd80103
2021-05-14T17:59:32.369-0700 7efe8fb76f00 -1 Falling back to public interface
2021-05-14T17:59:32.745-0700 7efe8fb76f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDzHJ9gSazuOhAAfHlkeVyLwUe9cuEuJFBjVw== --osd-uuid df8e0f5c-6c9d-41d1-bfa0-079d50bf8fd5 
2021-05-14T17:59:32.793-0700 7fa6b3d95f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:59:32.813-0700 7fa6b3d95f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T17:59:32.813-0700 7fa6b3d95f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5654f6598000 @  0x7fa6b475e680 0x7fa6b477f824 0x5654ea7a9447 0x5654ea7b14b5 0x5654ea7a99c8 0x5654ea7a9b37 0x5654ea7aaee4 0x5654ea57bca1 0x5654ea753423 0x5654ea56c2a7 0x5654ea57153a 0x7fa6b42b1d84 0x7fa6b4436609 0x7fa6b3f9f103
2021-05-14T17:59:33.209-0700 7fa6b3d95f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x560dac02a000 @  0x7fc3c86be680 0x7fc3c86df824 0x560da0bf0447 0x560da0bf84b5 0x560da0bf09c8 0x560da0bf0b37 0x560da0bf1ee4 0x560da09c2ca1 0x560da0b9a423 0x560da09b32a7 0x560da09b853a 0x7fc3c8211d84 0x7fc3c8396609 0x7fc3c7eff103
2021-05-14T17:59:34.081-0700 7fc3c7cf5f00 -1 Falling back to public interface
2021-05-14T17:59:34.433-0700 7fc3c7cf5f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T17:59:38,171990495-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T17:59:38,191436949-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T17:59:38,272418176-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:59:38,279081998-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:59:39.984+0000 ffffa53f51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:59:40.816+0000 ffffa53f51e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T17:59:42,336968438-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:59:42,342983235-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:59:43.981+0000 ffff7c5541e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:59:44.833+0000 ffff7c5541e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T17:59:46,177227901-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:59:46,183536207-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:59:47.861+0000 ffffa6f151e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:59:48.698+0000 ffffa6f151e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T17:59:50,068639856-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:59:50,075071319-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:59:51.826+0000 ffffa3a461e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:59:52.654+0000 ffffa3a461e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T00:59:56.015+0000 ffff7a32d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T00:59:56.831+0000 ffff7a32d1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T17:59:58,572866378-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T17:59:58,580901239-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:00.256+0000 ffff8a81b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:01.120+0000 ffff8a81b1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:00:03,468342600-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:03,474674176-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:05.104+0000 ffff937411e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:05.933+0000 ffff937411e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:00:08,027173996-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:08,033348390-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:09.805+0000 ffff81bbf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:10.673+0000 ffff81bbf1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:00:12,535432453-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:12,541933168-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:14.214+0000 ffff82ad91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:15.038+0000 ffff82ad91e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:00:17,550397482-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:17,556733423-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:19.387+0000 ffff78e3c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:20.227+0000 ffff78e3c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:00:22,567834096-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:22,574150774-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:24.200+0000 ffff797251e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:25.044+0000 ffff797251e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:00:26,973552011-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:26,979680617-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:28.572+0000 ffffa6e061e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:29.409+0000 ffffa5ba41e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:00:30,825577589-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:00:30,831778208-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:00:32.517+0000 ffff993521e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:00:33.337+0000 ffff993521e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  200 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:00:34,646209801-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:00:59,054874484-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:08,199591579-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:17,229859295-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:26,556865480-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:36,179883981-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:36,194899834-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:45,331557315-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:45,346774143-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:54,491911248-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:01:54,507475235-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:02:03,711759378-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:02:03,727385130-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:02:13,104064042-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:02:13,119513695-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:02:13,131660263-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:02:13,138772572-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:02:13,155007759-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4184680
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T18:02:13,168385347-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_write.log.2
[1;30mlocalhost.localdomain	[2021-05-14T18:02:13,207658406-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:02:13,214210490-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4194304', '-O', '4194304', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:02:14.771+0000 ffffbd98f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:02:15.579+0000 ffffbd98f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:02:15.579+0000 ffffbd98f010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:02:15.601072+0000 Maintaining 256 concurrent writes of 4194304 bytes to objects of size 4194304 for up to 20 seconds or 0 objects
2021-05-15T01:02:15.601166+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:02:16.548923+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:02:16.548923+0000     0       0         0         0         0         0           -           0
2021-05-15T01:02:17.549200+0000     1     182       182         0         0         0           -           0
2021-05-15T01:02:18.549632+0000     2     255       356       101   201.942       202     1.44387     1.45238
2021-05-15T01:02:19.550079+0000     3     255       532       277   369.207       704      1.4332     1.45786
2021-05-15T01:02:20.550385+0000     4     255       711       456   455.848       716      1.4415     1.45089
2021-05-15T01:02:21.550670+0000     5     255       895       640   511.835       736     1.38715     1.44324
2021-05-15T01:02:22.550884+0000     6     255      1070       815   543.168       700     1.43141     1.43176
2021-05-15T01:02:23.551088+0000     7     255      1107       852   486.716       148     2.02029     1.44452
2021-05-15T01:02:24.551268+0000     8     255      1124       869    434.38        68     2.98169     1.46776
2021-05-15T01:02:25.551445+0000     9     255      1187       932   414.112       252     3.79794     1.61042
2021-05-15T01:02:26.551651+0000    10     255      1267      1012   404.695       320     4.35025     1.80758
2021-05-15T01:02:27.551846+0000    11     255      1388      1133   411.896       484     2.72745      2.0636
2021-05-15T01:02:28.552078+0000    12     255      1475      1220   406.564       348      2.6074     2.09584
2021-05-15T01:02:29.552300+0000    13     255      1557      1302   400.515       328      2.6241     2.12872
2021-05-15T01:02:30.552525+0000    14     255      1609      1354   386.761       208     3.11717     2.15788
2021-05-15T01:02:31.552765+0000    15     255      1770      1515     403.9       644     2.41245     2.25426
2021-05-15T01:02:32.553077+0000    16     255      1955      1700   424.893       740     1.38347     2.19997
2021-05-15T01:02:33.553447+0000    17     255      2137      1882   442.709       728     1.37491     2.12177
2021-05-15T01:02:34.553858+0000    18     255      2317      2062     458.1       720     1.42011     2.05913
2021-05-15T01:02:35.554299+0000    19     255      2498      2243    472.08       724     1.43085     2.00839
2021-05-15T01:02:36.554658+0000 min lat: 0.0454723 max lat: 4.66152 avg lat: 1.85039
2021-05-15T01:02:36.554658+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:02:36.554658+0000    20       6      2676      2670    533.85      1708    0.047546     1.85039
2021-05-15T01:02:37.554961+0000 Total time run:         20.0228
Total writes made:      2676
Write size:             4194304
Object size:            4194304
Bandwidth (MB/sec):     534.591
Stddev Bandwidth:       379.899
Max bandwidth (MB/sec): 1708
Min bandwidth (MB/sec): 0
Average IOPS:           133
Stddev IOPS:            94.9972
Max IOPS:               427
Min IOPS:               0
Average Latency(s):     1.84635
Stddev Latency(s):      0.947466
Max latency(s):         4.66152
Min latency(s):         0.0251358

[1;32mlocalhost.localdomain	[2021-05-14T18:02:38,367067127-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4184680


[1;33mlocalhost.localdomain	[2021-05-14T18:02:38,374926534-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:02,445722013-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.68k objects, 10 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:02,461218189-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:11,821975879-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.68k objects, 10 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:11,837330370-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:21,173841891-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.68k objects, 10 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:21,189274066-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:30,443726268-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.68k objects, 10 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:30,459394462-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:39,648048996-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.68k objects, 10 GiB
    usage:   21 GiB used, 279 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:39,663386745-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:39,675733162-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:03:39,682778545-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:03:39,698964598-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=4188257
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T18:03:39,712688536-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T18:03:39,751016509-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:03:39,757386837-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'e5c3c9b1-915f-45c8-a7d6-409a97b37914', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid e5c3c9b1-915f-45c8-a7d6-409a97b37914 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.pnuDSX:/tmp/ceph-asok.pnuDSX -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:03:41.229+0000 ffff97530010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:03:42.053+0000 ffff97530010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:03:42.057+0000 ffff97530010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:03:42.109619+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:03:42.109619+0000     0       7         7         0         0         0           -           0
2021-05-15T01:03:43.110630+0000     1     255       353        98   391.379       392    0.797333     0.72437
2021-05-15T01:03:44.111091+0000     2     255       594       339   677.307       964     1.05493    0.896228
2021-05-15T01:03:45.111379+0000     3     255       830       575    766.07       944     1.07335    0.963192
2021-05-15T01:03:46.111725+0000     4     255      1057       802   801.463       908     1.12358     1.00741
2021-05-15T01:03:47.112077+0000     5     255      1281      1026   820.302       896     1.12689     1.03375
2021-05-15T01:03:48.112353+0000     6     255      1514      1259   838.871       932     1.10838     1.05024
2021-05-15T01:03:49.112659+0000     7     255      1727      1472   840.709       852     1.17192      1.0615
2021-05-15T01:03:50.112946+0000     8     255      1942      1687   843.089       860     1.18895     1.07987
2021-05-15T01:03:51.113208+0000     9     255      2161      1906   846.719       876     1.16551     1.09097
2021-05-15T01:03:52.113447+0000    10     255      2378      2123   848.826       868     1.17625     1.09876
2021-05-15T01:03:53.114597+0000    11     255      2598      2343    851.57       880     1.17361     1.10624
2021-05-15T01:03:54.114865+0000 Total time run:       11.7451
Total reads made:     2676
Read size:            4194304
Object size:          4194304
Bandwidth (MB/sec):   911.358
Average IOPS:         227
Stddev IOPS:          39.1918
Max IOPS:             241
Min IOPS:             98
Average Latency(s):   1.07695
Max latency(s):       1.22987
Min latency(s):       0.396269

[1;32mlocalhost.localdomain	[2021-05-14T18:03:54,926578241-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 4188257


[1;7;39;49m[2021-05-14T18:03:54,931684318-07:00][RUNNING][ROUND 3/2/20] object_size=4MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:03:54,939096033-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:03:54,955199737-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40453\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1801395\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid cefa2428-d90c-4c20-84e2-7b411fe732bd\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid cefa2428-d90c-4c20-84e2-7b411fe732bd\nlast_changed 2021-05-14T18:04:28.679407-0700\ncreated 2021-05-14T18:04:28.679407-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40453/0,v1:10.10.1.2:40454/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1801395 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 83bbc443-c199-46ad-ac33-d9c549578ce1\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 e6dd75f2-d32b-46e1-b31f-22ce755b25de\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 398bc189-1c13-4adc-bf87-0d067f3fba6e\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42453\n  w/ user/pass: admin / ce5a15fc-bb73-43ae-b6e7-637f743f67d8\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\nCEPH_DEV=1\n'
[1] 18:04:51 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40453
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1801395
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid cefa2428-d90c-4c20-84e2-7b411fe732bd
setting min_mon_release = octopus
epoch 0
fsid cefa2428-d90c-4c20-84e2-7b411fe732bd
last_changed 2021-05-14T18:04:28.679407-0700
created 2021-05-14T18:04:28.679407-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40453/0,v1:10.10.1.2:40454/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1801395 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 83bbc443-c199-46ad-ac33-d9c549578ce1
0
start osd.0
add osd1 e6dd75f2-d32b-46e1-b31f-22ce755b25de
1
start osd.1
add osd2 398bc189-1c13-4adc-bf87-0d067f3fba6e
2
start osd.2


restful urls: https://10.10.1.2:42453
  w/ user/pass: admin / ce5a15fc-bb73-43ae-b6e7-637f743f67d8


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:03:57.228-0700 7f9080f4c1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:03:57.228-0700 7f9080f4c1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:03:57.248-0700 7fbc919991c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:03:57.248-0700 7fbc919991c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40453,v1:10.10.1.2:40454] --print /tmp/ceph_monmap.1801395 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1801395 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1801395 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42453 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55ee5abb4000 @  0x7f27d7bc4680 0x7f27d7be5824 0x7f27d8380187 0x7f27d8388355 0x7f27d8380708 0x7f27d8380877 0x7f27d8381c24 0x7f27d8399ec1 0x7f27d830c5f3 0x7f27d836de97 0x7f27d8375b1a 0x7f27d7a78d84 0x7f27d7b94609 0x7f27d7768103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.Wc04xaTMi4 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 83bbc443-c199-46ad-ac33-d9c549578ce1 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQApHp9gMoyGKhAAGvuAdDxpJWIWG8ZipNbPjQ== --osd-uuid 83bbc443-c199-46ad-ac33-d9c549578ce1 
2021-05-14T18:04:42.612-0700 7f9c1372df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:04:42.632-0700 7f9c1372df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:04:42.632-0700 7f9c1372df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55bc95f76000 @  0x7f9c140f6680 0x7f9c14117824 0x55bc8b576447 0x55bc8b57e4b5 0x55bc8b5769c8 0x55bc8b576b37 0x55bc8b577ee4 0x55bc8b348ca1 0x55bc8b520423 0x55bc8b3392a7 0x55bc8b33e53a 0x7f9c13c49d84 0x7f9c13dce609 0x7f9c13937103
2021-05-14T18:04:43.116-0700 7f9c1372df00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new e6dd75f2-d32b-46e1-b31f-22ce755b25de -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5582033f8000 @  0x7fc74568a680 0x7fc7456ab824 0x5581f76de447 0x5581f76e64b5 0x5581f76de9c8 0x5581f76deb37 0x5581f76dfee4 0x5581f74b0ca1 0x5581f7688423 0x5581f74a12a7 0x5581f74a653a 0x7fc7451ddd84 0x7fc745362609 0x7fc744ecb103
2021-05-14T18:04:44.000-0700 7fc744cc1f00 -1 Falling back to public interface
2021-05-14T18:04:44.408-0700 7fc744cc1f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQArHp9gwfKsHxAATo74xdt0sWlRxnOZWAzhZA== --osd-uuid e6dd75f2-d32b-46e1-b31f-22ce755b25de 
2021-05-14T18:04:44.436-0700 7f46654faf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:04:44.456-0700 7f46654faf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:04:44.456-0700 7f46654faf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55a2036fc000 @  0x7f4665ec3680 0x7f4665ee4824 0x55a1f93e0447 0x55a1f93e84b5 0x55a1f93e09c8 0x55a1f93e0b37 0x55a1f93e1ee4 0x55a1f91b2ca1 0x55a1f938a423 0x55a1f91a32a7 0x55a1f91a853a 0x7f4665a16d84 0x7f4665b9b609 0x7f4665704103
2021-05-14T18:04:44.948-0700 7f46654faf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 398bc189-1c13-4adc-bf87-0d067f3fba6e -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55fd53b5a000 @  0x7fee4773f680 0x7fee47760824 0x55fd48309447 0x55fd483114b5 0x55fd483099c8 0x55fd48309b37 0x55fd4830aee4 0x55fd480dbca1 0x55fd482b3423 0x55fd480cc2a7 0x55fd480d153a 0x7fee47292d84 0x7fee47417609 0x7fee46f80103
2021-05-14T18:04:45.764-0700 7fee46d76f00 -1 Falling back to public interface
2021-05-14T18:04:46.148-0700 7fee46d76f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAtHp9gZJvAFBAAx82VGX7Gihm8Y12WwXw16Q== --osd-uuid 398bc189-1c13-4adc-bf87-0d067f3fba6e 
2021-05-14T18:04:46.176-0700 7fdc00e66f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:04:46.196-0700 7fdc00e66f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:04:46.196-0700 7fdc00e66f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5628dd1c4000 @  0x7fdc0182f680 0x7fdc01850824 0x5628d27c5447 0x5628d27cd4b5 0x5628d27c59c8 0x5628d27c5b37 0x5628d27c6ee4 0x5628d2597ca1 0x5628d276f423 0x5628d25882a7 0x5628d258d53a 0x7fdc01382d84 0x7fdc01507609 0x7fdc01070103
2021-05-14T18:04:46.636-0700 7fdc00e66f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5595f18ec000 @  0x7f6a7923d680 0x7f6a7925e824 0x5595e6ff7447 0x5595e6fff4b5 0x5595e6ff79c8 0x5595e6ff7b37 0x5595e6ff8ee4 0x5595e6dc9ca1 0x5595e6fa1423 0x5595e6dba2a7 0x5595e6dbf53a 0x7f6a78d90d84 0x7f6a78f15609 0x7f6a78a7e103
2021-05-14T18:04:47.440-0700 7f6a78874f00 -1 Falling back to public interface
2021-05-14T18:04:47.796-0700 7f6a78874f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:04:51,479864465-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:04:51,499764219-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:04:51,581139887-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:04:51,587565037-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:04:53.546+0000 ffff95f101e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:04:54.370+0000 ffff95f101e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:04:56,138917937-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:04:56,145223426-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:04:57.831+0000 ffffa106b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:04:58.679+0000 ffffa106b1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:05:00,132848492-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:00,139208995-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:01.939+0000 ffff9db201e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:02.763+0000 ffff9c8be1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:05:04,342205337-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:04,348619370-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:06.024+0000 ffff9ae111e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:06.880+0000 ffff99baf1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:09.945+0000 ffff774961e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:10.765+0000 ffff774961e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:05:12,201944066-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:12,208291697-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:14.157+0000 ffff88d081e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:15.017+0000 ffff8359e1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:05:17,085906238-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:17,093492049-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:18.754+0000 ffffac0841e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:19.582+0000 ffffaae221e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:05:21,495684655-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:21,502044933-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:23.179+0000 ffff7b3211e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:24.019+0000 ffff7b3211e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:05:26,524273558-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:26,530733348-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:28.528+0000 ffff9f9271e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:29.376+0000 ffff9f9271e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:05:31,522743350-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:31,528911115-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:33.181+0000 ffff824331e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:34.017+0000 ffff824331e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:05:35,797507212-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:35,803893084-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:37.457+0000 ffffb30c51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:38.306+0000 ffffb30c51e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:05:40,185603698-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:40,192008248-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:42.106+0000 ffffa29541e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:42.922+0000 ffffa29541e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:05:44,640502898-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:05:44,648318982-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:05:46.299+0000 ffffb0edb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:05:47.143+0000 ffffb0edb1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  198 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  200 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:05:48,384293179-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:12,515683004-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:21,783491618-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:31,041211136-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:40,073118955-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:49,145351635-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:49,160892840-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:58,705663343-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:06:58,723351209-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:07,867819141-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:07,883228411-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:17,575931607-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:17,591569666-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:26,581367395-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:26,596923360-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:26,609070165-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:07:26,616307357-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:07:26,632804224-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=5146
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T18:07:26,646417533-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_write.log.3
[1;30mlocalhost.localdomain	[2021-05-14T18:07:26,685967237-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:07:26,692489660-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4194304', '-O', '4194304', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:07:28.125+0000 ffffa6319010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:07:28.973+0000 ffffa6319010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:07:28.973+0000 ffffa6319010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:07:28.993240+0000 Maintaining 256 concurrent writes of 4194304 bytes to objects of size 4194304 for up to 20 seconds or 0 objects
2021-05-15T01:07:28.993332+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:07:29.942728+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:07:29.942728+0000     0       0         0         0         0         0           -           0
2021-05-15T01:07:30.942955+0000     1     188       188         0         0         0           -           0
2021-05-15T01:07:31.943167+0000     2     255       377       122   243.967       244     1.34883     1.35688
2021-05-15T01:07:32.943509+0000     3     255       547       292   389.253       680     1.43528     1.38833
2021-05-15T01:07:33.943908+0000     4     255       724       469   468.881       708     1.46107     1.41739
2021-05-15T01:07:34.944132+0000     5     255       911       656    524.67       748     1.35416     1.41997
2021-05-15T01:07:35.944353+0000     6     255      1063       808   538.536       608     1.55621      1.4206
2021-05-15T01:07:36.944672+0000     7     255      1258      1003   572.997       780     1.49588     1.44544
2021-05-15T01:07:37.945183+0000     8     255      1435      1180   589.831       708     1.38369     1.43556
2021-05-15T01:07:38.945637+0000     9     255      1607      1352   600.706       688     1.47326     1.43129
2021-05-15T01:07:39.945880+0000    10     255      1785      1530   611.817       712     1.54925     1.43847
2021-05-15T01:07:40.946127+0000    11     255      1957      1702   618.727       688     1.44919     1.44369
2021-05-15T01:07:41.946405+0000    12     255      2150      1895   631.482       772     1.34675     1.43909
2021-05-15T01:07:42.946595+0000    13     255      2340      2085   641.356       760     1.36176      1.4309
2021-05-15T01:07:43.946913+0000    14     255      2524      2269     648.1       736     1.38027     1.42701
2021-05-15T01:07:44.947390+0000    15     255      2705      2450   653.138       724     1.39678     1.42466
2021-05-15T01:07:45.947767+0000    16     255      2900      2645   661.049       780     1.32259     1.41977
2021-05-15T01:07:46.948202+0000    17     255      3085      2830   665.674       740     1.36375     1.41475
2021-05-15T01:07:47.948480+0000    18     255      3282      3027   672.458       788     1.30034     1.41116
2021-05-15T01:07:48.948841+0000    19     255      3474      3219   677.472       768     1.30942     1.40459
2021-05-15T01:07:49.949249+0000 min lat: 1.27848 max lat: 1.59206 avg lat: 1.40362
2021-05-15T01:07:49.949249+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:07:49.949249+0000    20     255      3651      3396   678.984       708     1.40328     1.40362
2021-05-15T01:07:50.949506+0000 Total time run:         20.0386
Total writes made:      3652
Write size:             4194304
Object size:            4194304
Bandwidth (MB/sec):     728.993
Stddev Bandwidth:       195.391
Max bandwidth (MB/sec): 788
Min bandwidth (MB/sec): 0
Average IOPS:           182
Stddev IOPS:            48.8476
Max IOPS:               197
Min IOPS:               0
Average Latency(s):     1.35575
Stddev Latency(s):      0.215664
Max latency(s):         1.59206
Min latency(s):         0.0331669

[1;32mlocalhost.localdomain	[2021-05-14T18:07:51,745964283-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 5146


[1;33mlocalhost.localdomain	[2021-05-14T18:07:51,753725934-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:15,755272132-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.65k objects, 14 GiB
    usage:   29 GiB used, 271 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:15,770770860-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:26,211396860-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.65k objects, 14 GiB
    usage:   29 GiB used, 271 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:26,226814558-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:35,517419279-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.65k objects, 14 GiB
    usage:   29 GiB used, 271 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:35,533089845-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:44,590878266-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.65k objects, 14 GiB
    usage:   29 GiB used, 271 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:44,606516696-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:54,275177937-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.65k objects, 14 GiB
    usage:   29 GiB used, 271 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:54,290891259-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:54,303221678-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:08:54,310458267-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:08:54,326865984-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=8736
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T18:08:54,340627095-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T18:08:54,379441571-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:08:54,385924655-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '47c413ea-25ee-4b9b-873e-ac956e95ec3a', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 47c413ea-25ee-4b9b-873e-ac956e95ec3a --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.yFhpEz:/tmp/ceph-asok.yFhpEz -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:08:55.832+0000 ffff906a0010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:08:56.644+0000 ffff906a0010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:08:56.644+0000 ffff906a0010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:08:56.674751+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:08:56.674751+0000     0       0         0         0         0         0           -           0
2021-05-15T01:08:57.676253+0000     1     255       345        90   359.402       360    0.815518    0.743087
2021-05-15T01:08:58.677919+0000     2     255       581       326   650.916       944     1.09078    0.913117
2021-05-15T01:08:59.678143+0000     3     255       822       567   755.105       964     1.05827    0.982283
2021-05-15T01:09:00.679307+0000     4     255      1052       797   796.061       920     1.10175     1.01216
2021-05-15T01:09:01.681394+0000     5     255      1286      1031   823.679       936     1.09164     1.03471
2021-05-15T01:09:02.683025+0000     6     255      1518      1263   840.818       928     1.09834     1.04536
2021-05-15T01:09:03.683266+0000     7     255      1753      1498    854.94       940     1.08097      1.0525
2021-05-15T01:09:04.684701+0000     8     255      1977      1722   859.913       896     1.14181     1.05839
2021-05-15T01:09:05.685889+0000     9     255      2194      1939   860.697       868     1.17577     1.07147
2021-05-15T01:09:06.686150+0000    10     255      2412      2157   861.804       872     1.16832     1.08237
2021-05-15T01:09:07.686406+0000    11     255      2628      2373   861.983       864     1.17669     1.09153
2021-05-15T01:09:08.686683+0000    12     255      2846      2591   862.797       872      1.1594     1.09747
2021-05-15T01:09:09.687127+0000    13     255      3054      2799   860.401       832     1.22581     1.10453
2021-05-15T01:09:10.688122+0000    14     255      3264      3009   858.884       840     1.22433     1.11315
2021-05-15T01:09:11.690528+0000    15     255      3476      3221   858.022       848      1.2144     1.12021
2021-05-15T01:09:12.691577+0000    16     130      3652      3522   879.566      1204    0.792445     1.11883
2021-05-15T01:09:13.691815+0000 Total time run:       16.1969
Total reads made:     3652
Read size:            4194304
Object size:          4194304
Bandwidth (MB/sec):   901.899
Average IOPS:         225
Stddev IOPS:          40.9713
Max IOPS:             301
Min IOPS:             90
Average Latency(s):   1.10006
Max latency(s):       1.24128
Min latency(s):       0.392955

[1;32mlocalhost.localdomain	[2021-05-14T18:09:14,482289971-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 8736


[1;7;39;49m[2021-05-14T18:09:14,487512718-07:00][RUNNING][ROUND 4/2/20] object_size=4MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:09:14,495109759-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:09:14,511445763-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40468\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1804877\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 8e7e5830-2475-4355-bd94-58e9e34a8322\n'
10.10.1.2: b'setting min_mon_release = octopus\nepoch 0\nfsid 8e7e5830-2475-4355-bd94-58e9e34a8322\nlast_changed 2021-05-14T18:09:47.056258-0700\ncreated 2021-05-14T18:09:47.056258-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40468/0,v1:10.10.1.2:40469/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1804877 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 da2a4be1-a336-48ea-b6e3-52034ab3cd63\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 97ec3718-556b-462e-851b-ca38d5b9cd59\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 b9b86802-f044-401b-aeea-f9005e15e5d9\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42468\n  w/ user/pass: admin / db151293-4e55-4d77-a49b-1be994f6fe96\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\nCEPH_DEV=1\n'
[1] 18:10:10 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40468
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1804877
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 8e7e5830-2475-4355-bd94-58e9e34a8322
setting min_mon_release = octopus
epoch 0
fsid 8e7e5830-2475-4355-bd94-58e9e34a8322
last_changed 2021-05-14T18:09:47.056258-0700
created 2021-05-14T18:09:47.056258-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40468/0,v1:10.10.1.2:40469/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1804877 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 da2a4be1-a336-48ea-b6e3-52034ab3cd63
0
start osd.0
add osd1 97ec3718-556b-462e-851b-ca38d5b9cd59
1
start osd.1
add osd2 b9b86802-f044-401b-aeea-f9005e15e5d9
2
start osd.2


restful urls: https://10.10.1.2:42468
  w/ user/pass: admin / db151293-4e55-4d77-a49b-1be994f6fe96


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:09:16.671-0700 7fca78f961c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:09:16.671-0700 7fca78f961c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:09:16.691-0700 7f01768821c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:09:16.691-0700 7f01768821c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40468,v1:10.10.1.2:40469] --print /tmp/ceph_monmap.1804877 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1804877 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1804877 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42468 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x56132e51e000 @  0x7f00547b7680 0x7f00547d8824 0x7f0054f73187 0x7f0054f7b355 0x7f0054f73708 0x7f0054f73877 0x7f0054f74c24 0x7f0054f8cec1 0x7f0054eff5f3 0x7f0054f60e97 0x7f0054f68b1a 0x7f005466bd84 0x7f0054787609 0x7f005435b103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.hT14JEj4iw 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new da2a4be1-a336-48ea-b6e3-52034ab3cd63 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBpH59gWG7jGhAA3VRT0gYA9sQAc7R2Y2Pytg== --osd-uuid da2a4be1-a336-48ea-b6e3-52034ab3cd63 
2021-05-14T18:10:02.260-0700 7fb4c1c52f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:10:02.280-0700 7fb4c1c52f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:10:02.280-0700 7fb4c1c52f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55b7d1b58000 @  0x7fb4c261b680 0x7fb4c263c824 0x55b7c6ec1447 0x55b7c6ec94b5 0x55b7c6ec19c8 0x55b7c6ec1b37 0x55b7c6ec2ee4 0x55b7c6c93ca1 0x55b7c6e6b423 0x55b7c6c842a7 0x55b7c6c8953a 0x7fb4c216ed84 0x7fb4c22f3609 0x7fb4c1e5c103
2021-05-14T18:10:02.728-0700 7fb4c1c52f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 97ec3718-556b-462e-851b-ca38d5b9cd59 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5632570fe000 @  0x7f7c6e344680 0x7f7c6e365824 0x56324b6eb447 0x56324b6f34b5 0x56324b6eb9c8 0x56324b6ebb37 0x56324b6ecee4 0x56324b4bdca1 0x56324b695423 0x56324b4ae2a7 0x56324b4b353a 0x7f7c6de97d84 0x7f7c6e01c609 0x7f7c6db85103
2021-05-14T18:10:03.600-0700 7f7c6d97bf00 -1 Falling back to public interface
2021-05-14T18:10:03.960-0700 7f7c6d97bf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBrH59gTLHxChAAumvQVgTPoy13IfHgLxXP6Q== --osd-uuid 97ec3718-556b-462e-851b-ca38d5b9cd59 
2021-05-14T18:10:03.984-0700 7fe52a46cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:10:04.004-0700 7fe52a46cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:10:04.004-0700 7fe52a46cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56491bae4000 @  0x7fe52ae35680 0x7fe52ae56824 0x564910bb2447 0x564910bba4b5 0x564910bb29c8 0x564910bb2b37 0x564910bb3ee4 0x564910984ca1 0x564910b5c423 0x5649109752a7 0x56491097a53a 0x7fe52a988d84 0x7fe52ab0d609 0x7fe52a676103
2021-05-14T18:10:04.388-0700 7fe52a46cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new b9b86802-f044-401b-aeea-f9005e15e5d9 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x564927a66000 @  0x7f5be369c680 0x7f5be36bd824 0x56491c4d4447 0x56491c4dc4b5 0x56491c4d49c8 0x56491c4d4b37 0x56491c4d5ee4 0x56491c2a6ca1 0x56491c47e423 0x56491c2972a7 0x56491c29c53a 0x7f5be31efd84 0x7f5be3374609 0x7f5be2edd103
2021-05-14T18:10:05.144-0700 7f5be2cd3f00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBsH59gciNdLRAAYWWly6acMQrHp92Rx1Ja5g== --osd-uuid b9b86802-f044-401b-aeea-f9005e15e5d9 
2021-05-14T18:10:05.532-0700 7f5be2cd3f00 -1 osd.1 0 log_to_monitors {default=true}
2021-05-14T18:10:05.548-0700 7f2330801f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:10:05.568-0700 7f2330801f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:10:05.568-0700 7f2330801f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5555ee1f0000 @  0x7f23311ca680 0x7f23311eb824 0x5555e399a447 0x5555e39a24b5 0x5555e399a9c8 0x5555e399ab37 0x5555e399bee4 0x5555e376cca1 0x5555e3944423 0x5555e375d2a7 0x5555e376253a 0x7f2330d1dd84 0x7f2330ea2609 0x7f2330a0b103
2021-05-14T18:10:05.952-0700 7f2330801f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55dadb446000 @  0x7fc2ef054680 0x7fc2ef075824 0x55dacf7df447 0x55dacf7e74b5 0x55dacf7df9c8 0x55dacf7dfb37 0x55dacf7e0ee4 0x55dacf5b1ca1 0x55dacf789423 0x55dacf5a22a7 0x55dacf5a753a 0x7fc2eeba7d84 0x7fc2eed2c609 0x7fc2ee895103
2021-05-14T18:10:06.732-0700 7fc2ee68bf00 -1 Falling back to public interface
2021-05-14T18:10:07.080-0700 7fc2ee68bf00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:10:10,904554261-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:10:10,924751823-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:10:11,005482827-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:11,011899884-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:12.925+0000 ffff776831e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:13.749+0000 ffff776831e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:10:15,163062144-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:15,169105576-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:16.806+0000 ffff918541e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:17.666+0000 ffff918541e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:10:19,058420377-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:19,065336674-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:20.654+0000 ffff87e411e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:21.478+0000 ffff87e411e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:10:22,820899209-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:22,827414127-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:24.459+0000 ffff9f4ca1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:25.307+0000 ffff9f4ca1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:28.456+0000 ffffa47db1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:29.300+0000 ffffa47db1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:10:30,745942534-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:30,752508340-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:32.364+0000 ffffa78a91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:33.229+0000 ffffa78a91e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:10:35,078802360-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:35,085017092-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:36.893+0000 ffffa8c681e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:37.721+0000 ffffa8c681e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:10:40,128908574-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:40,135278507-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:41.738+0000 ffffa065d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:42.586+0000 ffffa065d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:10:44,762171221-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:44,768591037-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:46.603+0000 ffff79fcd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:47.435+0000 ffff78d6b1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:10:49,212492907-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:49,218751430-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:50.820+0000 ffff9f98e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:51.664+0000 ffff9f98e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:10:53,506119955-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:53,512389535-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:55.128+0000 ffff9fd2f1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:10:55.956+0000 ffff9fd2f1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:10:57,794106782-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:10:57,800601896-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:10:59.493+0000 ffff9a1351e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:11:00.325+0000 ffff9a1351e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:11:01,655440308-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:11:01,661895740-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:11:03.498+0000 ffff797cd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:11:04.306+0000 ffff797cd1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:11:05,545937683-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:11:29,632335504-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:11:38,635007067-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:11:47,729329265-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:11:57,073924468-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:06,053630812-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   239 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:06,069869532-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:15,144773277-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:15,160518547-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:24,119827245-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:24,135445999-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:33,275923856-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:33,292034619-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:42,419328404-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:42,434966150-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:42,447220244-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:12:42,454565748-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:12:42,471125792-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=19458
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T18:12:42,485057895-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T18:12:42,524984610-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:12:42,531445217-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4194304', '-O', '4194304', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:12:44.095+0000 ffff8129b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:12:44.903+0000 ffff8129b010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:12:44.903+0000 ffff8129b010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:12:44.928215+0000 Maintaining 256 concurrent writes of 4194304 bytes to objects of size 4194304 for up to 20 seconds or 0 objects
2021-05-15T01:12:44.928309+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:12:45.876237+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:12:45.876237+0000     0       0         0         0         0         0           -           0
2021-05-15T01:12:46.876454+0000     1     163       163         0         0         0           -           0
2021-05-15T01:12:47.876758+0000     2     255       329        74   147.972       148     1.56315     1.57086
2021-05-15T01:12:48.877154+0000     3     255       493       238   317.251       656     1.55366     1.55302
2021-05-15T01:12:49.877401+0000     4     255       655       400   399.898       648     1.58783      1.5614
2021-05-15T01:12:50.877773+0000     5     255       820       565   451.874       660     1.55403     1.56711
2021-05-15T01:12:51.878189+0000     6     255       983       728   485.187       652     1.54872     1.56382
2021-05-15T01:12:52.878439+0000     7     255      1149       894   510.707       664     1.55677     1.56408
2021-05-15T01:12:53.878713+0000     8     255      1311      1056   527.846       648     1.55962     1.56284
2021-05-15T01:12:54.878954+0000     9     255      1343      1088   483.417       128     2.31396     1.57151
2021-05-15T01:12:55.879167+0000    10     255      1378      1123   449.075       140     3.13814     1.61053
2021-05-15T01:12:56.879358+0000    11     255      1426      1171   425.703       192     3.75842     1.68647
2021-05-15T01:12:57.879588+0000    12     255      1527      1272   423.887       404     4.24352     1.88269
2021-05-15T01:12:58.879975+0000    13     255      1677      1422   437.417       600     2.22603     2.04379
2021-05-15T01:12:59.880192+0000    14     255      1817      1562   446.164       560     1.74385     2.02435
2021-05-15T01:13:00.880438+0000    15     255      1976      1721   458.809       636     1.74176     1.99679
2021-05-15T01:13:01.880651+0000    16     255      2116      1861   465.126       560     1.74742     1.97555
2021-05-15T01:13:02.880877+0000    17     255      2287      2032   477.991       684     1.50693     1.94987
2021-05-15T01:13:03.881147+0000    18     255      2451      2196   487.871       656     1.54087     1.91902
2021-05-15T01:13:04.881461+0000    19     255      2618      2363   497.341       668      1.5199     1.89241
2021-05-15T01:13:05.881738+0000 min lat: 0.0415664 max lat: 4.30537 avg lat: 1.77026
2021-05-15T01:13:05.881738+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:13:05.881738+0000    20       5      2786      2781   556.051      1672   0.0472522     1.77026
2021-05-15T01:13:06.882032+0000 Total time run:         20.0267
Total writes made:      2786
Write size:             4194304
Object size:            4194304
Bandwidth (MB/sec):     556.457
Stddev Bandwidth:       350.772
Max bandwidth (MB/sec): 1672
Min bandwidth (MB/sec): 0
Average IOPS:           139
Stddev IOPS:            87.693
Max IOPS:               418
Min IOPS:               0
Average Latency(s):     1.76717
Stddev Latency(s):      0.765995
Max latency(s):         4.30537
Min latency(s):         0.0303956

[1;32mlocalhost.localdomain	[2021-05-14T18:13:07,671211543-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 19458


[1;33mlocalhost.localdomain	[2021-05-14T18:13:07,679170622-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:32,034258633-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.79k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:32,050687584-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:41,201330603-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.79k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:41,217487362-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:50,352915327-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.79k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:50,368906397-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:59,478934570-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.79k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:13:59,495323628-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:14:08,654741266-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 2.79k objects, 11 GiB
    usage:   22 GiB used, 278 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:14:08,673453773-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:14:08,688195248-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:14:08,696518004-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:14:08,715785517-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=23079
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T18:14:08,731739064-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T18:14:08,776902439-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:14:08,783708884-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5041b2f3-b635-4723-8a3f-4d045cae2990', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5041b2f3-b635-4723-8a3f-4d045cae2990 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.9oPdyU:/tmp/ceph-asok.9oPdyU -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:14:10.354+0000 ffff7fccb010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:14:11.182+0000 ffff7fccb010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:14:11.182+0000 ffff7fccb010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:14:11.212496+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:14:11.212496+0000     0       0         0         0         0         0           -           0
2021-05-15T01:14:12.216216+0000     1     255       346        91   362.594       364     0.81995    0.736996
2021-05-15T01:14:13.220770+0000     2     256       583       327   651.254       944     1.08833    0.920364
2021-05-15T01:14:14.221086+0000     3     255       820       565   751.143       952     1.08184    0.988967
2021-05-15T01:14:15.221406+0000     4     255      1054       799   797.193       936     1.08952     1.01662
2021-05-15T01:14:16.223134+0000     5     255      1279      1024   817.435       900     1.12819      1.0366
2021-05-15T01:14:17.223468+0000     6     255      1515      1260   838.445       944     1.08489     1.05102
2021-05-15T01:14:18.225362+0000     7     255      1749      1494   852.129       936     1.08998     1.05664
2021-05-15T01:14:19.225660+0000     8     255      1980      1725   861.066       924     1.10135     1.06206
2021-05-15T01:14:20.226872+0000     9     255      2202      1947   863.938       888     1.15494     1.06976
2021-05-15T01:14:21.227133+0000    10     255      2424      2169   866.318       888     1.14611     1.07732
2021-05-15T01:14:22.227461+0000    11     255      2643      2388   867.171       876     1.17137     1.08455
2021-05-15T01:14:23.232939+0000    12      54      2786      2732   909.106      1376    0.605772     1.07675
2021-05-15T01:14:24.233202+0000 Total time run:       12.0957
Total reads made:     2786
Read size:            4194304
Object size:          4194304
Bandwidth (MB/sec):   921.316
Average IOPS:         230
Stddev IOPS:          54.5183
Max IOPS:             344
Min IOPS:             91
Average Latency(s):   1.06574
Max latency(s):       1.20219
Min latency(s):       0.411349

[1;32mlocalhost.localdomain	[2021-05-14T18:14:25,205664194-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 23079


[1;7;39;49m[2021-05-14T18:14:25,210840698-07:00][RUNNING][ROUND 5/2/20] object_size=4MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:14:25,218211165-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:14:25,234527280-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40137\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1808445\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5735e9b4-0ff8-4018-9549-fd12f13abba2\n'
10.10.1.2: b'setting min_mon_release = octopus\nepoch 0\nfsid 5735e9b4-0ff8-4018-9549-fd12f13abba2\nlast_changed 2021-05-14T18:14:57.513769-0700\ncreated 2021-05-14T18:14:57.513769-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40137/0,v1:10.10.1.2:40138/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1808445 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 2750f24e-ac1f-4f2d-98e4-88e55a1c60ca\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 e0a247c2-62bf-4568-bae9-9fbdb955fc1d\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 787f58b6-87e9-4d0b-ae4e-26bd7228cd41\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42137\n  w/ user/pass: admin / 21fc47bc-3b34-4c0e-9da0-0145cfe516ee\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\nCEPH_DEV=1\n'
[1] 18:15:19 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40137
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1808445
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5735e9b4-0ff8-4018-9549-fd12f13abba2
setting min_mon_release = octopus
epoch 0
fsid 5735e9b4-0ff8-4018-9549-fd12f13abba2
last_changed 2021-05-14T18:14:57.513769-0700
created 2021-05-14T18:14:57.513769-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40137/0,v1:10.10.1.2:40138/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1808445 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 2750f24e-ac1f-4f2d-98e4-88e55a1c60ca
0
start osd.0
add osd1 e0a247c2-62bf-4568-bae9-9fbdb955fc1d
1
start osd.1
add osd2 787f58b6-87e9-4d0b-ae4e-26bd7228cd41
2
start osd.2


restful urls: https://10.10.1.2:42137
  w/ user/pass: admin / 21fc47bc-3b34-4c0e-9da0-0145cfe516ee


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:14:27.351-0700 7f4cc41711c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:14:27.351-0700 7f4cc41711c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:14:27.371-0700 7fb6628af1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:14:27.371-0700 7fb6628af1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40137,v1:10.10.1.2:40138] --print /tmp/ceph_monmap.1808445 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1808445 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1808445 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42137 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x561dc937c000 @  0x7fc960cda680 0x7fc960cfb824 0x7fc961496187 0x7fc96149e355 0x7fc961496708 0x7fc961496877 0x7fc961497c24 0x7fc9614afec1 0x7fc9614225f3 0x7fc961483e97 0x7fc96148bb1a 0x7fc960b8ed84 0x7fc960caa609 0x7fc96087e103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.6oLTCqA45g 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 2750f24e-ac1f-4f2d-98e4-88e55a1c60ca -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCeIJ9gi9OdBhAAZ1hOfHBN0Dvtv6ZRRy/6nw== --osd-uuid 2750f24e-ac1f-4f2d-98e4-88e55a1c60ca 
2021-05-14T18:15:10.887-0700 7eff31cf0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:15:10.907-0700 7eff31cf0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:15:10.907-0700 7eff31cf0f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x563709852000 @  0x7eff326b9680 0x7eff326da824 0x5636ff571447 0x5636ff5794b5 0x5636ff5719c8 0x5636ff571b37 0x5636ff572ee4 0x5636ff343ca1 0x5636ff51b423 0x5636ff3342a7 0x5636ff33953a 0x7eff3220cd84 0x7eff32391609 0x7eff31efa103
2021-05-14T18:15:11.327-0700 7eff31cf0f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new e0a247c2-62bf-4568-bae9-9fbdb955fc1d -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55cb63356000 @  0x7fbfcebe7680 0x7fbfcec08824 0x55cb57967447 0x55cb5796f4b5 0x55cb579679c8 0x55cb57967b37 0x55cb57968ee4 0x55cb57739ca1 0x55cb57911423 0x55cb5772a2a7 0x55cb5772f53a 0x7fbfce73ad84 0x7fbfce8bf609 0x7fbfce428103
2021-05-14T18:15:12.099-0700 7fbfce21ef00 -1 Falling back to public interface
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCfIJ9gYv+GKRAA/+PehesWu/qlZT6JV8wbYA== --osd-uuid e0a247c2-62bf-4568-bae9-9fbdb955fc1d 
2021-05-14T18:15:12.483-0700 7fd1bb9a5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:15:12.495-0700 7fbfce21ef00 -1 osd.0 0 log_to_monitors {default=true}
2021-05-14T18:15:12.503-0700 7fd1bb9a5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:15:12.503-0700 7fd1bb9a5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5646e1b6c000 @  0x7fd1bc36e680 0x7fd1bc38f824 0x5646d641f447 0x5646d64274b5 0x5646d641f9c8 0x5646d641fb37 0x5646d6420ee4 0x5646d61f1ca1 0x5646d63c9423 0x5646d61e22a7 0x5646d61e753a 0x7fd1bbec1d84 0x7fd1bc046609 0x7fd1bbbaf103
2021-05-14T18:15:12.915-0700 7fd1bb9a5f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 787f58b6-87e9-4d0b-ae4e-26bd7228cd41 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x556c8ac88000 @  0x7f55cbf48680 0x7f55cbf69824 0x556c80a36447 0x556c80a3e4b5 0x556c80a369c8 0x556c80a36b37 0x556c80a37ee4 0x556c80808ca1 0x556c809e0423 0x556c807f92a7 0x556c807fe53a 0x7f55cba9bd84 0x7f55cbc20609 0x7f55cb789103
2021-05-14T18:15:13.659-0700 7f55cb57ff00 -1 Falling back to public interface
2021-05-14T18:15:14.007-0700 7f55cb57ff00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQChIJ9gkMrnEBAA9k8yM/XZQGS89g1MwGzIlA== --osd-uuid 787f58b6-87e9-4d0b-ae4e-26bd7228cd41 
2021-05-14T18:15:14.087-0700 7f9617362f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:15:14.107-0700 7f9617362f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:15:14.107-0700 7f9617362f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55892627e000 @  0x7f9617d2b680 0x7f9617d4c824 0x55891c15a447 0x55891c1624b5 0x55891c15a9c8 0x55891c15ab37 0x55891c15bee4 0x55891bf2cca1 0x55891c104423 0x55891bf1d2a7 0x55891bf2253a 0x7f961787ed84 0x7f9617a03609 0x7f961756c103
2021-05-14T18:15:14.503-0700 7f9617362f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x560b79fa0000 @  0x7f7e771ac680 0x7f7e771cd824 0x560b6e5b9447 0x560b6e5c14b5 0x560b6e5b99c8 0x560b6e5b9b37 0x560b6e5baee4 0x560b6e38bca1 0x560b6e563423 0x560b6e37c2a7 0x560b6e38153a 0x7f7e76cffd84 0x7f7e76e84609 0x7f7e769ed103
2021-05-14T18:15:15.203-0700 7f7e767e3f00 -1 Falling back to public interface
2021-05-14T18:15:15.543-0700 7f7e767e3f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:15:19,389686447-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:15:19,409650708-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:15:19,489931226-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:19,496283198-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:21.158+0000 ffff96b451e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:21.990+0000 ffff96b451e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:15:23,453704015-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:23,461985123-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:25.055+0000 ffff7b4ee1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:25.875+0000 ffff7b4ee1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:15:27,285991957-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:27,292486723-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:29.035+0000 ffffb3aff1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:29.880+0000 ffffb3aff1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:15:31,259207161-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:31,265385192-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:32.880+0000 ffffa64901e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:33.764+0000 ffffa64901e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:36.793+0000 ffff8f7cd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:37.633+0000 ffff8f7cd1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:15:39,050058450-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:39,056486904-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:40.829+0000 ffff8b9b51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:41.690+0000 ffff8b9b51e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:15:43,765445551-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:43,771835223-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:45.366+0000 ffff8391e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:46.214+0000 ffff8391e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:15:48,152189362-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:48,158857813-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:49.775+0000 ffff920801e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:50.611+0000 ffff920801e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:15:52,474074472-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:52,480155736-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:54.104+0000 ffff8e3661e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:54.952+0000 ffff8e3661e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:15:56,724732497-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:15:56,731203979-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:15:58.460+0000 ffffa1edf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:15:59.289+0000 ffffa1edf1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:16:01,461135488-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:16:01,467374234-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:16:03.097+0000 ffff874ab1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:16:03.933+0000 ffff862491e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:16:05,699092132-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:16:05,705354988-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:16:07.366+0000 ffff7ff921e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:16:08.194+0000 ffff7ff921e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 1 pgp_num 1 pg_num_target 64 pgp_num_target 64 autoscale_mode on last_change 21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:16:09,540114208-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:16:09,546715416-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:16:11.355+0000 ffff8bd2b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:16:12.199+0000 ffff8bd2b1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  187 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.06   90      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.95   89      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   62 KiB   0 B   0 B   0 B  100 GiB     0  0.99   80      up          osd.2  
                       TOTAL  300 GiB  188 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.95/1.06  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:16:13,504194750-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:16:37,964299140-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:16:47,027334070-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:16:56,110716507-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:05,351877291-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   231 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:14,509343844-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   245 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:14,525714129-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:23,575629075-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:23,591809263-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:32,557517664-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:32,573715059-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:41,878800526-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:41,900563786-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:51,257874369-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   252 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:51,274395040-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:51,287430312-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:17:51,294967906-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:17:51,312307447-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=33692
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T18:17:51,326511960-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_write.log.5
[1;30mlocalhost.localdomain	[2021-05-14T18:17:51,366580942-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:17:51,372801565-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '4194304', '-O', '4194304', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- rados bench 20 write --pool bench_rados -b 4194304 -O 4194304 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:17:53.064+0000 ffff9ecbe010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:17:53.888+0000 ffff9ecbe010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:17:53.888+0000 ffff9ecbe010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:17:53.911959+0000 Maintaining 256 concurrent writes of 4194304 bytes to objects of size 4194304 for up to 20 seconds or 0 objects
2021-05-15T01:17:53.912052+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:17:54.845598+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:17:54.845598+0000     0       0         0         0         0         0           -           0
2021-05-15T01:17:55.845829+0000     1     159       159         0         0         0           -           0
2021-05-15T01:17:56.846116+0000     2     255       326        71   141.974       142     1.56751     1.58632
2021-05-15T01:17:57.846566+0000     3     255       484       229    305.25       632     1.58863     1.58855
2021-05-15T01:17:58.846902+0000     4     255       628       373   372.893       576     1.68041     1.59847
2021-05-15T01:17:59.847274+0000     5     255       795       540   431.868       668     1.65288     1.62072
2021-05-15T01:18:00.847724+0000     6     255       963       708   471.845       672     1.53124     1.61331
2021-05-15T01:18:01.848013+0000     7     255      1122       867   495.268       636     1.56075     1.60226
2021-05-15T01:18:02.848246+0000     8     255      1293      1038   518.838       684     1.51578     1.59188
2021-05-15T01:18:03.848453+0000     9     255      1416      1161   515.845       492     1.76775     1.58858
2021-05-15T01:18:04.848677+0000    10     255      1557      1302   520.648       564     1.95067     1.62004
2021-05-15T01:18:05.848937+0000    11     255      1723      1468   533.664       664     1.63268      1.6439
2021-05-15T01:18:06.849230+0000    12     255      1809      1554    517.85       344     2.02226     1.64942
2021-05-15T01:18:07.849461+0000    13     255      1903      1648   506.932       376      2.4758     1.68973
2021-05-15T01:18:08.849729+0000    14     255      2037      1782   508.998       536     2.42758     1.75616
2021-05-15T01:18:09.850078+0000    15     255      2171      1916   510.786       536     1.87898     1.77074
2021-05-15T01:18:10.850364+0000    16     255      2331      2076    518.85       640     1.76998     1.77191
2021-05-15T01:18:11.850563+0000    17     255      2500      2245   528.086       676     1.52598     1.76265
2021-05-15T01:18:12.850765+0000    18     255      2671      2416   536.739       684     1.48269      1.7453
2021-05-15T01:18:13.851082+0000    19     255      2835      2580   543.006       656     1.54403     1.73128
2021-05-15T01:18:14.851360+0000 min lat: 0.0499028 max lat: 2.64774 avg lat: 1.64649
2021-05-15T01:18:14.851360+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:18:14.851360+0000    20       8      2996      2988   597.432      1632   0.0499028     1.64649
2021-05-15T01:18:15.851749+0000 Total time run:         20.04
Total writes made:      2996
Write size:             4194304
Object size:            4194304
Bandwidth (MB/sec):     598.003
Stddev Bandwidth:       308.756
Max bandwidth (MB/sec): 1632
Min bandwidth (MB/sec): 0
Average IOPS:           149
Stddev IOPS:            77.2272
Max IOPS:               408
Min IOPS:               0
Average Latency(s):     1.64223
Stddev Latency(s):      0.393031
Max latency(s):         2.64774
Min latency(s):         0.0333385

[1;32mlocalhost.localdomain	[2021-05-14T18:18:16,634984695-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 33692


[1;33mlocalhost.localdomain	[2021-05-14T18:18:16,643105123-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:18:40,637207422-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.00k objects, 12 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:18:40,653791523-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:18:49,898478164-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.00k objects, 12 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:18:49,917387544-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:18:59,019194002-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.00k objects, 12 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:18:59,035686901-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:19:08,153834867-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.00k objects, 12 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:19:08,170053999-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:19:19,551854636-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 3.00k objects, 12 GiB
    usage:   23 GiB used, 277 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:19:19,568220929-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:19:19,581067033-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:19:19,588679413-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:19:19,605728263-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=37303
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_4MB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T18:19:19,620258391-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_4MB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T18:19:19,660139193-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:19:19,666483991-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'ceaccf29-ba19-46a9-ad84-1ee98d23ce03', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid ceaccf29-ba19-46a9-ad84-1ee98d23ce03 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6iJ8oh:/tmp/ceph-asok.6iJ8oh -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:19:21.131+0000 ffff81c88010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:19:21.963+0000 ffff81c88010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:19:21.963+0000 ffff81c88010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:19:21.992545+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:19:21.992545+0000     0       0         0         0         0         0           -           0
2021-05-15T01:19:22.992803+0000     1     255       346        91   363.841       364    0.804549    0.746823
2021-05-15T01:19:23.993073+0000     2     255       578       323   645.772       928     1.09174    0.909907
2021-05-15T01:19:24.993372+0000     3     255       811       556   741.085       932     1.08835    0.985773
2021-05-15T01:19:25.993647+0000     4     255      1034       779   778.751       892      1.1472     1.02524
2021-05-15T01:19:26.994032+0000     5     255      1264      1009   806.931       920     1.10953     1.04957
2021-05-15T01:19:27.994526+0000     6     255      1497      1242   827.702       932     1.10531     1.06068
2021-05-15T01:19:28.994771+0000     7     255      1727      1472   840.854       920     1.11322     1.06735
2021-05-15T01:19:29.995034+0000     8     255      1956      1701   850.217       916     1.10694     1.07258
2021-05-15T01:19:30.995280+0000     9     255      2174      1919   852.613       872     1.16696     1.08029
2021-05-15T01:19:31.996292+0000    10     255      2404      2149   859.263       920     1.11878     1.08848
2021-05-15T01:19:32.996944+0000    11     255      2635      2380   865.095       924     1.10392      1.0903
2021-05-15T01:19:33.999434+0000    12     255      2863      2608   868.822       912      1.1215     1.09205
2021-05-15T01:19:34.999885+0000    13      11      2996      2985   917.931      1508    0.459115     1.07152
2021-05-15T01:19:36.000141+0000 Total time run:       13.023
Total reads made:     2996
Read size:            4194304
Object size:          4194304
Bandwidth (MB/sec):   920.22
Average IOPS:         230
Stddev IOPS:          58.5584
Max IOPS:             377
Min IOPS:             91
Average Latency(s):   1.06921
Max latency(s):       1.17999
Min latency(s):       0.428904

[1;32mlocalhost.localdomain	[2021-05-14T18:19:36,791744043-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 37303


[1;7;39;49m[2021-05-14T18:19:36,800111158-07:00][RUNNING][ROUND 1/3/20] object_size=16MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:19:36,808387358-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:19:36,825086527-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40789\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1811510\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5736c24d-101e-49d7-8316-82df734fe4b8\nsetting min_mon_release = octopus\nepoch 0\nfsid 5736c24d-101e-49d7-8316-82df734fe4b8\nlast_changed 2021-05-14T18:20:09.981671-0700\ncreated 2021-05-14T18:20:09.981671-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40789/0,v1:10.10.1.2:40790/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1811510 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 c45ec10c-0cdd-4ce1-b79b-d3b590baeacd\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 093f53c2-8a11-4a56-a503-8914321fb8e6\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 2c492268-1029-4564-9461-69b57fd163b2\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n\nrestful urls: https://10.10.1.2:42789\n  w/ user/pass: admin / 05b76426-0a31-40d3-ad5a-3585f9597f4b\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 18:20:32 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40789
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1811510
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5736c24d-101e-49d7-8316-82df734fe4b8
setting min_mon_release = octopus
epoch 0
fsid 5736c24d-101e-49d7-8316-82df734fe4b8
last_changed 2021-05-14T18:20:09.981671-0700
created 2021-05-14T18:20:09.981671-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40789/0,v1:10.10.1.2:40790/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1811510 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 c45ec10c-0cdd-4ce1-b79b-d3b590baeacd
0
start osd.0
add osd1 093f53c2-8a11-4a56-a503-8914321fb8e6
1
start osd.1
add osd2 2c492268-1029-4564-9461-69b57fd163b2
2
start osd.2


restful urls: https://10.10.1.2:42789
  w/ user/pass: admin / 05b76426-0a31-40d3-ad5a-3585f9597f4b


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:19:38.914-0700 7f6bae0c21c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:19:38.914-0700 7f6bae0c21c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:19:38.938-0700 7f34ea6e41c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:19:38.938-0700 7f34ea6e41c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40789,v1:10.10.1.2:40790] --print /tmp/ceph_monmap.1811510 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1811510 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1811510 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42789 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5632cdf26000 @  0x7f1b87c1a680 0x7f1b87c3b824 0x7f1b883d6187 0x7f1b883de355 0x7f1b883d6708 0x7f1b883d6877 0x7f1b883d7c24 0x7f1b883efec1 0x7f1b883625f3 0x7f1b883c3e97 0x7f1b883cbb1a 0x7f1b87aced84 0x7f1b87bea609 0x7f1b877be103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.Cf2llDdY49 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new c45ec10c-0cdd-4ce1-b79b-d3b590baeacd -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDWIZ9gmzgOKhAAbk8TQFTnb1Tzq7nziIREZg== --osd-uuid c45ec10c-0cdd-4ce1-b79b-d3b590baeacd 
2021-05-14T18:20:23.535-0700 7fc15b918f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:20:23.555-0700 7fc15b918f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:20:23.555-0700 7fc15b918f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5640a108c000 @  0x7fc15c2e1680 0x7fc15c302824 0x5640951b4447 0x5640951bc4b5 0x5640951b49c8 0x5640951b4b37 0x5640951b5ee4 0x564094f86ca1 0x56409515e423 0x564094f772a7 0x564094f7c53a 0x7fc15be34d84 0x7fc15bfb9609 0x7fc15bb22103
2021-05-14T18:20:23.979-0700 7fc15b918f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 093f53c2-8a11-4a56-a503-8914321fb8e6 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x562178056000 @  0x7fe48d1ca680 0x7fe48d1eb824 0x56216d656447 0x56216d65e4b5 0x56216d6569c8 0x56216d656b37 0x56216d657ee4 0x56216d428ca1 0x56216d600423 0x56216d4192a7 0x56216d41e53a 0x7fe48cd1dd84 0x7fe48cea2609 0x7fe48ca0b103
2021-05-14T18:20:24.835-0700 7fe48c801f00 -1 Falling back to public interface
2021-05-14T18:20:25.195-0700 7fe48c801f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDYIZ9gvCY1GBAAbd9fDxiGxi1GzHGvSj+0Uw== --osd-uuid 093f53c2-8a11-4a56-a503-8914321fb8e6 
2021-05-14T18:20:25.235-0700 7fc027a52f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:20:25.255-0700 7fc027a52f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:20:25.255-0700 7fc027a52f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x559b0fb88000 @  0x7fc02841b680 0x7fc02843c824 0x559b056ea447 0x559b056f24b5 0x559b056ea9c8 0x559b056eab37 0x559b056ebee4 0x559b054bcca1 0x559b05694423 0x559b054ad2a7 0x559b054b253a 0x7fc027f6ed84 0x7fc0280f3609 0x7fc027c5c103
2021-05-14T18:20:25.635-0700 7fc027a52f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 2c492268-1029-4564-9461-69b57fd163b2 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x555d66b50000 @  0x7fd556bb8680 0x7fd556bd9824 0x555d5befa447 0x555d5bf024b5 0x555d5befa9c8 0x555d5befab37 0x555d5befbee4 0x555d5bcccca1 0x555d5bea4423 0x555d5bcbd2a7 0x555d5bcc253a 0x7fd55670bd84 0x7fd556890609 0x7fd5563f9103
2021-05-14T18:20:26.431-0700 7fd5561eff00 -1 Falling back to public interface
2021-05-14T18:20:26.799-0700 7fd5561eff00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDaIZ9g16MNAxAAC1zJgtTAZgoLnUua4WDWvQ== --osd-uuid 2c492268-1029-4564-9461-69b57fd163b2 
2021-05-14T18:20:26.871-0700 7fb545b5df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:20:26.891-0700 7fb545b5df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:20:26.891-0700 7fb545b5df00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55bbf92b4000 @  0x7fb546526680 0x7fb546547824 0x55bbee911447 0x55bbee9194b5 0x55bbee9119c8 0x55bbee911b37 0x55bbee912ee4 0x55bbee6e3ca1 0x55bbee8bb423 0x55bbee6d42a7 0x55bbee6d953a 0x7fb546079d84 0x7fb5461fe609 0x7fb545d67103
2021-05-14T18:20:27.287-0700 7fb545b5df00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x561d53eec000 @  0x7f00a2d29680 0x7f00a2d4a824 0x561d48781447 0x561d487894b5 0x561d487819c8 0x561d48781b37 0x561d48782ee4 0x561d48553ca1 0x561d4872b423 0x561d485442a7 0x561d4854953a 0x7f00a287cd84 0x7f00a2a01609 0x7f00a256a103
2021-05-14T18:20:28.027-0700 7f00a2360f00 -1 Falling back to public interface
2021-05-14T18:20:28.371-0700 7f00a2360f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:20:32,472380596-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:20:32,493373021-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:20:32,578568522-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:20:32,584802046-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:34.364+0000 ffff758521e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:20:35.212+0000 ffff758521e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:20:36,908818418-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:20:36,915205733-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:38.713+0000 ffff7d29a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:20:39.541+0000 ffff7d29a1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:20:40,887842020-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:20:40,893969821-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:42.741+0000 ffff9c45d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:20:43.581+0000 ffff9c45d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:20:45,000874545-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:20:45,008128544-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:46.634+0000 ffff927741e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:20:47.450+0000 ffff927741e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:50.559+0000 ffff83e3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:20:51.391+0000 ffff83e3d1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:20:52,824540781-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:20:52,831033790-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:54.483+0000 ffff819311e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:20:55.327+0000 ffff819311e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:20:57,742336781-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:20:57,748555872-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:20:59.628+0000 ffff8e9471e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:00.456+0000 ffff8d6e51e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:21:02,947863350-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:21:02,954240524-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:21:04.597+0000 ffff8634e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:05.445+0000 ffff8634e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:21:07,811061923-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:21:07,817351151-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:21:09.662+0000 ffff833441e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:10.486+0000 ffff833441e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:21:12,822060735-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:21:12,828669113-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:21:14.575+0000 ffff7d0df1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:15.423+0000 ffff7d0df1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:21:17,150712550-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:21:17,156929286-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:21:18.803+0000 ffff9a2381e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:19.640+0000 ffff9a2381e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:21:21,558037977-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:21:21,564513432-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:21:23.208+0000 ffff97e9b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:24.020+0000 ffff97e9b1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:21:25,328800318-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:21:25,335160959-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:21:27.029+0000 ffff819aa1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:21:27.841+0000 ffff819aa1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:21:29,242048515-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:21:53,576157173-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:02,729813908-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:11,734062107-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:20,946752657-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:30,049129244-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:30,065729575-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:39,347441676-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:39,363952516-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:48,382166183-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:48,398608311-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:57,599683486-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:22:57,616228847-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:23:06,770828633-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:23:06,792024941-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:23:06,806963047-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:23:06,815803417-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:23:06,836762744-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=48104
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T18:23:06,852276528-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T18:23:06,893378412-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:23:06,899899235-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16777216', '-O', '16777216', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:23:08.442+0000 ffff9e335010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:23:09.242+0000 ffff9e335010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:23:09.242+0000 ffff9e335010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:23:09.275323+0000 Maintaining 256 concurrent writes of 16777216 bytes to objects of size 16777216 for up to 20 seconds or 0 objects
2021-05-15T01:23:09.275438+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:23:13.134898+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:23:13.134898+0000     0       0         0         0         0         0           -           0
2021-05-15T01:23:14.135131+0000     1      21        21         0         0         0           -           0
2021-05-15T01:23:15.135352+0000     2      43        43         0         0         0           -           0
2021-05-15T01:23:16.135626+0000     3      65        65         0         0         0           -           0
2021-05-15T01:23:17.135966+0000     4      86        86         0         0         0           -           0
2021-05-15T01:23:18.136211+0000     5     106       106         0         0         0           -           0
2021-05-15T01:23:19.136509+0000     6     127       127         0         0         0           -           0
2021-05-15T01:23:20.136776+0000     7     147       147         0         0         0           -           0
2021-05-15T01:23:21.137042+0000     8     167       167         0         0         0           -           0
2021-05-15T01:23:22.137263+0000     9     188       188         0         0         0           -           0
2021-05-15T01:23:23.137525+0000    10     210       210         0         0         0           -           0
2021-05-15T01:23:24.137736+0000    11     231       231         0         0         0           -           0
2021-05-15T01:23:25.137960+0000    12     252       252         0         0         0           -           0
2021-05-15T01:23:26.138209+0000    13     255       272        17    20.918   20.9231     12.2594     12.2327
2021-05-15T01:23:27.138479+0000    14     255       294        39   44.5606       352     12.2526     12.2503
2021-05-15T01:23:28.138719+0000    15     255       308        53   56.5196       224     12.5393     12.2724
2021-05-15T01:23:29.138910+0000    16     255       313        58   57.9861        80     13.3475       12.34
2021-05-15T01:23:30.139170+0000    17     255       320        65   61.1617       112     14.0062     12.5126
2021-05-15T01:23:31.139399+0000    18     255       339        84   74.6487       304     14.0978     12.8692
2021-05-15T01:23:32.139590+0000    19     255       357       102   85.8743       288     14.1735     13.0996
2021-05-15T01:23:33.139825+0000 min lat: 12.1789 max lat: 14.2741 avg lat: 13.3241
2021-05-15T01:23:33.139825+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:23:33.139825+0000    20     225       379       154   123.171       832     12.6751     13.3241
2021-05-15T01:23:34.140122+0000 Total time run:         20.094
Total writes made:      379
Write size:             16777216
Object size:            16777216
Bandwidth (MB/sec):     301.782
Stddev Bandwidth:       207.262
Max bandwidth (MB/sec): 832
Min bandwidth (MB/sec): 0
Average IOPS:           18
Stddev IOPS:            12.9611
Max IOPS:               52
Min IOPS:               0
Average Latency(s):     9.44058
Stddev Latency(s):      4.39121
Max latency(s):         14.2741
Min latency(s):         0.126245

[1;32mlocalhost.localdomain	[2021-05-14T18:23:35,351455079-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 48104


[1;33mlocalhost.localdomain	[2021-05-14T18:23:35,359462236-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:23:59,308604584-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 380 objects, 5.9 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:23:59,325299445-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:08,403998327-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 380 objects, 5.9 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:08,420861412-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:17,552850164-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 380 objects, 5.9 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:17,571102682-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:26,787208347-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 380 objects, 5.9 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:26,803706614-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:36,138844148-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 380 objects, 5.9 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:36,155802454-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:36,169467455-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:24:36,177450833-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:24:36,195617041-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=51704
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_seq.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T18:24:36,210989110-07:00] INFO: > Run rados bench[0m
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_seq.log.1
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
[1;30mlocalhost.localdomain	[2021-05-14T18:24:36,250281142-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:24:36,256815452-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '9d888551-d8da-48d9-bf25-aae1e525ad77', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 9d888551-d8da-48d9-bf25-aae1e525ad77 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.n3UV1K:/tmp/ceph-asok.n3UV1K -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:24:37.710+0000 ffff86f3f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:24:38.526+0000 ffff86f3f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:24:38.526+0000 ffff86f3f010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:24:38.559328+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:24:38.559328+0000     0       0         0         0         0         0           -           0
2021-05-15T01:24:39.559574+0000     1      93        93         0         0         0           -           0
2021-05-15T01:24:40.559918+0000     2     182       182         0         0         0           -           0
2021-05-15T01:24:41.561534+0000     3     255       262         7   37.3035   37.3333     2.98877     2.94706
2021-05-15T01:24:42.561880+0000     4     255       323        68   271.813       976     3.28251     3.11628
2021-05-15T01:24:43.562138+0000     5     255       376       121   386.967       848     3.68287     3.27765
2021-05-15T01:24:44.567163+0000     6      95       379       284   756.321      2608     2.66477     3.26993
2021-05-15T01:24:45.567413+0000 Total time run:       6.56442
Total reads made:     379
Read size:            16777216
Object size:          16777216
Bandwidth (MB/sec):   923.768
Average IOPS:         57
Stddev IOPS:          63.45
Max IOPS:             163
Min IOPS:             0
Average Latency(s):   2.98317
Max latency(s):       3.72242
Min latency(s):       1.52775

[1;32mlocalhost.localdomain	[2021-05-14T18:24:46,810158011-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 51704


[1;7;39;49m[2021-05-14T18:24:46,815557586-07:00][RUNNING][ROUND 2/3/20] object_size=16MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:24:46,823262906-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:24:46,839861675-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40475\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1814562\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5fbd82d5-e183-416e-ac90-1d3050f7c3a9\nsetting min_mon_release = octopus\nepoch 0\nfsid 5fbd82d5-e183-416e-ac90-1d3050f7c3a9\nlast_changed 2021-05-14T18:25:18.093816-0700\ncreated 2021-05-14T18:25:18.093816-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40475/0,v1:10.10.1.2:40476/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1814562 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 cc02383d-8d68-4bf1-95b9-31c71088b84d\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 4b0d5009-c44a-4a04-9ece-425a1f9d2429\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 74675043-d8fc-4d22-abe0-b49b709b2000\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42475\n'
10.10.1.2: b'  w/ user/pass: admin / 3067d669-b566-48fd-ad64-03113cd2b94f\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 18:25:40 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40475
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1814562
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5fbd82d5-e183-416e-ac90-1d3050f7c3a9
setting min_mon_release = octopus
epoch 0
fsid 5fbd82d5-e183-416e-ac90-1d3050f7c3a9
last_changed 2021-05-14T18:25:18.093816-0700
created 2021-05-14T18:25:18.093816-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40475/0,v1:10.10.1.2:40476/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1814562 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 cc02383d-8d68-4bf1-95b9-31c71088b84d
0
start osd.0
add osd1 4b0d5009-c44a-4a04-9ece-425a1f9d2429
1
start osd.1
add osd2 74675043-d8fc-4d22-abe0-b49b709b2000
2
start osd.2


restful urls: https://10.10.1.2:42475
  w/ user/pass: admin / 3067d669-b566-48fd-ad64-03113cd2b94f


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:24:48.877-0700 7f8a294bc1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:24:48.877-0700 7f8a294bc1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:24:48.893-0700 7f2a04b391c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:24:48.897-0700 7f2a04b391c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40475,v1:10.10.1.2:40476] --print /tmp/ceph_monmap.1814562 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1814562 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1814562 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42475 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x562534428000 @  0x7f723e24d680 0x7f723e26e824 0x7f723ea09187 0x7f723ea11355 0x7f723ea09708 0x7f723ea09877 0x7f723ea0ac24 0x7f723ea22ec1 0x7f723e9955f3 0x7f723e9f6e97 0x7f723e9feb1a 0x7f723e101d84 0x7f723e21d609 0x7f723ddf1103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.DUFCKnyAGN 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new cc02383d-8d68-4bf1-95b9-31c71088b84d -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQALI59glrxABRAAaoi53ZVY4R5eKMYUhpToRg== --osd-uuid cc02383d-8d68-4bf1-95b9-31c71088b84d 
2021-05-14T18:25:31.974-0700 7f03f227cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:25:31.994-0700 7f03f227cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:25:31.994-0700 7f03f227cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5633fff30000 @  0x7f03f2c45680 0x7f03f2c66824 0x5633f4ebd447 0x5633f4ec54b5 0x5633f4ebd9c8 0x5633f4ebdb37 0x5633f4ebeee4 0x5633f4c8fca1 0x5633f4e67423 0x5633f4c802a7 0x5633f4c8553a 0x7f03f2798d84 0x7f03f291d609 0x7f03f2486103
2021-05-14T18:25:32.474-0700 7f03f227cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 4b0d5009-c44a-4a04-9ece-425a1f9d2429 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x564b2774a000 @  0x7ff3bb61f680 0x7ff3bb640824 0x564b1d6ac447 0x564b1d6b44b5 0x564b1d6ac9c8 0x564b1d6acb37 0x564b1d6adee4 0x564b1d47eca1 0x564b1d656423 0x564b1d46f2a7 0x564b1d47453a 0x7ff3bb172d84 0x7ff3bb2f7609 0x7ff3bae60103
2021-05-14T18:25:33.338-0700 7ff3bac56f00 -1 Falling back to public interface
2021-05-14T18:25:33.702-0700 7ff3bac56f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAMI59gmWwMNRAAoW8HoUtsiGXnQgH97HWpkg== --osd-uuid 4b0d5009-c44a-4a04-9ece-425a1f9d2429 
2021-05-14T18:25:33.898-0700 7f6a04155f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:25:33.918-0700 7f6a04155f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:25:33.918-0700 7f6a04155f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5602b2c6a000 @  0x7f6a04b1e680 0x7f6a04b3f824 0x5602a8640447 0x5602a86484b5 0x5602a86409c8 0x5602a8640b37 0x5602a8641ee4 0x5602a8412ca1 0x5602a85ea423 0x5602a84032a7 0x5602a840853a 0x7f6a04671d84 0x7f6a047f6609 0x7f6a0435f103
2021-05-14T18:25:34.346-0700 7f6a04155f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 74675043-d8fc-4d22-abe0-b49b709b2000 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5629b9338000 @  0x7f3653419680 0x7f365343a824 0x5629aebed447 0x5629aebf54b5 0x5629aebed9c8 0x5629aebedb37 0x5629aebeeee4 0x5629ae9bfca1 0x5629aeb97423 0x5629ae9b02a7 0x5629ae9b553a 0x7f3652f6cd84 0x7f36530f1609 0x7f3652c5a103
2021-05-14T18:25:35.142-0700 7f3652a50f00 -1 Falling back to public interface
2021-05-14T18:25:35.522-0700 7f3652a50f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQAOI59g7OG+KxAAavQLhW2GnYdLgSd2o0Niag== --osd-uuid 74675043-d8fc-4d22-abe0-b49b709b2000 
2021-05-14T18:25:35.566-0700 7f66b61faf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:25:35.586-0700 7f66b61faf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:25:35.586-0700 7f66b61faf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55a7e4c4a000 @  0x7f66b6bc3680 0x7f66b6be4824 0x55a7d95ec447 0x55a7d95f44b5 0x55a7d95ec9c8 0x55a7d95ecb37 0x55a7d95edee4 0x55a7d93beca1 0x55a7d9596423 0x55a7d93af2a7 0x55a7d93b453a 0x7f66b6716d84 0x7f66b689b609 0x7f66b6404103
2021-05-14T18:25:36.010-0700 7f66b61faf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d90d1e8000 @  0x7f0371d4f680 0x7f0371d70824 0x55d902809447 0x55d9028114b5 0x55d9028099c8 0x55d902809b37 0x55d90280aee4 0x55d9025dbca1 0x55d9027b3423 0x55d9025cc2a7 0x55d9025d153a 0x7f03718a2d84 0x7f0371a27609 0x7f0371590103
2021-05-14T18:25:36.786-0700 7f0371386f00 -1 Falling back to public interface
2021-05-14T18:25:37.134-0700 7f0371386f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:25:40,864710632-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:25:40,885208808-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:25:40,968053076-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:25:40,974461439-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:25:43.029+0000 ffff87aa31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:25:43.861+0000 ffff868411e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:25:45,254998447-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:25:45,262160554-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:25:46.937+0000 ffffa6e8d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:25:47.786+0000 ffffa6e8d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:25:49,221764226-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:25:49,228109923-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:25:50.882+0000 ffff8bb5d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:25:51.710+0000 ffff8bb5d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:25:53,144699104-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:25:53,151022553-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:25:54.799+0000 ffffadbab1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:25:55.667+0000 ffffadbab1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:25:58.787+0000 ffff99c561e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:25:59.616+0000 ffff99c561e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:26:01,482529804-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:01,488866214-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:03.232+0000 ffff830441e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:04.088+0000 ffff81de21e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:26:06,139440137-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:06,145898458-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:07.785+0000 ffff93d3b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:08.613+0000 ffff93d3b1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:26:10,884921659-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:10,891258639-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:12.546+0000 ffff8058e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:13.402+0000 ffff8058e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:26:15,147366237-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:15,153646627-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:16.863+0000 ffff939f51e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:17.735+0000 ffff939f51e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:26:19,741046233-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:19,747252256-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:21.459+0000 ffff7af5e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:22.299+0000 ffff7af5e1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:26:24,141744594-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:24,147862192-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:25.760+0000 ffff8d8ab1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:26.628+0000 ffff87fff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:26:28,640376123-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:28,646658584-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:30.473+0000 ffffa0cb11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:31.301+0000 ffff9b59e1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:26:32,620825273-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:26:32,627123876-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:26:34.325+0000 ffff834191e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:26:35.170+0000 ffff821b71e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  191 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.04  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   59 KiB   0 B   0 B   0 B  100 GiB     0  0.93  143      up          osd.2  
                       TOTAL  300 GiB  193 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.93/1.04  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:26:36,471282639-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:00,698634533-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:09,890667063-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:19,131188304-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:28,275232056-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:37,434510469-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   239 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:37,450945424-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:46,689591993-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:46,706310841-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:56,072102913-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:27:56,088726615-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:28:05,052546295-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:28:05,069049287-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:28:14,639629105-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:28:14,656293899-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:28:14,669526181-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:28:14,677051064-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:28:14,695013476-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=62252
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_write.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T18:28:14,709799408-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_write.log.2
[1;30mlocalhost.localdomain	[2021-05-14T18:28:14,749180807-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:28:14,755585239-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16777216', '-O', '16777216', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:28:16.231+0000 ffff82e09010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:28:17.063+0000 ffff82e09010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:28:17.067+0000 ffff82e09010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:28:17.096203+0000 Maintaining 256 concurrent writes of 16777216 bytes to objects of size 16777216 for up to 20 seconds or 0 objects
2021-05-15T01:28:17.096317+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:28:20.967015+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:28:20.967015+0000     0       0         0         0         0         0           -           0
2021-05-15T01:28:21.967263+0000     1      20        20         0         0         0           -           0
2021-05-15T01:28:22.967477+0000     2      40        40         0         0         0           -           0
2021-05-15T01:28:23.967702+0000     3      56        56         0         0         0           -           0
2021-05-15T01:28:24.967912+0000     4      78        78         0         0         0           -           0
2021-05-15T01:28:25.968175+0000     5      99        99         0         0         0           -           0
2021-05-15T01:28:26.968408+0000     6     119       119         0         0         0           -           0
2021-05-15T01:28:27.968586+0000     7     138       138         0         0         0           -           0
2021-05-15T01:28:28.968818+0000     8     159       159         0         0         0           -           0
2021-05-15T01:28:29.969035+0000     9     177       177         0         0         0           -           0
2021-05-15T01:28:30.969238+0000    10     198       198         0         0         0           -           0
2021-05-15T01:28:31.969509+0000    11     220       220         0         0         0           -           0
2021-05-15T01:28:32.969744+0000    12     237       237         0         0         0           -           0
2021-05-15T01:28:33.969918+0000    13     255       256         1   1.23051   1.23077     12.9662     12.9662
2021-05-15T01:28:34.970101+0000    14     255       274        19   21.7097       288     13.0396     13.0499
2021-05-15T01:28:35.970294+0000    15     255       296        41   43.7242       352     12.9618     13.0276
2021-05-15T01:28:36.970535+0000    16     255       319        64   63.9866       368     12.7133     12.9628
2021-05-15T01:28:37.970783+0000    17     255       344        89   83.7469       400     12.5211     12.8715
2021-05-15T01:28:38.971021+0000    18     255       365       110   97.7569       336     12.5098     12.8051
2021-05-15T01:28:39.971335+0000    19     255       385       130    109.45       320     12.4688     12.7628
2021-05-15T01:28:40.971725+0000 min lat: 12.4416 max lat: 13.1202 avg lat: 12.7277
2021-05-15T01:28:40.971725+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:28:40.971725+0000    20     255       405       150   119.973       320     12.4567     12.7277
2021-05-15T01:28:41.972215+0000 Total time run:         20.1342
Total writes made:      406
Write size:             16777216
Object size:            16777216
Bandwidth (MB/sec):     322.635
Stddev Bandwidth:       167.882
Max bandwidth (MB/sec): 400
Min bandwidth (MB/sec): 0
Average IOPS:           20
Stddev IOPS:            10.4955
Max IOPS:               25
Min IOPS:               0
Average Latency(s):     8.5956
Stddev Latency(s):      4.26687
Max latency(s):         13.1202
Min latency(s):         0.115732

[1;32mlocalhost.localdomain	[2021-05-14T18:28:43,212999054-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 62252


[1;33mlocalhost.localdomain	[2021-05-14T18:28:43,221490088-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:07,293313089-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 407 objects, 6.3 GiB
    usage:   13 GiB used, 287 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:07,310220849-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:16,472449271-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 407 objects, 6.3 GiB
    usage:   13 GiB used, 287 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:16,489207741-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:25,934983780-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 407 objects, 6.3 GiB
    usage:   13 GiB used, 287 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:25,951922371-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:35,289598905-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 407 objects, 6.3 GiB
    usage:   13 GiB used, 287 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:35,306770875-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:44,460068469-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 407 objects, 6.3 GiB
    usage:   13 GiB used, 287 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:44,477167272-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:44,490733240-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:29:44,498763770-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:29:44,516838025-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=65845
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_seq.dat.2 2

[1;32mlocalhost.localdomain	[2021-05-14T18:29:44,531842679-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_seq.log.2
[1;30mlocalhost.localdomain	[2021-05-14T18:29:44,571546288-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:29:44,578233083-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid cd65f8d9-9f30-4c0d-b1d3-fe7328891ed3 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.5BtURR:/tmp/ceph-asok.5BtURR -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:29:46.150+0000 ffffa0ec9010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:29:46.982+0000 ffffa0ec9010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:29:46.982+0000 ffffa0ec9010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:29:47.018965+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:29:47.018965+0000     0       0         0         0         0         0           -           0
2021-05-15T01:29:48.019223+0000     1      88        88         0         0         0           -           0
2021-05-15T01:29:49.019504+0000     2     175       175         0         0         0           -           0
2021-05-15T01:29:50.019802+0000     3     255       264         9   47.9838        48     2.95406     2.92889
2021-05-15T01:29:51.024328+0000     4     255       323        68   271.624       944     3.25643     3.07479
2021-05-15T01:29:52.028379+0000     5     255       379       124    396.04       896     3.59178     3.22621
2021-05-15T01:29:53.050730+0000     6     165       406       241   639.263      1872     3.31648       3.401
2021-05-15T01:29:54.051001+0000 Total time run:       6.97367
Total reads made:     406
Read size:            16777216
Object size:          16777216
Bandwidth (MB/sec):   931.504
Average IOPS:         58
Stddev IOPS:          47.1399
Max IOPS:             117
Min IOPS:             0
Average Latency(s):   3.02513
Max latency(s):       3.77382
Min latency(s):       1.51566

[1;32mlocalhost.localdomain	[2021-05-14T18:29:55,290778968-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 65845


[1;7;39;49m[2021-05-14T18:29:55,296495397-07:00][RUNNING][ROUND 3/3/20] object_size=16MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:29:55,304304519-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:29:55,321430042-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40183\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1817643\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid bb0690ce-620a-48d9-ac79-ddde9d8001f5\nsetting min_mon_release = octopus\nepoch 0\nfsid bb0690ce-620a-48d9-ac79-ddde9d8001f5\nlast_changed 2021-05-14T18:30:26.475934-0700\ncreated 2021-05-14T18:30:26.475934-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40183/0,v1:10.10.1.2:40184/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1817643 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 69995e81-657f-490b-8278-1cc92c3178e1\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 5026c49a-644d-4007-ba55-0b2df5387533\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 aa6421cc-94ef-4759-8843-cb70c32e4060\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42183\n  w/ user/pass: admin / 08f5f15d-21c2-4f0b-85b5-bde86268207d\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 18:30:49 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40183
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1817643
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid bb0690ce-620a-48d9-ac79-ddde9d8001f5
setting min_mon_release = octopus
epoch 0
fsid bb0690ce-620a-48d9-ac79-ddde9d8001f5
last_changed 2021-05-14T18:30:26.475934-0700
created 2021-05-14T18:30:26.475934-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40183/0,v1:10.10.1.2:40184/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1817643 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 69995e81-657f-490b-8278-1cc92c3178e1
0
start osd.0
add osd1 5026c49a-644d-4007-ba55-0b2df5387533
1
start osd.1
add osd2 aa6421cc-94ef-4759-8843-cb70c32e4060
2
start osd.2


restful urls: https://10.10.1.2:42183
  w/ user/pass: admin / 08f5f15d-21c2-4f0b-85b5-bde86268207d


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:29:57.385-0700 7f3c746881c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:29:57.385-0700 7f3c746881c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:29:57.409-0700 7f3a045641c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:29:57.409-0700 7f3a045641c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40183,v1:10.10.1.2:40184] --print /tmp/ceph_monmap.1817643 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1817643 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1817643 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42183 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x564bfdf18000 @  0x7feb4d9a1680 0x7feb4d9c2824 0x7feb4e15d187 0x7feb4e165355 0x7feb4e15d708 0x7feb4e15d877 0x7feb4e15ec24 0x7feb4e176ec1 0x7feb4e0e95f3 0x7feb4e14ae97 0x7feb4e152b1a 0x7feb4d855d84 0x7feb4d971609 0x7feb4d545103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.cBIZ5ErglO 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 69995e81-657f-490b-8278-1cc92c3178e1 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBAJJ9gjoFNHRAAhiFpYJAoJJi3gtIsF6TxmA== --osd-uuid 69995e81-657f-490b-8278-1cc92c3178e1 
2021-05-14T18:30:41.277-0700 7f28e5aeef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:30:41.301-0700 7f28e5aeef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:30:41.301-0700 7f28e5aeef00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5603c6196000 @  0x7f28e64b7680 0x7f28e64d8824 0x5603bb5b3447 0x5603bb5bb4b5 0x5603bb5b39c8 0x5603bb5b3b37 0x5603bb5b4ee4 0x5603bb385ca1 0x5603bb55d423 0x5603bb3762a7 0x5603bb37b53a 0x7f28e600ad84 0x7f28e618f609 0x7f28e5cf8103
2021-05-14T18:30:41.709-0700 7f28e5aeef00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 5026c49a-644d-4007-ba55-0b2df5387533 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56004d8d2000 @  0x7ff387057680 0x7ff387078824 0x560042305447 0x56004230d4b5 0x5600423059c8 0x560042305b37 0x560042306ee4 0x5600420d7ca1 0x5600422af423 0x5600420c82a7 0x5600420cd53a 0x7ff386baad84 0x7ff386d2f609 0x7ff386898103
2021-05-14T18:30:42.513-0700 7ff38668ef00 -1 Falling back to public interface
2021-05-14T18:30:42.865-0700 7ff38668ef00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBCJJ9gEAoNBxAAUS34yh99c0YG6JaOrkTG+w== --osd-uuid 5026c49a-644d-4007-ba55-0b2df5387533 
2021-05-14T18:30:42.897-0700 7fd7f38e5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:30:42.917-0700 7fd7f38e5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:30:42.917-0700 7fd7f38e5f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x558406ed2000 @  0x7fd7f42ae680 0x7fd7f42cf824 0x5583fcf6f447 0x5583fcf774b5 0x5583fcf6f9c8 0x5583fcf6fb37 0x5583fcf70ee4 0x5583fcd41ca1 0x5583fcf19423 0x5583fcd322a7 0x5583fcd3753a 0x7fd7f3e01d84 0x7fd7f3f86609 0x7fd7f3aef103
2021-05-14T18:30:43.337-0700 7fd7f38e5f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new aa6421cc-94ef-4759-8843-cb70c32e4060 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55f72fbea000 @  0x7ff387c86680 0x7ff387ca7824 0x55f7246c6447 0x55f7246ce4b5 0x55f7246c69c8 0x55f7246c6b37 0x55f7246c7ee4 0x55f724498ca1 0x55f724670423 0x55f7244892a7 0x55f72448e53a 0x7ff3877d9d84 0x7ff38795e609 0x7ff3874c7103
2021-05-14T18:30:44.057-0700 7ff3872bdf00 -1 Falling back to public interface
2021-05-14T18:30:44.409-0700 7ff3872bdf00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBDJJ9ggOy+KBAAIs7aL0W1+qZ6i2K4/O0O0g== --osd-uuid aa6421cc-94ef-4759-8843-cb70c32e4060 
2021-05-14T18:30:44.465-0700 7f28d3fb7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:30:44.485-0700 7f28d3fb7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:30:44.485-0700 7f28d3fb7f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55bf015e8000 @  0x7f28d4980680 0x7f28d49a1824 0x55bef6024447 0x55bef602c4b5 0x55bef60249c8 0x55bef6024b37 0x55bef6025ee4 0x55bef5df6ca1 0x55bef5fce423 0x55bef5de72a7 0x55bef5dec53a 0x7f28d44d3d84 0x7f28d4658609 0x7f28d41c1103
2021-05-14T18:30:44.913-0700 7f28d3fb7f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55d818e6e000 @  0x7f1eff773680 0x7f1eff794824 0x55d80e5b2447 0x55d80e5ba4b5 0x55d80e5b29c8 0x55d80e5b2b37 0x55d80e5b3ee4 0x55d80e384ca1 0x55d80e55c423 0x55d80e3752a7 0x55d80e37a53a 0x7f1eff2c6d84 0x7f1eff44b609 0x7f1efefb4103
2021-05-14T18:30:45.661-0700 7f1efedaaf00 -1 Falling back to public interface
2021-05-14T18:30:46.001-0700 7f1efedaaf00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:30:49,788391586-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:30:49,809101042-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:30:49,896912112-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:30:49,903834537-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:30:53.330+0000 ffffa7d071e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:30:54.162+0000 ffffa7d071e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:30:55,738730642-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:30:55,744998236-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:30:57.607+0000 ffff96f691e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:30:58.451+0000 ffff95d071e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:30:59,787614956-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:30:59,794080973-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:01.503+0000 ffffa9c0a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:02.335+0000 ffffa9c0a1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:31:03,734777919-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:03,742039507-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:05.528+0000 ffff8a84d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:06.376+0000 ffff8a84d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:09.513+0000 ffff92c241e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:10.345+0000 ffff92c241e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 3          default
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:31:11,768414582-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:11,774689992-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:13.429+0000 ffff84eb31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:14.301+0000 ffff84eb31e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:31:16,629357031-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:16,635612502-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:18.558+0000 ffffa04a81e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:19.382+0000 ffffa04a81e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:31:21,171263342-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:21,177809728-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:22.843+0000 ffff9efda1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:23.699+0000 ffff9efda1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:31:25,695363805-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:25,701729740-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:27.360+0000 ffff9df871e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:28.200+0000 ffff9df871e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:31:29,875599315-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:29,882028846-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:31.828+0000 ffff8e7fb1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:32.653+0000 ffff8d5991e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:31:35,168205550-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:35,174661980-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:36.845+0000 ffff79e111e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:37.697+0000 ffff79e111e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:31:39,700588423-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:39,707037847-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:41.314+0000 ffff9f6981e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:42.150+0000 ffff9f6981e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 21 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 21 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:31:43,514722782-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:31:43,520990705-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:31:45.427+0000 ffff853cd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:31:46.271+0000 ffff7ffff1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  189 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  1.00  143      up          osd.2  
                       TOTAL  300 GiB  190 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 1.00/1.00  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:31:47,582714550-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:11,804023160-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:20,955436769-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:30,219583156-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:39,572808463-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   211 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:39,589814519-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:48,728929740-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:48,746005018-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:57,837965666-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:32:57,855413038-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:33:06,957009251-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:33:06,974239805-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:33:16,319065742-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   232 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:33:16,336294242-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:33:16,349990566-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:33:16,357992171-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:33:16,376694088-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=76166
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_write.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T18:33:16,391840396-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_write.log.3
[1;30mlocalhost.localdomain	[2021-05-14T18:33:16,432178041-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:33:16,438679749-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16777216', '-O', '16777216', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:33:18.071+0000 ffffbdfd3010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:33:18.891+0000 ffffbdfd3010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:33:18.891+0000 ffffbdfd3010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:33:18.921723+0000 Maintaining 256 concurrent writes of 16777216 bytes to objects of size 16777216 for up to 20 seconds or 0 objects
2021-05-15T01:33:18.921843+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:33:22.771126+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:33:22.771126+0000     0       0         0         0         0         0           -           0
2021-05-15T01:33:23.771358+0000     1      22        22         0         0         0           -           0
2021-05-15T01:33:24.771614+0000     2      44        44         0         0         0           -           0
2021-05-15T01:33:25.771923+0000     3      65        65         0         0         0           -           0
2021-05-15T01:33:26.772243+0000     4      85        85         0         0         0           -           0
2021-05-15T01:33:27.772530+0000     5     104       104         0         0         0           -           0
2021-05-15T01:33:28.772868+0000     6     123       123         0         0         0           -           0
2021-05-15T01:33:29.773092+0000     7     144       144         0         0         0           -           0
2021-05-15T01:33:30.773366+0000     8     163       163         0         0         0           -           0
2021-05-15T01:33:31.773606+0000     9     182       182         0         0         0           -           0
2021-05-15T01:33:32.773852+0000    10     204       204         0         0         0           -           0
2021-05-15T01:33:33.774068+0000    11     224       224         0         0         0           -           0
2021-05-15T01:33:34.774309+0000    12     245       245         0         0         0           -           0
2021-05-15T01:33:35.774628+0000    13     255       264         9   11.0741   11.0769      12.678     12.6248
2021-05-15T01:33:36.774934+0000    14     255       286        31   35.4193       352     12.5966     12.6351
2021-05-15T01:33:37.775302+0000    15     255       306        51   54.3854       320     12.6941     12.6567
2021-05-15T01:33:38.775519+0000    16     255       323        68    67.982       272     12.7709     12.6733
2021-05-15T01:33:39.775726+0000    17     255       339        84   79.0381       256     13.1086     12.7221
2021-05-15T01:33:40.775955+0000    18     255       357       102   90.6431       288     13.0375     12.7928
2021-05-15T01:33:41.776159+0000    19     255       377       122    102.71       320     13.1259     12.8438
2021-05-15T01:33:42.776383+0000 min lat: 12.549 max lat: 13.1971 avg lat: 12.8878
2021-05-15T01:33:42.776383+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:33:42.776383+0000    20     255       398       143   114.371       336     13.0953     12.8878
2021-05-15T01:33:43.776702+0000 Total time run:         20.1089
Total writes made:      399
Write size:             16777216
Object size:            16777216
Bandwidth (MB/sec):     317.471
Stddev Bandwidth:       150.782
Max bandwidth (MB/sec): 352
Min bandwidth (MB/sec): 0
Average IOPS:           19
Stddev IOPS:            9.44848
Max IOPS:               22
Min IOPS:               0
Average Latency(s):     8.88717
Stddev Latency(s):      4.26482
Max latency(s):         13.1971
Min latency(s):         0.126392

[1;32mlocalhost.localdomain	[2021-05-14T18:33:44,994256195-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 76166


[1;33mlocalhost.localdomain	[2021-05-14T18:33:45,002645001-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:09,168791858-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:09,186399098-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:18,416080575-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:18,433769743-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:27,495936387-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:27,513160070-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:36,817133834-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:36,834749399-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:46,060980427-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:46,078546439-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:46,092469347-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:34:46,100898210-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:34:46,119556649-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=79785
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_seq.dat.3 2

[1;32mlocalhost.localdomain	[2021-05-14T18:34:46,134980354-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_seq.log.3
[1;30mlocalhost.localdomain	[2021-05-14T18:34:46,174723252-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:34:46,181174657-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', 'c1716330-eed1-48e6-9ef4-5bcc58ae5288', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid c1716330-eed1-48e6-9ef4-5bcc58ae5288 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.WIuBoO:/tmp/ceph-asok.WIuBoO -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:34:47.798+0000 ffff953a7010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:34:48.614+0000 ffff953a7010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:34:48.614+0000 ffff953a7010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:34:48.652186+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:34:48.652186+0000     0       0         0         0         0         0           -           0
2021-05-15T01:34:49.652431+0000     1      93        93         0         0         0           -           0
2021-05-15T01:34:50.652739+0000     2     182       182         0         0         0           -           0
2021-05-15T01:34:51.655348+0000     3     255       265        10   53.2737   53.3333     2.95166     2.91165
2021-05-15T01:34:52.660734+0000     4     255       324        69   275.398       944     3.30636     3.09353
2021-05-15T01:34:53.664481+0000     5     255       377       122   389.427       848      3.6898     3.26353
2021-05-15T01:34:54.665594+0000     6     158       399       241   641.213      1904     3.32214     3.44605
2021-05-15T01:34:55.665863+0000 Total time run:       6.91305
Total reads made:     399
Read size:            16777216
Object size:          16777216
Bandwidth (MB/sec):   923.47
Average IOPS:         57
Stddev IOPS:          47.6109
Max IOPS:             119
Min IOPS:             0
Average Latency(s):   3.06868
Max latency(s):       3.83883
Min latency(s):       1.51362

[1;32mlocalhost.localdomain	[2021-05-14T18:34:57,176045263-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 79785


[1;7;39;49m[2021-05-14T18:34:57,181589882-07:00][RUNNING][ROUND 4/3/20] object_size=16MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:34:57,189841265-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:34:57,206786785-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40386\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1820831\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 914b21a9-12be-4665-8ad1-a4921890826f\nsetting min_mon_release = octopus\nepoch 0\nfsid 914b21a9-12be-4665-8ad1-a4921890826f\nlast_changed 2021-05-14T18:35:28.756006-0700\ncreated 2021-05-14T18:35:28.756006-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40386/0,v1:10.10.1.2:40387/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1820831 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 dee9b612-5d71-4f4c-984a-4c246939e5e5\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 5a3b7a21-d3a6-4294-8307-4e7254282705\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 110f0762-d2ce-4695-9d4e-7ea8df17b1c0\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42386\n  w/ user/pass: admin / a078c509-3ca1-4d42-875f-c92dc9ff8f1e\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 18:35:52 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40386
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1820831
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 914b21a9-12be-4665-8ad1-a4921890826f
setting min_mon_release = octopus
epoch 0
fsid 914b21a9-12be-4665-8ad1-a4921890826f
last_changed 2021-05-14T18:35:28.756006-0700
created 2021-05-14T18:35:28.756006-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40386/0,v1:10.10.1.2:40387/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1820831 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 dee9b612-5d71-4f4c-984a-4c246939e5e5
0
start osd.0
add osd1 5a3b7a21-d3a6-4294-8307-4e7254282705
1
start osd.1
add osd2 110f0762-d2ce-4695-9d4e-7ea8df17b1c0
2
start osd.2


restful urls: https://10.10.1.2:42386
  w/ user/pass: admin / a078c509-3ca1-4d42-875f-c92dc9ff8f1e


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:34:59.280-0700 7fa9cc8481c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:34:59.280-0700 7fa9cc8481c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:34:59.300-0700 7f00dc8911c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:34:59.300-0700 7f00dc8911c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
WARNING: ceph-osd did not orderly shutdown, killing it hard!
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40386,v1:10.10.1.2:40387] --print /tmp/ceph_monmap.1820831 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1820831 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1820831 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42386 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x559b5f9c2000 @  0x7fcb145c6680 0x7fcb145e7824 0x7fcb14d82187 0x7fcb14d8a355 0x7fcb14d82708 0x7fcb14d82877 0x7fcb14d83c24 0x7fcb14d9bec1 0x7fcb14d0e5f3 0x7fcb14d6fe97 0x7fcb14d77b1a 0x7fcb1447ad84 0x7fcb14596609 0x7fcb1416a103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.RCwWGqHzkw 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new dee9b612-5d71-4f4c-984a-4c246939e5e5 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBuJZ9g4/mYKhAAm+VlLXGkpFl3x6g0Bb7Seg== --osd-uuid dee9b612-5d71-4f4c-984a-4c246939e5e5 
2021-05-14T18:35:43.500-0700 7fdacc0ccf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:35:43.524-0700 7fdacc0ccf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:35:43.524-0700 7fdacc0ccf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x56415c76e000 @  0x7fdacca95680 0x7fdaccab6824 0x564151ba0447 0x564151ba84b5 0x564151ba09c8 0x564151ba0b37 0x564151ba1ee4 0x564151972ca1 0x564151b4a423 0x5641519632a7 0x56415196853a 0x7fdacc5e8d84 0x7fdacc76d609 0x7fdacc2d6103
2021-05-14T18:35:43.940-0700 7fdacc0ccf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 5a3b7a21-d3a6-4294-8307-4e7254282705 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x5582287fc000 @  0x7fbc0e6e5680 0x7fbc0e706824 0x55821de12447 0x55821de1a4b5 0x55821de129c8 0x55821de12b37 0x55821de13ee4 0x55821dbe4ca1 0x55821ddbc423 0x55821dbd52a7 0x55821dbda53a 0x7fbc0e238d84 0x7fbc0e3bd609 0x7fbc0df26103
2021-05-14T18:35:44.700-0700 7fbc0dd1cf00 -1 Falling back to public interface
2021-05-14T18:35:45.052-0700 7fbc0dd1cf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBwJZ9gMg1YEhAAXhrc96T7YTTsB9q2/edm3g== --osd-uuid 5a3b7a21-d3a6-4294-8307-4e7254282705 
2021-05-14T18:35:45.140-0700 7f887307cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:35:45.160-0700 7f887307cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:35:45.160-0700 7f887307cf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5617e63ea000 @  0x7f8873a45680 0x7f8873a66824 0x5617dbc80447 0x5617dbc884b5 0x5617dbc809c8 0x5617dbc80b37 0x5617dbc81ee4 0x5617dba52ca1 0x5617dbc2a423 0x5617dba432a7 0x5617dba4853a 0x7f8873598d84 0x7f887371d609 0x7f8873286103
2021-05-14T18:35:45.544-0700 7f887307cf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 110f0762-d2ce-4695-9d4e-7ea8df17b1c0 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55e81a210000 @  0x7f27e42c2680 0x7f27e42e3824 0x55e80e89b447 0x55e80e8a34b5 0x55e80e89b9c8 0x55e80e89bb37 0x55e80e89cee4 0x55e80e66dca1 0x55e80e845423 0x55e80e65e2a7 0x55e80e66353a 0x7f27e3e15d84 0x7f27e3f9a609 0x7f27e3b03103
2021-05-14T18:35:46.284-0700 7f27e38f9f00 -1 Falling back to public interface
2021-05-14T18:35:46.660-0700 7f27e38f9f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBxJZ9gZIqgNhAAfP2q1bSVMzd8xsHUYc3sjQ== --osd-uuid 110f0762-d2ce-4695-9d4e-7ea8df17b1c0 
2021-05-14T18:35:46.680-0700 7fede4bc6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:35:46.700-0700 7fede4bc6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:35:46.700-0700 7fede4bc6f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x557dd5506000 @  0x7fede558f680 0x7fede55b0824 0x557dca161447 0x557dca1694b5 0x557dca1619c8 0x557dca161b37 0x557dca162ee4 0x557dc9f33ca1 0x557dca10b423 0x557dc9f242a7 0x557dc9f2953a 0x7fede50e2d84 0x7fede5267609 0x7fede4dd0103
2021-05-14T18:35:47.100-0700 7fede4bc6f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5591fc794000 @  0x7fae33b60680 0x7fae33b81824 0x5591f0db8447 0x5591f0dc04b5 0x5591f0db89c8 0x5591f0db8b37 0x5591f0db9ee4 0x5591f0b8aca1 0x5591f0d62423 0x5591f0b7b2a7 0x5591f0b8053a 0x7fae336b3d84 0x7fae33838609 0x7fae333a1103
2021-05-14T18:35:47.828-0700 7fae33197f00 -1 Falling back to public interface
2021-05-14T18:35:48.172-0700 7fae33197f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:35:52,048806269-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:35:52,069408695-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:35:52,152343341-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:35:52,158654486-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:35:53.933+0000 ffff886211e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:35:54.769+0000 ffff886211e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:35:56,078354528-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:35:56,084589940-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:35:57.734+0000 ffffa0f3e1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:35:58.582+0000 ffffa0f3e1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:36:00,007222052-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:00,013639010-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:01.711+0000 ffffa2c321e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:02.563+0000 ffffa19d01e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:36:03,996028568-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:04,002095202-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:05.695+0000 ffff9b5921e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:06.523+0000 ffff9b5921e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:09.740+0000 ffff9ff8d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:10.548+0000 ffff9ff8d1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:36:12,443566280-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:12,449732726-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:14.077+0000 ffff865fd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:14.941+0000 ffff865fd1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:36:17,046601189-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:17,052921096-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:18.986+0000 ffff9644c1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:19.834+0000 ffff9644c1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:36:21,548057700-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:21,554119742-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:23.238+0000 ffff79d501e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:24.066+0000 ffff79d501e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:36:25,840889174-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:25,847072947-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:27.527+0000 ffff7a8961e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:28.391+0000 ffff7a8961e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:36:30,171135729-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:30,177474599-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:31.956+0000 ffffa19731e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:32.808+0000 ffffa19731e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:36:34,984219181-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:34,990532502-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:36.697+0000 ffff7d3681e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:37.525+0000 ffff77fff1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:36:39,241185959-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:39,247739066-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:40.901+0000 ffff83cf11e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:41.749+0000 ffff83cf11e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:36:43,083162386-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:36:43,089369218-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:36:44.882+0000 ffff8eeb61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:36:45.714+0000 ffff8eeb61e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:36:47,011305129-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:11,155920166-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:20,308189527-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:29,805958398-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:38,946150404-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:48,086263008-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:48,103549221-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:57,284191584-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:37:57,301288165-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:06,492124268-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:06,509287176-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:15,804766886-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:15,821985798-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:24,940259491-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:24,957729096-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:24,971413868-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:38:24,979574815-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:38:24,998563715-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=90350
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_write.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T18:38:25,013785590-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_write.log.4
[1;30mlocalhost.localdomain	[2021-05-14T18:38:25,054174768-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:38:25,060692393-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16777216', '-O', '16777216', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:38:26.739+0000 ffff91b27010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:38:27.572+0000 ffff91b27010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:38:27.572+0000 ffff91b27010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:38:27.601525+0000 Maintaining 256 concurrent writes of 16777216 bytes to objects of size 16777216 for up to 20 seconds or 0 objects
2021-05-15T01:38:27.601637+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:38:31.755157+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:38:31.755157+0000     0       0         0         0         0         0           -           0
2021-05-15T01:38:32.755378+0000     1      21        21         0         0         0           -           0
2021-05-15T01:38:33.755563+0000     2      42        42         0         0         0           -           0
2021-05-15T01:38:34.755797+0000     3      60        60         0         0         0           -           0
2021-05-15T01:38:35.756080+0000     4      81        81         0         0         0           -           0
2021-05-15T01:38:36.756321+0000     5     100       100         0         0         0           -           0
2021-05-15T01:38:37.756570+0000     6     119       119         0         0         0           -           0
2021-05-15T01:38:38.756773+0000     7     141       141         0         0         0           -           0
2021-05-15T01:38:39.756975+0000     8     160       160         0         0         0           -           0
2021-05-15T01:38:40.757157+0000     9     183       183         0         0         0           -           0
2021-05-15T01:38:41.757344+0000    10     204       204         0         0         0           -           0
2021-05-15T01:38:42.757516+0000    11     226       226         0         0         0           -           0
2021-05-15T01:38:43.757726+0000    12     245       245         0         0         0           -           0
2021-05-15T01:38:44.757966+0000    13     255       265        10   12.3052   12.3077     12.5784     12.5945
2021-05-15T01:38:45.758263+0000    14     255       284        29   33.1359       304     12.6159     12.6276
2021-05-15T01:38:46.758503+0000    15     255       299        44   46.9233       240     12.9502      12.668
2021-05-15T01:38:47.758756+0000    16     255       317        62   61.9866       288     12.9126     12.7806
2021-05-15T01:38:48.758992+0000    17     255       337        82   77.1597       320     12.9502     12.8286
2021-05-15T01:38:49.759204+0000    18     255       357       102    90.647       320     12.9125     12.8466
2021-05-15T01:38:50.759447+0000    19     255       377       122   102.714       320     12.9019      12.863
2021-05-15T01:38:51.759697+0000 min lat: 12.5429 max lat: 13.1416 avg lat: 12.8731
2021-05-15T01:38:51.759697+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:38:51.759697+0000    20     255       398       143   114.375       336     12.9554     12.8731
2021-05-15T01:38:52.760018+0000 Total time run:         20.1627
Total writes made:      399
Write size:             16777216
Object size:            16777216
Bandwidth (MB/sec):     316.624
Stddev Bandwidth:       149.413
Max bandwidth (MB/sec): 336
Min bandwidth (MB/sec): 0
Average IOPS:           19
Stddev IOPS:            9.36553
Max IOPS:               21
Min IOPS:               0
Average Latency(s):     8.87298
Stddev Latency(s):      4.28198
Max latency(s):         13.1416
Min latency(s):         0.124698

[1;32mlocalhost.localdomain	[2021-05-14T18:38:53,943167166-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 90350


[1;33mlocalhost.localdomain	[2021-05-14T18:38:53,951882739-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:18,107927464-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:18,125697863-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:29,431187309-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:29,448819685-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:38,599088000-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:38,616761858-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:47,629179588-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:47,646770932-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:56,759659199-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 400 objects, 6.2 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:56,777455043-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:56,791706291-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:39:56,799977879-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:39:56,819127719-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=94024
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_seq.dat.4 2

[1;32mlocalhost.localdomain	[2021-05-14T18:39:56,834829775-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_seq.log.4
[1;30mlocalhost.localdomain	[2021-05-14T18:39:56,874078217-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:39:56,880412074-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '2e898a52-5d09-4293-85bb-c0324656d364', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 2e898a52-5d09-4293-85bb-c0324656d364 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.6mAAUa:/tmp/ceph-asok.6mAAUa -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:39:58.447+0000 ffffb65e0010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:39:59.267+0000 ffffb65e0010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:39:59.267+0000 ffffb65e0010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:39:59.312928+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:39:59.312928+0000     0       6         6         0         0         0           -           0
2021-05-15T01:40:00.313239+0000     1      91        91         0         0         0           -           0
2021-05-15T01:40:01.313625+0000     2     179       179         0         0         0           -           0
2021-05-15T01:40:02.313928+0000     3     255       267        12   63.9652        64     2.91061     2.87706
2021-05-15T01:40:03.314260+0000     4     255       324        69   275.865       912     3.28221     3.06168
2021-05-15T01:40:04.316316+0000     5     255       377       122   390.086       848     3.66457     3.23713
2021-05-15T01:40:05.335205+0000     6     148       399       251   666.787      2064     3.26691     3.40847
2021-05-15T01:40:06.335465+0000 Total time run:       6.8601
Total reads made:     399
Read size:            16777216
Object size:          16777216
Bandwidth (MB/sec):   930.598
Average IOPS:         58
Stddev IOPS:          50.7415
Max IOPS:             129
Min IOPS:             0
Average Latency(s):   3.0375
Max latency(s):       3.80352
Min latency(s):       1.49579

[1;32mlocalhost.localdomain	[2021-05-14T18:40:07,569778070-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 94024


[1;7;39;49m[2021-05-14T18:40:07,575603925-07:00][RUNNING][ROUND 5/3/20] object_size=16MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:40:07,583769054-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:40:07,600942997-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40228\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1825819\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 3deb8e71-2079-4253-acd6-6266e2747844\nsetting min_mon_release = octopus\n'
10.10.1.2: b'epoch 0\nfsid 3deb8e71-2079-4253-acd6-6266e2747844\nlast_changed 2021-05-14T18:40:37.605296-0700\ncreated 2021-05-14T18:40:37.605296-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40228/0,v1:10.10.1.2:40229/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1825819 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 f8dc11cd-c6ef-4eb2-b9f4-309928b9edb7\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 419d8707-8e8c-4014-bcbc-2fd72a4ff226\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 5381cfca-b842-482d-8e64-3a8581f2f352\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\n'
10.10.1.2: b'restful urls: https://10.10.1.2:42228\n  w/ user/pass: admin / a31de240-b76b-4e4f-9116-a16d4d384be8\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 18:41:00 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40228
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1825819
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 3deb8e71-2079-4253-acd6-6266e2747844
setting min_mon_release = octopus
epoch 0
fsid 3deb8e71-2079-4253-acd6-6266e2747844
last_changed 2021-05-14T18:40:37.605296-0700
created 2021-05-14T18:40:37.605296-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40228/0,v1:10.10.1.2:40229/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1825819 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 f8dc11cd-c6ef-4eb2-b9f4-309928b9edb7
0
start osd.0
add osd1 419d8707-8e8c-4014-bcbc-2fd72a4ff226
1
start osd.1
add osd2 5381cfca-b842-482d-8e64-3a8581f2f352
2
start osd.2


restful urls: https://10.10.1.2:42228
  w/ user/pass: admin / a31de240-b76b-4e4f-9116-a16d4d384be8


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:40:09.679-0700 7f9a45d571c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:40:09.679-0700 7f9a45d571c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:40:09.695-0700 7f0f673301c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:40:09.695-0700 7f0f673301c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40228,v1:10.10.1.2:40229] --print /tmp/ceph_monmap.1825819 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1825819 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1825819 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42228 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x564adf010000 @  0x7fda2530c680 0x7fda2532d824 0x7fda25ac8187 0x7fda25ad0355 0x7fda25ac8708 0x7fda25ac8877 0x7fda25ac9c24 0x7fda25ae1ec1 0x7fda25a545f3 0x7fda25ab5e97 0x7fda25abdb1a 0x7fda251c0d84 0x7fda252dc609 0x7fda24eb0103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.rNb9sXCYwd 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new f8dc11cd-c6ef-4eb2-b9f4-309928b9edb7 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCjJp9gqN8xHxAApD2rfT59GfQpwkOz2tmrQA== --osd-uuid f8dc11cd-c6ef-4eb2-b9f4-309928b9edb7 
2021-05-14T18:40:52.292-0700 7f0260001f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:40:52.312-0700 7f0260001f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:40:52.312-0700 7f0260001f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x562b1252c000 @  0x7f02609ca680 0x7f02609eb824 0x562b06e31447 0x562b06e394b5 0x562b06e319c8 0x562b06e31b37 0x562b06e32ee4 0x562b06c03ca1 0x562b06ddb423 0x562b06bf42a7 0x562b06bf953a 0x7f026051dd84 0x7f02606a2609 0x7f026020b103
2021-05-14T18:40:52.764-0700 7f0260001f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 419d8707-8e8c-4014-bcbc-2fd72a4ff226 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55ce34fa2000 @  0x7fc72ac3d680 0x7fc72ac5e824 0x55ce29d4f447 0x55ce29d574b5 0x55ce29d4f9c8 0x55ce29d4fb37 0x55ce29d50ee4 0x55ce29b21ca1 0x55ce29cf9423 0x55ce29b122a7 0x55ce29b1753a 0x7fc72a790d84 0x7fc72a915609 0x7fc72a47e103
2021-05-14T18:40:53.528-0700 7fc72a274f00 -1 Falling back to public interface
2021-05-14T18:40:53.880-0700 7fc72a274f00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQClJp9gGqI5CBAAZRoh/DSJoeX8tqHrNTckWg== --osd-uuid 419d8707-8e8c-4014-bcbc-2fd72a4ff226 
2021-05-14T18:40:53.928-0700 7f2e612e8f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:40:53.948-0700 7f2e612e8f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:40:53.948-0700 7f2e612e8f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x562beeef8000 @  0x7f2e61cb1680 0x7f2e61cd2824 0x562be34cc447 0x562be34d44b5 0x562be34cc9c8 0x562be34ccb37 0x562be34cdee4 0x562be329eca1 0x562be3476423 0x562be328f2a7 0x562be329453a 0x7f2e61804d84 0x7f2e61989609 0x7f2e614f2103
2021-05-14T18:40:54.328-0700 7f2e612e8f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 5381cfca-b842-482d-8e64-3a8581f2f352 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x561729d94000 @  0x7f6081d55680 0x7f6081d76824 0x56171ec17447 0x56171ec1f4b5 0x56171ec179c8 0x56171ec17b37 0x56171ec18ee4 0x56171e9e9ca1 0x56171ebc1423 0x56171e9da2a7 0x56171e9df53a 0x7f60818a8d84 0x7f6081a2d609 0x7f6081596103
2021-05-14T18:40:55.092-0700 7f608138cf00 -1 Falling back to public interface
2021-05-14T18:40:55.436-0700 7f608138cf00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQCmJp9guF4mKxAAAlvPLswwKEKoYVhw8dEcew== --osd-uuid 5381cfca-b842-482d-8e64-3a8581f2f352 
2021-05-14T18:40:55.520-0700 7f8a970c4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:40:55.540-0700 7f8a970c4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:40:55.540-0700 7f8a970c4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5593bb7ca000 @  0x7f8a97a8d680 0x7f8a97aae824 0x5593b06d7447 0x5593b06df4b5 0x5593b06d79c8 0x5593b06d7b37 0x5593b06d8ee4 0x5593b04a9ca1 0x5593b0681423 0x5593b049a2a7 0x5593b049f53a 0x7f8a975e0d84 0x7f8a97765609 0x7f8a972ce103
2021-05-14T18:40:56.048-0700 7f8a970c4f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x562ed8e50000 @  0x7f1f5a111680 0x7f1f5a132824 0x562ecd4ea447 0x562ecd4f24b5 0x562ecd4ea9c8 0x562ecd4eab37 0x562ecd4ebee4 0x562ecd2bcca1 0x562ecd494423 0x562ecd2ad2a7 0x562ecd2b253a 0x7f1f59c64d84 0x7f1f59de9609 0x7f1f59952103
2021-05-14T18:40:56.768-0700 7f1f59748f00 -1 Falling back to public interface
2021-05-14T18:40:57.100-0700 7f1f59748f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:41:00,877453765-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:41:00,898149005-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:41:00,980067631-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:00,986576343-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:02.706+0000 ffff9c2391e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:03.546+0000 ffff9c2391e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:41:04,858180595-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:04,864376278-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:06.519+0000 ffff8bd091e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:07.395+0000 ffff8bd091e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:41:08,806621032-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:08,813156239-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:10.547+0000 ffffa0cba1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:11.368+0000 ffffa0cba1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:41:12,690551074-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:12,696821350-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:14.540+0000 ffff7e6481e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:15.396+0000 ffff7e6481e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:19.017+0000 ffff7684a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:19.837+0000 ffff7684a1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:41:21,376104109-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:21,382524036-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:23.030+0000 ffffb21941e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:23.898+0000 ffffb21941e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:41:25,714951686-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:25,721341953-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:27.402+0000 ffff86fd31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:28.230+0000 ffff86fd31e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:41:30,388676181-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:30,394870559-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:32.095+0000 ffff79eac1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:32.923+0000 ffff79eac1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:41:34,648045931-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:34,654502553-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:36.280+0000 ffff87f1b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:37.120+0000 ffff86cb91e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:41:39,078507553-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:39,084643556-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:40.749+0000 ffff771741e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:41.577+0000 ffff771741e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:41:43,594437898-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:43,600782272-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:45.293+0000 ffff8a3a91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:46.166+0000 ffff8a3a91e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:41:48,068862493-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:48,075120031-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:49.734+0000 ffff7a3581e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:50.550+0000 ffff7a3581e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:41:51,916627907-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:41:51,923014183-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:41:53.623+0000 ffff984ec1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:41:54.479+0000 ffff984ec1e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  152      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  153      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:41:55,885436524-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:42:20,012186904-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:42:29,166803683-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:42:38,374682296-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:42:47,953010546-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:42:57,109715290-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:42:57,127597340-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:06,313493713-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:06,331185906-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:15,546783712-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:15,564547046-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:24,942012130-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:24,959810151-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:34,085817873-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:34,103671523-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:34,118124108-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:43:34,126618379-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:43:34,145593576-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=104566
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_write.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T18:43:34,161375267-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_write.log.5
[1;30mlocalhost.localdomain	[2021-05-14T18:43:34,202496978-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:43:34,209070396-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '16777216', '-O', '16777216', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- rados bench 20 write --pool bench_rados -b 16777216 -O 16777216 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:43:36.020+0000 ffff80e46010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:43:36.848+0000 ffff80e46010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:43:36.848+0000 ffff80e46010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:43:36.880161+0000 Maintaining 256 concurrent writes of 16777216 bytes to objects of size 16777216 for up to 20 seconds or 0 objects
2021-05-15T01:43:36.880275+0000 Object prefix: benchmark_data_localhost.localdomain_6
2021-05-15T01:43:40.906085+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:43:40.906085+0000     0       0         0         0         0         0           -           0
2021-05-15T01:43:41.906295+0000     1      21        21         0         0         0           -           0
2021-05-15T01:43:42.906542+0000     2      42        42         0         0         0           -           0
2021-05-15T01:43:43.906778+0000     3      60        60         0         0         0           -           0
2021-05-15T01:43:44.907018+0000     4      81        81         0         0         0           -           0
2021-05-15T01:43:45.907256+0000     5     101       101         0         0         0           -           0
2021-05-15T01:43:46.907488+0000     6     121       121         0         0         0           -           0
2021-05-15T01:43:47.907814+0000     7     139       139         0         0         0           -           0
2021-05-15T01:43:48.908097+0000     8     158       158         0         0         0           -           0
2021-05-15T01:43:49.908316+0000     9     177       177         0         0         0           -           0
2021-05-15T01:43:50.908536+0000    10     198       198         0         0         0           -           0
2021-05-15T01:43:51.908779+0000    11     218       218         0         0         0           -           0
2021-05-15T01:43:52.909004+0000    12     237       237         0         0         0           -           0
2021-05-15T01:43:53.909227+0000    13     255       255         0         0         0           -           0
2021-05-15T01:43:54.909447+0000    14     255       274        19   21.7093   21.7143     13.1256     13.1417
2021-05-15T01:43:55.909643+0000    15     255       292        37   39.4577       288     13.2615     13.1781
2021-05-15T01:43:56.909841+0000    16     255       310        55   54.9876       288     13.2901     13.2373
2021-05-15T01:43:57.910055+0000    17     255       330        75   70.5723       320     13.2788     13.2584
2021-05-15T01:43:58.910282+0000    18     255       345        90    79.982       240      13.636     13.2961
2021-05-15T01:43:59.910551+0000    19     255       362       107   90.0847       272     13.7984     13.3652
2021-05-15T01:44:00.910818+0000 min lat: 13.0405 max lat: 13.8921 avg lat: 13.431
2021-05-15T01:44:00.910818+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:44:00.910818+0000    20     255       380       125    99.977       288     13.7068      13.431
2021-05-15T01:44:01.911086+0000 Total time run:         20.1296
Total writes made:      381
Write size:             16777216
Object size:            16777216
Bandwidth (MB/sec):     302.838
Stddev Bandwidth:       132.935
Max bandwidth (MB/sec): 320
Min bandwidth (MB/sec): 0
Average IOPS:           18
Stddev IOPS:            8.31786
Max IOPS:               20
Min IOPS:               0
Average Latency(s):     9.18295
Stddev Latency(s):      4.40605
Max latency(s):         13.8921
Min latency(s):         0.119867

[1;32mlocalhost.localdomain	[2021-05-14T18:44:03,130021894-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 104566


[1;33mlocalhost.localdomain	[2021-05-14T18:44:03,138940257-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:27,230009956-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 382 objects, 6.0 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:27,248087115-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:36,575267753-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 382 objects, 6.0 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:36,593439923-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:45,744149064-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 382 objects, 6.0 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:45,761951061-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:54,881409287-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 382 objects, 6.0 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:44:54,899122379-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:45:04,074839450-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 382 objects, 6.0 GiB
    usage:   12 GiB used, 288 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:45:04,092957761-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:45:04,107244628-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:45:04,115718946-07:00] STAGE: Start benchmarking of mode seq ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:45:04,134933359-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=108248
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_16MB_seq.dat.5 2

[1;32mlocalhost.localdomain	[2021-05-14T18:45:04,151296956-07:00] INFO: > Run rados bench[0m
# ./bench-rados:186 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
# ./bench-rados:190 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_16MB_seq.log.5
[1;30mlocalhost.localdomain	[2021-05-14T18:45:04,190389856-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:45:04,196763860-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '0e217542-1e13-4bcf-90ef-e6238a134151', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs', '--', 'rados', 'bench', '99999999', 'seq', '--pool', 'bench_rados', '--concurrent-ios', '256', '--show-time'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 0e217542-1e13-4bcf-90ef-e6238a134151 --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.m2grIs:/tmp/ceph-asok.m2grIs -- rados bench 99999999 seq --pool bench_rados --concurrent-ios 256 --show-time
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:45:05.784+0000 ffff9cb2c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:45:06.624+0000 ffff9cb2c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:45:06.628+0000 ffff9cb2c010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:45:06.664879+0000   sec Cur ops   started  finished  avg MB/s  cur MB/s last lat(s)  avg lat(s)
2021-05-15T01:45:06.664879+0000     0       0         0         0         0         0           -           0
2021-05-15T01:45:07.665110+0000     1      89        89         0         0         0           -           0
2021-05-15T01:45:08.665407+0000     2     171       171         0         0         0           -           0
2021-05-15T01:45:09.665670+0000     3     255       257         2   10.6632   10.6667     2.98753     2.98298
2021-05-15T01:45:10.665951+0000     4     255       311        56   223.929       864     3.41741     3.19554
2021-05-15T01:45:11.669740+0000     5     255       368       113   361.235       912     3.70581     3.37082
2021-05-15T01:45:12.695613+0000     6     124       381       257   681.819      2304     3.03734     3.42807
2021-05-15T01:45:13.695863+0000 Total time run:       6.74694
Total reads made:     381
Read size:            16777216
Object size:          16777216
Bandwidth (MB/sec):   903.52
Average IOPS:         56
Stddev IOPS:          56.6807
Max IOPS:             144
Min IOPS:             0
Average Latency(s):   3.05532
Max latency(s):       3.8323
Min latency(s):       1.4926

[1;32mlocalhost.localdomain	[2021-05-14T18:45:15,134443559-07:00] INFO: > Stop system activity collection service at localhost[0m
# ./bench-rados:198 - rados_bench() > kill -INT 108248


[1;7;39;49m[2021-05-14T18:45:15,143650303-07:00][RUNNING][ROUND 1/4/20] object_size=64MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:45:15,152217817-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T18:45:15,169405669-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40389\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1830266\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5cb2f967-39f1-4d96-a03a-c732cca367f1\nsetting min_mon_release = octopus\nepoch 0\nfsid 5cb2f967-39f1-4d96-a03a-c732cca367f1\nlast_changed 2021-05-14T18:45:46.585144-0700\ncreated 2021-05-14T18:45:46.585144-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40389/0,v1:10.10.1.2:40390/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1830266 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 7e0bf7aa-b324-4408-90dd-4661c5e63e78\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 3cba267f-f3af-4301-a773-22a7c1f79cf0\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 ca8ab457-cb95-4e72-90b2-2928fb7531f2\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42389\n'
10.10.1.2: b'  w/ user/pass: admin / e316e732-5047-43b7-be57-c5f39ceb0a2b\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\nCEPH_DEV=1\n'
[1] 18:46:09 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40389
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1830266
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid 5cb2f967-39f1-4d96-a03a-c732cca367f1
setting min_mon_release = octopus
epoch 0
fsid 5cb2f967-39f1-4d96-a03a-c732cca367f1
last_changed 2021-05-14T18:45:46.585144-0700
created 2021-05-14T18:45:46.585144-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40389/0,v1:10.10.1.2:40390/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1830266 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 7e0bf7aa-b324-4408-90dd-4661c5e63e78
0
start osd.0
add osd1 3cba267f-f3af-4301-a773-22a7c1f79cf0
1
start osd.1
add osd2 ca8ab457-cb95-4e72-90b2-2928fb7531f2
2
start osd.2


restful urls: https://10.10.1.2:42389
  w/ user/pass: admin / e316e732-5047-43b7-be57-c5f39ceb0a2b


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T18:45:17.207-0700 7f5161e2b1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:45:17.207-0700 7f5161e2b1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:45:17.227-0700 7fd1d462d1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T18:45:17.227-0700 7fd1d462d1c0 -1 WARNING: all dangerous and experimental features are enabled.
WARNING:  ceph-osd still alive after 1 seconds
WARNING:  ceph-osd still alive after 2 seconds
WARNING:  ceph-osd still alive after 4 seconds
WARNING:  ceph-osd still alive after 7 seconds
WARNING:  ceph-osd still alive after 12 seconds
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40389,v1:10.10.1.2:40390] --print /tmp/ceph_monmap.1830266 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1830266 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1830266 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42389 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55c17ecce000 @  0x7f4dabc91680 0x7f4dabcb2824 0x7f4dac44d187 0x7f4dac455355 0x7f4dac44d708 0x7f4dac44d877 0x7f4dac44ec24 0x7f4dac466ec1 0x7f4dac3d95f3 0x7f4dac43ae97 0x7f4dac442b1a 0x7f4dabb45d84 0x7f4dabc61609 0x7f4dab835103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.BQma8WEIaO 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7e0bf7aa-b324-4408-90dd-4661c5e63e78 -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDYJ59gvJ07HxAAf7/k9VKNoXQWNqNV9kN5xw== --osd-uuid 7e0bf7aa-b324-4408-90dd-4661c5e63e78 
2021-05-14T18:46:01.315-0700 7f2510518f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:46:01.335-0700 7f2510518f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T18:46:01.335-0700 7f2510518f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x558104008000 @  0x7f2510ee1680 0x7f2510f02824 0x5580f9852447 0x5580f985a4b5 0x5580f98529c8 0x5580f9852b37 0x5580f9853ee4 0x5580f9624ca1 0x5580f97fc423 0x5580f96152a7 0x5580f961a53a 0x7f2510a34d84 0x7f2510bb9609 0x7f2510722103
2021-05-14T18:46:01.739-0700 7f2510518f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 3cba267f-f3af-4301-a773-22a7c1f79cf0 -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56170c7f4000 @  0x7f33689c5680 0x7f33689e6824 0x561701073447 0x56170107b4b5 0x5617010739c8 0x561701073b37 0x561701074ee4 0x561700e45ca1 0x56170101d423 0x561700e362a7 0x561700e3b53a 0x7f3368518d84 0x7f336869d609 0x7f3368206103
2021-05-14T18:46:02.571-0700 7f3367ffcf00 -1 Falling back to public interface
2021-05-14T18:46:02.923-0700 7f3367ffcf00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDaJ59gHtrMChAA5YkoRN686L0j8cQDSLWEPg== --osd-uuid 3cba267f-f3af-4301-a773-22a7c1f79cf0 
2021-05-14T18:46:02.951-0700 7f9a16877f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:46:02.971-0700 7f9a16877f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T18:46:02.971-0700 7f9a16877f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x55bfbad38000 @  0x7f9a17240680 0x7f9a17261824 0x55bfafd30447 0x55bfafd384b5 0x55bfafd309c8 0x55bfafd30b37 0x55bfafd31ee4 0x55bfafb02ca1 0x55bfafcda423 0x55bfafaf32a7 0x55bfafaf853a 0x7f9a16d93d84 0x7f9a16f18609 0x7f9a16a81103
2021-05-14T18:46:03.391-0700 7f9a16877f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new ca8ab457-cb95-4e72-90b2-2928fb7531f2 -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x558bb6f76000 @  0x7fe2f2e08680 0x7fe2f2e29824 0x558babb6d447 0x558babb754b5 0x558babb6d9c8 0x558babb6db37 0x558babb6eee4 0x558bab93fca1 0x558babb17423 0x558bab9302a7 0x558bab93553a 0x7fe2f295bd84 0x7fe2f2ae0609 0x7fe2f2649103
2021-05-14T18:46:04.151-0700 7fe2f243ff00 -1 Falling back to public interface
2021-05-14T18:46:04.503-0700 7fe2f243ff00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQDbJ59g9x1ULhAAOJn6+4Bhx0nSbmr3UaVZaQ== --osd-uuid ca8ab457-cb95-4e72-90b2-2928fb7531f2 
2021-05-14T18:46:04.551-0700 7ffaec237f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:46:04.571-0700 7ffaec237f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T18:46:04.571-0700 7ffaec237f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x5600eb8de000 @  0x7ffaecc00680 0x7ffaecc21824 0x5600e1322447 0x5600e132a4b5 0x5600e13229c8 0x5600e1322b37 0x5600e1323ee4 0x5600e10f4ca1 0x5600e12cc423 0x5600e10e52a7 0x5600e10ea53a 0x7ffaec753d84 0x7ffaec8d8609 0x7ffaec441103
2021-05-14T18:46:04.999-0700 7ffaec237f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55f8381ce000 @  0x7f595d9da680 0x7f595d9fb824 0x55f82c78a447 0x55f82c7924b5 0x55f82c78a9c8 0x55f82c78ab37 0x55f82c78bee4 0x55f82c55cca1 0x55f82c734423 0x55f82c54d2a7 0x55f82c55253a 0x7f595d52dd84 0x7f595d6b2609 0x7f595d21b103
2021-05-14T18:46:05.719-0700 7f595d011f00 -1 Falling back to public interface
2021-05-14T18:46:06.055-0700 7f595d011f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T18:46:09,951990059-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T18:46:09,974031211-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T18:46:10,054373257-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:10,060743916-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:11.787+0000 ffff9b5091e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:12.631+0000 ffff9b5091e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T18:46:14,188648237-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:14,194912167-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:15.956+0000 ffff7d30d1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:16.824+0000 ffff7d30d1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T18:46:18,148290495-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:18,154768287-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:19.832+0000 ffffaec991e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:20.664+0000 ffffaec991e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T18:46:21,974480494-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:21,980979470-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:23.617+0000 ffff84a861e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:24.465+0000 ffff84a861e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:27.426+0000 ffffaa08a1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:28.242+0000 ffffaa08a1e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T18:46:29,671387094-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:29,677632992-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:31.622+0000 ffff95f131e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:32.458+0000 ffff95f131e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T18:46:34,833762790-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:34,840181457-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:36.487+0000 ffff973111e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:37.315+0000 ffff973111e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T18:46:39,474516050-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:39,480886199-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:41.276+0000 ffff95bbd1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:42.104+0000 ffff95bbd1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T18:46:44,489137236-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:44,495944289-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:46.189+0000 ffff9be101e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:47.017+0000 ffff9be101e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:46:48,831309835-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:48,837553407-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:50.502+0000 ffff8f4c61e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:51.374+0000 ffff8f4c61e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T18:46:53,121696753-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:53,128043678-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:54.798+0000 ffff805821e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:46:55.626+0000 ffff805821e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T18:46:57,617605828-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:46:57,623700425-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:46:59.427+0000 ffff99fbc1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:47:00.247+0000 ffff98d5a1e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 1 pgp_num_target 64 autoscale_mode on last_change 22 lfor 0/0/22 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 20 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T18:47:01,692277726-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:47:01,699549964-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:47:03.360+0000 ffff7e5431e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:47:04.172+0000 ffff7e5431e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  195 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   66 KiB   0 B   0 B   0 B  100 GiB     0  1.02  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   63 KiB   0 B   0 B   0 B  100 GiB     0  0.97  143      up          osd.2  
                       TOTAL  300 GiB  197 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.97/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T18:47:05,500167413-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:47:29,644230281-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:47:38,948697993-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:47:48,157277659-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:47:57,249350039-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   221 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:06,405308637-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:06,423633370-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:15,676186837-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:15,696477626-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:24,733119964-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:24,751301872-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:33,924089874-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:33,941984768-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:43,200091097-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   242 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:43,218176719-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:43,233115342-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T18:48:43,241763691-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T18:48:43,261428767-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=118768
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64MB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T18:48:43,277396342-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 67108864 -O 67108864 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64MB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T18:48:43,318089508-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T18:48:43,324729163-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '5035c7cb-9c61-4a28-9233-eb38b74781da', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '67108864', '-O', '67108864', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 5035c7cb-9c61-4a28-9233-eb38b74781da --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.jGB80a:/tmp/ceph-asok.jGB80a -- rados bench 20 write --pool bench_rados -b 67108864 -O 67108864 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T01:48:44.821+0000 ffff9974c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:48:45.633+0000 ffff9974c010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T01:48:45.633+0000 ffff9974c010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T01:48:45.694737+0000 Maintaining 256 concurrent writes of 67108864 bytes to objects of size 67108864 for up to 20 seconds or 0 objects
2021-05-15T01:48:45.694856+0000 Object prefix: benchmark_data_localhost.localdomain_6


[1;7;39;49m[2021-05-14T19:56:22,317158574-07:00][RUNNING][ROUND 1/1/5] object_size=64MB[0m


[1;33mlocalhost.localdomain	[2021-05-14T19:56:22,323798264-07:00] STAGE: Launch a Ceph cluster on host 10.10.1.2 ...[0m
# ./bench-rados:48 - launch_ceph_cluster() > /home/ubuntu/ceph-research/scripts/parallel-ssh --host ljishen@10.10.1.2 sudo bash
[1;30mlocalhost.localdomain	[2021-05-14T19:56:22,340047800-07:00] DEBUG: command from stdin[0m
# /home/ubuntu/ceph-research/scripts/parallel-ssh:30 -  > parallel-ssh --par 5 --timeout 0 --extra-args '-o GlobalKnownHostsFile=/dev/null -o LogLevel=ERROR -o PasswordAuthentication=no -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --inline --send-input --print --host ljishen@10.10.1.2 sudo bash
10.10.1.2: b'ip 10.10.1.2\nport 40038\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/keyring\n'
10.10.1.2: b'/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1849672\n/mnt/sda8/ceph/build/bin/monmaptool: generated fsid ea154809-e8b7-4070-a5fb-404df2be95aa\nsetting min_mon_release = octopus\nepoch 0\nfsid ea154809-e8b7-4070-a5fb-404df2be95aa\nlast_changed 2021-05-14T19:56:28.144508-0700\ncreated 2021-05-14T19:56:28.144508-0700\nmin_mon_release 15 (octopus)\nelection_strategy: 1\n0: [v2:10.10.1.2:40038/0,v1:10.10.1.2:40039/0] mon.a\n/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1849672 (1 monitors)\n'
10.10.1.2: b'\n[mgr]\n\tmgr/telemetry/enable = false\n\tmgr/telemetry/nag = false\n'
10.10.1.2: b'creating /mnt/sda8/ceph/build/dev/mgr.x/keyring\n'
10.10.1.2: b'Restarting RESTful API server...\n'
10.10.1.2: b'add osd0 6d6308cf-71c0-42fc-93a0-89e750e6c4dc\n'
10.10.1.2: b'0\n'
10.10.1.2: b'start osd.0\n'
10.10.1.2: b'add osd1 80c9c36a-de0c-4883-b51e-840425b1cf9d\n'
10.10.1.2: b'1\n'
10.10.1.2: b'start osd.1\n'
10.10.1.2: b'add osd2 7e2c5746-4a02-4063-a3ca-0fd3cb9a5dac\n'
10.10.1.2: b'2\n'
10.10.1.2: b'start osd.2\n'
10.10.1.2: b'\n'
10.10.1.2: b'\nrestful urls: https://10.10.1.2:42038\n  w/ user/pass: admin / bf83527c-7083-4499-9e3b-69d22dfa7486\n\n\n'
10.10.1.2: b'export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH\nexport LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH\nexport PATH=/mnt/sda8/ceph/build/bin:$PATH\nalias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell\n'
10.10.1.2: b'CEPH_DEV=1\n'
[1] 19:56:51 [SUCCESS] ljishen@10.10.1.2
ip 10.10.1.2
port 40038
creating /mnt/sda8/ceph/build/keyring
/mnt/sda8/ceph/build/bin/monmaptool: monmap file /tmp/ceph_monmap.1849672
/mnt/sda8/ceph/build/bin/monmaptool: generated fsid ea154809-e8b7-4070-a5fb-404df2be95aa
setting min_mon_release = octopus
epoch 0
fsid ea154809-e8b7-4070-a5fb-404df2be95aa
last_changed 2021-05-14T19:56:28.144508-0700
created 2021-05-14T19:56:28.144508-0700
min_mon_release 15 (octopus)
election_strategy: 1
0: [v2:10.10.1.2:40038/0,v1:10.10.1.2:40039/0] mon.a
/mnt/sda8/ceph/build/bin/monmaptool: writing epoch 0 to /tmp/ceph_monmap.1849672 (1 monitors)

[mgr]
	mgr/telemetry/enable = false
	mgr/telemetry/nag = false
creating /mnt/sda8/ceph/build/dev/mgr.x/keyring
Restarting RESTful API server...
add osd0 6d6308cf-71c0-42fc-93a0-89e750e6c4dc
0
start osd.0
add osd1 80c9c36a-de0c-4883-b51e-840425b1cf9d
1
start osd.1
add osd2 7e2c5746-4a02-4063-a3ca-0fd3cb9a5dac
2
start osd.2


restful urls: https://10.10.1.2:42038
  w/ user/pass: admin / bf83527c-7083-4499-9e3b-69d22dfa7486


export PYTHONPATH=/mnt/sda8/ceph/src/pybind:/mnt/sda8/ceph/build/lib/cython_modules/lib.3:/mnt/sda8/ceph/src/python-common:$PYTHONPATH
export LD_LIBRARY_PATH=/mnt/sda8/ceph/build/lib:$LD_LIBRARY_PATH
export PATH=/mnt/sda8/ceph/build/bin:$PATH
alias cephfs-shell=/mnt/sda8/ceph/src/tools/cephfs/cephfs-shell
CEPH_DEV=1
Stderr: 2021-05-14T19:56:24.634-0700 7fddb224a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T19:56:24.634-0700 7fddb224a1c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T19:56:24.654-0700 7f9bef1521c0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-14T19:56:24.654-0700 7f9bef1521c0 -1 WARNING: all dangerous and experimental features are enabled.
** going verbose **
rm -f core* 
/mnt/sda8/ceph/build/bin/ceph-authtool --create-keyring --gen-key --name=mon. /mnt/sda8/ceph/build/keyring --cap mon 'allow *' 
/mnt/sda8/ceph/build/bin/ceph-authtool --gen-key --name=client.admin --cap mon 'allow *' --cap osd 'allow *' --cap mds 'allow *' --cap mgr 'allow *' /mnt/sda8/ceph/build/keyring 
/mnt/sda8/ceph/build/bin/monmaptool --create --clobber --addv a [v2:10.10.1.2:40038,v1:10.10.1.2:40039] --print /tmp/ceph_monmap.1849672 
rm -rf -- /mnt/sda8/ceph/build/dev/mon.a 
mkdir -p /mnt/sda8/ceph/build/dev/mon.a 
/mnt/sda8/ceph/build/bin/ceph-mon --mkfs -c /mnt/sda8/ceph/build/ceph.conf -i a --monmap=/tmp/ceph_monmap.1849672 --keyring=/mnt/sda8/ceph/build/keyring 
rm -- /tmp/ceph_monmap.1849672 
/mnt/sda8/ceph/build/bin/ceph-mon -i a -c /mnt/sda8/ceph/build/ceph.conf 
Populating config ...
Setting debug configs ...
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -i /mnt/sda8/ceph/build/dev/mgr.x/keyring auth add mgr.x mon 'allow profile mgr' mds 'allow *' osd 'allow *' 
added key for mgr.x
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/prometheus/x/server_port 9283 --force 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring config set mgr mgr/restful/x/server_port 42038 --force 
Starting mgr.x
/mnt/sda8/ceph/build/bin/ceph-mgr -i x -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x5629520ae000 @  0x7f15fb50f680 0x7f15fb530824 0x7f15fbccb187 0x7f15fbcd3355 0x7f15fbccb708 0x7f15fbccb877 0x7f15fbcccc24 0x7f15fbce4ec1 0x7f15fbc575f3 0x7f15fbcb8e97 0x7f15fbcc0b1a 0x7f15fb3c3d84 0x7f15fb4df609 0x7f15fb0b3103
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
waiting for mgr restful module to start
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring -h 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-self-signed-cert 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring restful create-key admin -o /tmp/tmp.GceHeFkvVw 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 6d6308cf-71c0-42fc-93a0-89e750e6c4dc -i /mnt/sda8/ceph/build/dev/osd0/new.json 
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBqOJ9g4ya3CxAAnjfxf5V3jQ3+Ri+KamQIFg== --osd-uuid 6d6308cf-71c0-42fc-93a0-89e750e6c4dc 
2021-05-14T19:56:42.990-0700 7fa0424b4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T19:56:43.010-0700 7fa0424b4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
2021-05-14T19:56:43.010-0700 7fa0424b4f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd0/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x565336804000 @  0x7fa042e7d680 0x7fa042e9e824 0x56532bb62447 0x56532bb6a4b5 0x56532bb629c8 0x56532bb62b37 0x56532bb63ee4 0x56532b934ca1 0x56532bb0c423 0x56532b9252a7 0x56532b92a53a 0x7fa0429d0d84 0x7fa042b55609 0x7fa0426be103
2021-05-14T19:56:43.418-0700 7fa0424b4f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd0) /mnt/sda8/ceph/build/dev/osd0
/mnt/sda8/ceph/build/bin/ceph-osd -i 0 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 80c9c36a-de0c-4883-b51e-840425b1cf9d -i /mnt/sda8/ceph/build/dev/osd1/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x56359be98000 @  0x7f84c82b7680 0x7f84c82d8824 0x563591dab447 0x563591db34b5 0x563591dab9c8 0x563591dabb37 0x563591dacee4 0x563591b7dca1 0x563591d55423 0x563591b6e2a7 0x563591b7353a 0x7f84c7e0ad84 0x7f84c7f8f609 0x7f84c7af8103
2021-05-14T19:56:44.182-0700 7f84c78eef00 -1 Falling back to public interface
2021-05-14T19:56:44.526-0700 7f84c78eef00 -1 osd.0 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBrOJ9gkqUELxAAIw2WlfuV+yrVBVDjPnnh8w== --osd-uuid 80c9c36a-de0c-4883-b51e-840425b1cf9d 
2021-05-14T19:56:44.578-0700 7f8e6b5ebf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T19:56:44.598-0700 7f8e6b5ebf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
2021-05-14T19:56:44.598-0700 7f8e6b5ebf00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd1/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x559e8628c000 @  0x7f8e6bfb4680 0x7f8e6bfd5824 0x559e7a551447 0x559e7a5594b5 0x559e7a5519c8 0x559e7a551b37 0x559e7a552ee4 0x559e7a323ca1 0x559e7a4fb423 0x559e7a3142a7 0x559e7a31953a 0x7f8e6bb07d84 0x7f8e6bc8c609 0x7f8e6b7f5103
2021-05-14T19:56:44.990-0700 7f8e6b5ebf00 -1 memstore(/mnt/sda8/ceph/build/dev/osd1) /mnt/sda8/ceph/build/dev/osd1
/mnt/sda8/ceph/build/bin/ceph-osd -i 1 -c /mnt/sda8/ceph/build/ceph.conf 
/mnt/sda8/ceph/build/bin/ceph -c /mnt/sda8/ceph/build/ceph.conf -k /mnt/sda8/ceph/build/keyring osd new 7e2c5746-4a02-4063-a3ca-0fd3cb9a5dac -i /mnt/sda8/ceph/build/dev/osd2/new.json 
tcmalloc: large alloc 1074077696 bytes == 0x55d975e8e000 @  0x7fcb96b52680 0x7fcb96b73824 0x55d96b910447 0x55d96b9184b5 0x55d96b9109c8 0x55d96b910b37 0x55d96b911ee4 0x55d96b6e2ca1 0x55d96b8ba423 0x55d96b6d32a7 0x55d96b6d853a 0x7fcb966a5d84 0x7fcb9682a609 0x7fcb96393103
2021-05-14T19:56:45.758-0700 7fcb96189f00 -1 Falling back to public interface
2021-05-14T19:56:46.102-0700 7fcb96189f00 -1 osd.1 0 log_to_monitors {default=true}
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf --mkfs --key AQBtOJ9gMunGFhAAvsYuAwmvDI7JDms/WhcQJw== --osd-uuid 7e2c5746-4a02-4063-a3ca-0fd3cb9a5dac 
2021-05-14T19:56:46.174-0700 7fa285949f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T19:56:46.194-0700 7fa285949f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
2021-05-14T19:56:46.194-0700 7fa285949f00 -1 auth: unable to find a keyring on /mnt/sda8/ceph/build/dev/osd2/keyring: (2) No such file or directory
tcmalloc: large alloc 1074077696 bytes == 0x556da470c000 @  0x7fa286312680 0x7fa286333824 0x556d9a3d5447 0x556d9a3dd4b5 0x556d9a3d59c8 0x556d9a3d5b37 0x556d9a3d6ee4 0x556d9a1a7ca1 0x556d9a37f423 0x556d9a1982a7 0x556d9a19d53a 0x7fa285e65d84 0x7fa285fea609 0x7fa285b53103
2021-05-14T19:56:46.578-0700 7fa285949f00 -1 memstore(/mnt/sda8/ceph/build/dev/osd2) /mnt/sda8/ceph/build/dev/osd2
/mnt/sda8/ceph/build/bin/ceph-osd -i 2 -c /mnt/sda8/ceph/build/ceph.conf 
tcmalloc: large alloc 1074077696 bytes == 0x55855a2ba000 @  0x7f579f21d680 0x7f579f23e824 0x55854f45d447 0x55854f4654b5 0x55854f45d9c8 0x55854f45db37 0x55854f45eee4 0x55854f22fca1 0x55854f407423 0x55854f2202a7 0x55854f22553a 0x7f579ed70d84 0x7f579eef5609 0x7f579ea5e103
2021-05-14T19:56:47.310-0700 7f579e854f00 -1 Falling back to public interface
2021-05-14T19:56:47.650-0700 7f579e854f00 -1 osd.2 0 log_to_monitors {default=true}
OSDs started
vstart cluster complete. Use stop.sh to stop. See out/* (e.g. 'tail -f out/????') for debug output.


[1;33mlocalhost.localdomain	[2021-05-14T19:56:51,737119164-07:00] STAGE: Update local ceph.conf as a client...[0m
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_device_name /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_device_name *=).*$/\1 mlx5_0/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:71 - update_local_ceph_conf() > grep --fixed-strings --word-regexp --quiet ms_async_rdma_local_gid /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf
# ./bench-rados:74 - update_local_ceph_conf() > sed --in-place --regexp-extended 's/(ms_async_rdma_local_gid *=).*$/\1 0000:0000:0000:0000:0000:ffff:0a0a:0104/g' /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf


[1;33mlocalhost.localdomain	[2021-05-14T19:56:51,778281232-07:00] STAGE: Configure Ceph pool...[0m
# ./bench-rados:85 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_max_backfills 32
[1;30mlocalhost.localdomain	[2021-05-14T19:56:51,864194937-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:56:51,870892686-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'config', 'set', 'osd', 'osd_max_backfills', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph config set osd osd_max_backfills 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:56:57.868+0000 ffff750441e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:56:58.760+0000 ffff748431e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:86 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_active 32
[1;30mlocalhost.localdomain	[2021-05-14T19:57:00,204101908-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:00,210458155-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_active', '32'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph config set osd osd_recovery_max_active 32
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:01.860+0000 ffff9e44b1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:02.728+0000 ffff9d1e91e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:87 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_max_single_start 8
[1;30mlocalhost.localdomain	[2021-05-14T19:57:04,428572186-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:04,435061116-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_max_single_start', '8'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph config set osd osd_recovery_max_single_start 8
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:06.437+0000 ffffaf5621e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:07.285+0000 ffffae3001e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:88 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config set osd osd_recovery_op_priority 63
[1;30mlocalhost.localdomain	[2021-05-14T19:57:08,701685442-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:08,708021180-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'config', 'set', 'osd', 'osd_recovery_op_priority', '63'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph config set osd osd_recovery_op_priority 63
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:10.402+0000 ffff94acf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:11.238+0000 ffff94acf1e0 -1 WARNING: all dangerous and experimental features are enabled.
# ./bench-rados:90 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph config show-with-defaults osd.0
# ./bench-rados:91 - configure_ceph_pool() > column -t -s ' '
# ./bench-rados:91 - configure_ceph_pool() > grep 'osd_max_backfills\|osd_recovery'
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:14.530+0000 ffffa03351e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:15.379+0000 ffff9f0d31e0 -1 WARNING: all dangerous and experimental features are enabled.
osd_max_backfills                        1000       override  mon[32]
osd_recovery_cost                        20971520   default
osd_recovery_delay_start                 0.000000   default
osd_recovery_max_active                  1000       override  mon[32]
osd_recovery_max_active_hdd              1000       override
osd_recovery_max_active_ssd              1000       override
osd_recovery_max_chunk                   8388608    default
osd_recovery_max_omap_entries_per_chunk  8096       default
osd_recovery_max_single_start            8          mon
osd_recovery_op_priority                 63         mon
osd_recovery_op_warn_multiple            16         default
osd_recovery_priority                    5          default
osd_recovery_retry_interval              30.000000  default
osd_recovery_sleep                       0.000000   override
osd_recovery_sleep_hdd                   0.000000   override
osd_recovery_sleep_hybrid                0.000000   override
osd_recovery_sleep_ssd                   0.000000   override
# ./bench-rados:93 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
[1;30mlocalhost.localdomain	[2021-05-14T19:57:16,912978875-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:16,919480722-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'create', 'bench_rados', '128', '128', 'replicated', '--size', '2', '--pg-num-min', '128'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool create bench_rados 128 128 replicated --size 2 --pg-num-min 128
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:18.539+0000 ffffabd231e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:19.387+0000 ffffaaac11e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 'bench_rados' created
# ./bench-rados:95 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados min_size 1
[1;30mlocalhost.localdomain	[2021-05-14T19:57:21,406985935-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:21,413471219-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'min_size', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool set bench_rados min_size 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:23.424+0000 ffffaefc21e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:24.456+0000 ffffadd601e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 min_size to 1
# ./bench-rados:96 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados pg_autoscale_mode off
[1;30mlocalhost.localdomain	[2021-05-14T19:57:27,215633619-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:27,222264008-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'pg_autoscale_mode', 'off'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool set bench_rados pg_autoscale_mode off
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:28.849+0000 ffff75ef71e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:29.713+0000 ffff74c951e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 pg_autoscale_mode to off
# ./bench-rados:97 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool application enable bench_rados benchmark
[1;30mlocalhost.localdomain	[2021-05-14T19:57:31,374180110-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:31,380757345-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'application', 'enable', 'bench_rados', 'benchmark'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool application enable bench_rados benchmark
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:33.190+0000 ffff7a8be1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:34.018+0000 ffff7965c1e0 -1 WARNING: all dangerous and experimental features are enabled.
enabled application 'benchmark' on pool 'bench_rados'
# ./bench-rados:98 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados noscrub 1
[1;30mlocalhost.localdomain	[2021-05-14T19:57:36,362832257-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:36,369468346-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'noscrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool set bench_rados noscrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:38.058+0000 ffff9dacf1e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:38.911+0000 ffff9c86d1e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 noscrub to 1
# ./bench-rados:99 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool set bench_rados nodeep-scrub 1
[1;30mlocalhost.localdomain	[2021-05-14T19:57:41,359809667-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:41,366055436-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'set', 'bench_rados', 'nodeep-scrub', '1'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool set bench_rados nodeep-scrub 1
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:43.023+0000 ffff9d2b31e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:43.859+0000 ffff9d2b31e0 -1 WARNING: all dangerous and experimental features are enabled.
set pool 2 nodeep-scrub to 1
# ./bench-rados:100 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd pool ls detail
[1;30mlocalhost.localdomain	[2021-05-14T19:57:46,225831895-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:46,233140879-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'pool', 'ls', 'detail'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd pool ls detail
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:47.916+0000 ffffa1f151e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:48.740+0000 ffffa1f151e0 -1 WARNING: all dangerous and experimental features are enabled.
pool 1 'device_health_metrics' replicated size 3 min_size 1 crush_rule 0 object_hash rjenkins pg_num 64 pgp_num 64 autoscale_mode on last_change 24 lfor 0/0/21 flags hashpspool stripe_width 0 pg_num_min 1 application mgr_devicehealth
pool 2 'bench_rados' replicated size 2 min_size 1 crush_rule 0 object_hash rjenkins pg_num 128 pgp_num 128 autoscale_mode off last_change 23 flags hashpspool,noscrub,nodeep-scrub stripe_width 0 pg_num_min 128 application benchmark

# ./bench-rados:101 - configure_ceph_pool() > /home/ubuntu/ceph-research/scripts/ceph-shell -- ceph osd df tree
[1;30mlocalhost.localdomain	[2021-05-14T19:57:50,101850398-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:57:50,108115116-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'ceph', 'osd', 'df', 'tree'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- ceph osd df tree
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:57:51.881+0000 ffff91cb91e0 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:57:52.713+0000 ffff90a571e0 -1 WARNING: all dangerous and experimental features are enabled.
ID  CLASS  WEIGHT   REWEIGHT  SIZE     RAW USE  DATA  OMAP  META  AVAIL    %USE  VAR   PGS  STATUS  TYPE NAME      
-1         0.29306         -  300 GiB  218 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -          root default   
-3         0.29306         -  300 GiB  218 KiB   0 B   0 B   0 B  300 GiB     0  1.00    -              host node-0
 0    hdd  0.09769   1.00000  100 GiB   70 KiB   0 B   0 B   0 B  100 GiB     0  0.96  151      up          osd.0  
 1    hdd  0.09769   1.00000  100 GiB   74 KiB   0 B   0 B   0 B  100 GiB     0  1.02  154      up          osd.1  
 2    hdd  0.09769   1.00000  100 GiB   74 KiB   0 B   0 B   0 B  100 GiB     0  1.02  143      up          osd.2  
                       TOTAL  300 GiB  219 KiB   0 B   0 B   0 B  300 GiB     0                                    
MIN/MAX VAR: 0.96/1.02  STDDEV: 0


[1;33mlocalhost.localdomain	[2021-05-14T19:57:54,144972710-07:00] STAGE: Wait for the cluster to become idle...[0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:18,286781249-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   222 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:27,339611247-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   222 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:36,806750495-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   222 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 
  progress:
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:45,953926087-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   236 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:45,965611614-07:00] INFO: >> Counting down idle state [1/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:55,115877705-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   243 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:58:55,127560082-07:00] INFO: >> Counting down idle state [2/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:04,298760007-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   243 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:04,310190072-07:00] INFO: >> Counting down idle state [3/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:13,548791380-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   243 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:13,560159979-07:00] INFO: >> Counting down idle state [4/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:22,662560027-07:00] INFO: >>   data:
    pools:   2 pools, 192 pgs
    objects: 0 objects, 0 B
    usage:   243 KiB used, 300 GiB / 300 GiB avail
    pgs:     192 active+clean
 [0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:22,673928312-07:00] INFO: >> Counting down idle state [5/5][0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:22,682425619-07:00] INFO: > The cluster is idle now.[0m


[1;33mlocalhost.localdomain	[2021-05-14T19:59:22,687393892-07:00] STAGE: Start benchmarking of mode write ...[0m

[1;32mlocalhost.localdomain	[2021-05-14T19:59:22,706107423-07:00] INFO: > Start system activity collection service at localhost[0m
# ./bench-rados:166 - rados_bench() > sar_pid=239706
# ./bench-rados:166 - rados_bench() > S_TIME_FORMAT=ISO
# ./bench-rados:166 - rados_bench() > sar -A -o /home/ubuntu/ceph-research/scripts/benchmarks/output/sys_activity_64MB_write.dat.1 2

[1;32mlocalhost.localdomain	[2021-05-14T19:59:22,715572634-07:00] INFO: > Run rados bench[0m
# ./bench-rados:172 - rados_bench() > /home/ubuntu/ceph-research/scripts/ceph-shell -- rados bench 20 write --pool bench_rados -b 67108864 -O 67108864 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
# ./bench-rados:182 - rados_bench() > tee /home/ubuntu/ceph-research/scripts/benchmarks/output/rados_bench_64MB_write.log.1
[1;30mlocalhost.localdomain	[2021-05-14T19:59:22,754682082-07:00] DEBUG: HOST_PARAMS: [][0m
[1;30mlocalhost.localdomain	[2021-05-14T19:59:22,761431817-07:00] DEBUG: CEPHADM_PARAMS: ['shell', '--config', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf', '--keyring', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring', '--fsid', '4582de46-1deb-4f8c-8985-91e03e596b4e', '--mount', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out', '/home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS', '--', 'rados', 'bench', '20', 'write', '--pool', 'bench_rados', '-b', '67108864', '-O', '67108864', '--concurrent-ios', '256', '--show-time', '--write-object', '--write-omap', '--write-xattr', '--no-cleanup'][0m
# ./parallel-cephadm:68 -  > sudo /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/usr/sbin/cephadm shell --config /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.conf --keyring /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/etc/ceph/ceph.client.admin.keyring --fsid 4582de46-1deb-4f8c-8985-91e03e596b4e --mount /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/lib:/mnt/sda8/ceph/build/lib /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/mnt/sda8/ceph/build/out:/mnt/sda8/ceph/build/out /home/ubuntu/ceph-research/scripts/benchmarks/deployment_data_root/tmp/ceph-asok.MLFlOS:/tmp/ceph-asok.MLFlOS -- rados bench 20 write --pool bench_rados -b 67108864 -O 67108864 --concurrent-ios 256 --show-time --write-object --write-omap --write-xattr --no-cleanup
Using recent ceph image ceph/ceph@sha256:7bda5ef5bf4c06e8b720afefe24b22dd0fe2fdf7f3c34da265dc9238578563ff
2021-05-15T02:59:24.436+0000 ffffa8a9f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:59:25.257+0000 ffffa8a9f010 -1 WARNING: all dangerous and experimental features are enabled.
2021-05-15T02:59:25.257+0000 ffffa8a9f010 -1 WARNING: all dangerous and experimental features are enabled.
hints = 1
2021-05-15T02:59:25.327796+0000 Maintaining 256 concurrent writes of 67108864 bytes to objects of size 67108864 for up to 20 seconds or 0 objects
2021-05-15T02:59:25.327917+0000 Object prefix: benchmark_data_localhost.localdomain_6
